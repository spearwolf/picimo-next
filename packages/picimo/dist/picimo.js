/*!
@file picimo - the hottest webgl library on earth ::( picture-in-motion ):: make sprites & shaders fun again ;-)
@author Wolfger Schramm <wolfger@spearwolf.de>
@version 0.0.1

Copyright 2016-2018 Wolfger Schramm

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.picimo={})}(this,function(t){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(t,e){return t(e={exports:{}},e.exports),e.exports}var n=r(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),i=r(function(t){var e=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=e)}),o=(i.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),a=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t},u=function(t){try{return!!t()}catch(t){return!0}},s=!u(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),c=n.document,f=o(c)&&o(c.createElement),h=function(t){return f?c.createElement(t):{}},l=!s&&!u(function(){return 7!=Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a}),v=function(t,e){if(!o(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!o(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!o(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!o(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},d=Object.defineProperty,p={f:s?Object.defineProperty:function(t,e,r){if(a(t),e=v(e,!0),a(r),l)try{return d(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},y=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},g=s?function(t,e,r){return p.f(t,e,y(1,r))}:function(t,e,r){return t[e]=r,t},m={}.hasOwnProperty,b=function(t,e){return m.call(t,e)},w=0,A=Math.random(),x=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++w+A).toString(36))},E=r(function(t){var e=x("src"),r=Function.toString,o=(""+r).split("toString");i.inspectSource=function(t){return r.call(t)},(t.exports=function(t,r,i,a){var u="function"==typeof i;u&&(b(i,"name")||g(i,"name",r)),t[r]!==i&&(u&&(b(i,e)||g(i,e,t[r]?""+t[r]:o.join(String(r)))),t===n?t[r]=i:a?t[r]?t[r]=i:g(t,r,i):(delete t[r],g(t,r,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||r.call(this)})}),_=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},S=function(t,e,r){if(_(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}},O=function(t,e,r){var o,a,u,s,c=t&O.F,f=t&O.G,h=t&O.S,l=t&O.P,v=t&O.B,d=f?n:h?n[e]||(n[e]={}):(n[e]||{}).prototype,p=f?i:i[e]||(i[e]={}),y=p.prototype||(p.prototype={});for(o in f&&(r=e),r)u=((a=!c&&d&&void 0!==d[o])?d:r)[o],s=v&&a?S(u,n):l&&"function"==typeof u?S(Function.call,u):u,d&&E(d,o,u,t&O.U),p[o]!=u&&g(p,o,s),l&&y[o]!=u&&(y[o]=u)};n.core=i,O.F=1,O.G=2,O.S=4,O.P=8,O.B=16,O.W=32,O.U=64,O.R=128;var T=O,P=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},k=function(t){return Object(P(t))},R=Math.ceil,C=Math.floor,I=function(t){return isNaN(t=+t)?0:(t>0?C:R)(t)},L=Math.max,j=Math.min,F=function(t,e){return(t=I(t))<0?L(t+e,0):j(t,e)},M=Math.min,N=function(t){return t>0?M(I(t),9007199254740991):0},V=[].copyWithin||function(t,e){var r=k(this),n=N(r.length),i=F(t,n),o=F(e,n),a=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===a?n:F(a,n))-o,n-i),s=1;for(o<i&&i<o+u&&(s=-1,o+=u-1,i+=u-1);u-- >0;)o in r?r[i]=r[o]:delete r[i],i+=s,o+=s;return r},B=r(function(t){var e=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(t.exports=function(t,r){return e[t]||(e[t]=void 0!==r?r:{})})("versions",[]).push({version:i.version,mode:"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})}),U=r(function(t){var e=B("wks"),r=n.Symbol,i="function"==typeof r;(t.exports=function(t){return e[t]||(e[t]=i&&r[t]||(i?r:x)("Symbol."+t))}).store=e}),D=U("unscopables"),G=Array.prototype;null==G[D]&&g(G,D,{});var W=function(t){G[D][t]=!0};T(T.P,"Array",{copyWithin:V}),W("copyWithin");var z={}.toString,Y=function(t){return z.call(t).slice(8,-1)},X=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==Y(t)?t.split(""):Object(t)},H=Array.isArray||function(t){return"Array"==Y(t)},K=U("species"),$=function(t,e){return new(function(t){var e;return H(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!H(e.prototype)||(e=void 0),o(e)&&null===(e=e[K])&&(e=void 0)),void 0===e?Array:e}(t))(e)},q=function(t,e){var r=1==t,n=2==t,i=3==t,o=4==t,a=6==t,u=5==t||a,s=e||$;return function(e,c,f){for(var h,l,v=k(e),d=X(v),p=S(c,f,3),y=N(d.length),g=0,m=r?s(e,y):n?s(e,0):void 0;y>g;g++)if((u||g in d)&&(l=p(h=d[g],g,v),t))if(r)m[g]=l;else if(l)switch(t){case 3:return!0;case 5:return h;case 6:return g;case 2:m.push(h)}else if(o)return!1;return a?-1:i||o?o:m}},Z=function(t,e){return!!t&&u(function(){e?t.call(null,function(){},1):t.call(null)})},J=q(4);T(T.P+T.F*!Z([].every,!0),"Array",{every:function(t){return J(this,t,arguments[1])}});var Q=function(t){for(var e=k(this),r=N(e.length),n=arguments.length,i=F(n>1?arguments[1]:void 0,r),o=n>2?arguments[2]:void 0,a=void 0===o?r:F(o,r);a>i;)e[i++]=t;return e};T(T.P,"Array",{fill:Q}),W("fill");var tt=q(2);T(T.P+T.F*!Z([].filter,!0),"Array",{filter:function(t){return tt(this,t,arguments[1])}});var et=q(5),rt=!0;"find"in[]&&Array(1).find(function(){rt=!1}),T(T.P+T.F*rt,"Array",{find:function(t){return et(this,t,arguments.length>1?arguments[1]:void 0)}}),W("find");var nt=q(6),it=!0;"findIndex"in[]&&Array(1).findIndex(function(){it=!1}),T(T.P+T.F*it,"Array",{findIndex:function(t){return nt(this,t,arguments.length>1?arguments[1]:void 0)}}),W("findIndex");var ot=q(0),at=Z([].forEach,!0);T(T.P+T.F*!at,"Array",{forEach:function(t){return ot(this,t,arguments[1])}});var ut=function(t,e,r,n){try{return n?e(a(r)[0],r[1]):e(r)}catch(e){var i=t.return;throw void 0!==i&&a(i.call(t)),e}},st={},ct=U("iterator"),ft=Array.prototype,ht=function(t){return void 0!==t&&(st.Array===t||ft[ct]===t)},lt=function(t,e,r){e in t?p.f(t,e,y(0,r)):t[e]=r},vt=U("toStringTag"),dt="Arguments"==Y(function(){return arguments}()),pt=function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),vt))?r:dt?Y(e):"Object"==(n=Y(e))&&"function"==typeof e.callee?"Arguments":n},yt=U("iterator"),gt=i.getIteratorMethod=function(t){if(null!=t)return t[yt]||t["@@iterator"]||st[pt(t)]},mt=U("iterator"),bt=!1;try{[7][mt]().return=function(){bt=!0}}catch(t){}var wt=function(t,e){if(!e&&!bt)return!1;var r=!1;try{var n=[7],i=n[mt]();i.next=function(){return{done:r=!0}},n[mt]=function(){return i},t(n)}catch(t){}return r};T(T.S+T.F*!wt(function(t){}),"Array",{from:function(t){var e,r,n,i,o=k(t),a="function"==typeof this?this:Array,u=arguments.length,s=u>1?arguments[1]:void 0,c=void 0!==s,f=0,h=gt(o);if(c&&(s=S(s,u>2?arguments[2]:void 0,2)),null==h||a==Array&&ht(h))for(r=new a(e=N(o.length));e>f;f++)lt(r,f,c?s(o[f],f):o[f]);else for(i=h.call(o),r=new a;!(n=i.next()).done;f++)lt(r,f,c?ut(i,s,[n.value,f],!0):n.value);return r.length=f,r}});var At=function(t){return X(P(t))},xt=function(t){return function(e,r,n){var i,o=At(e),a=N(o.length),u=F(n,a);if(t&&r!=r){for(;a>u;)if((i=o[u++])!=i)return!0}else for(;a>u;u++)if((t||u in o)&&o[u]===r)return t||u||0;return!t&&-1}},Et=xt(!0);T(T.P,"Array",{includes:function(t){return Et(this,t,arguments.length>1?arguments[1]:void 0)}}),W("includes");var _t=xt(!1),St=[].indexOf,Ot=!!St&&1/[1].indexOf(1,-0)<0;T(T.P+T.F*(Ot||!Z(St)),"Array",{indexOf:function(t){return Ot?St.apply(this,arguments)||0:_t(this,t,arguments[1])}}),T(T.S,"Array",{isArray:H});var Tt=function(t,e){return{value:e,done:!!t}},Pt=B("keys"),kt=function(t){return Pt[t]||(Pt[t]=x(t))},Rt=xt(!1),Ct=kt("IE_PROTO"),It=function(t,e){var r,n=At(t),i=0,o=[];for(r in n)r!=Ct&&b(n,r)&&o.push(r);for(;e.length>i;)b(n,r=e[i++])&&(~Rt(o,r)||o.push(r));return o},Lt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),jt=Object.keys||function(t){return It(t,Lt)},Ft=s?Object.defineProperties:function(t,e){a(t);for(var r,n=jt(e),i=n.length,o=0;i>o;)p.f(t,r=n[o++],e[r]);return t},Mt=n.document,Nt=Mt&&Mt.documentElement,Vt=kt("IE_PROTO"),Bt=function(){},Ut=function(){var t,e=h("iframe"),r=Lt.length;for(e.style.display="none",Nt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Ut=t.F;r--;)delete Ut.prototype[Lt[r]];return Ut()},Dt=Object.create||function(t,e){var r;return null!==t?(Bt.prototype=a(t),r=new Bt,Bt.prototype=null,r[Vt]=t):r=Ut(),void 0===e?r:Ft(r,e)},Gt=p.f,Wt=U("toStringTag"),zt=function(t,e,r){t&&!b(t=r?t:t.prototype,Wt)&&Gt(t,Wt,{configurable:!0,value:e})},Yt={};g(Yt,U("iterator"),function(){return this});var Xt=function(t,e,r){t.prototype=Dt(Yt,{next:y(1,r)}),zt(t,e+" Iterator")},Ht=kt("IE_PROTO"),Kt=Object.prototype,$t=Object.getPrototypeOf||function(t){return t=k(t),b(t,Ht)?t[Ht]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Kt:null},qt=U("iterator"),Zt=!([].keys&&"next"in[].keys()),Jt=function(){return this},Qt=function(t,e,r,n,i,o,a){Xt(r,e,n);var u,s,c,f=function(t){if(!Zt&&t in d)return d[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},h=e+" Iterator",l="values"==i,v=!1,d=t.prototype,p=d[qt]||d["@@iterator"]||i&&d[i],y=p||f(i),m=i?l?f("entries"):y:void 0,b="Array"==e&&d.entries||p;if(b&&(c=$t(b.call(new t)))!==Object.prototype&&c.next&&(zt(c,h,!0),"function"!=typeof c[qt]&&g(c,qt,Jt)),l&&p&&"values"!==p.name&&(v=!0,y=function(){return p.call(this)}),(Zt||v||!d[qt])&&g(d,qt,y),st[e]=y,st[h]=Jt,i)if(u={values:l?y:f("values"),keys:o?y:f("keys"),entries:m},a)for(s in u)s in d||E(d,s,u[s]);else T(T.P+T.F*(Zt||v),e,u);return u},te=Qt(Array,"Array",function(t,e){this._t=At(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,Tt(1)):Tt(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])},"values");st.Arguments=st.Array,W("keys"),W("values"),W("entries");var ee=[].lastIndexOf,re=!!ee&&1/[1].lastIndexOf(1,-0)<0;T(T.P+T.F*(re||!Z(ee)),"Array",{lastIndexOf:function(t){if(re)return ee.apply(this,arguments)||0;var e=At(this),r=N(e.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,I(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}});var ne=q(1);T(T.P+T.F*!Z([].map,!0),"Array",{map:function(t){return ne(this,t,arguments[1])}}),T(T.S+T.F*u(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,r=new("function"==typeof this?this:Array)(e);e>t;)lt(r,t,arguments[t++]);return r.length=e,r}});var ie=function(t,e,r,n,i){_(e);var o=k(t),a=X(o),u=N(o.length),s=i?u-1:0,c=i?-1:1;if(r<2)for(;;){if(s in a){n=a[s],s+=c;break}if(s+=c,i?s<0:u<=s)throw TypeError("Reduce of empty array with no initial value")}for(;i?s>=0:u>s;s+=c)s in a&&(n=e(n,a[s],s,o));return n};T(T.P+T.F*!Z([].reduce,!0),"Array",{reduce:function(t){return ie(this,t,arguments.length,arguments[1],!1)}}),T(T.P+T.F*!Z([].reduceRight,!0),"Array",{reduceRight:function(t){return ie(this,t,arguments.length,arguments[1],!0)}});var oe=q(3);T(T.P+T.F*!Z([].some,!0),"Array",{some:function(t){return oe(this,t,arguments[1])}});var ae=[].sort,ue=[1,2,3];T(T.P+T.F*(u(function(){ue.sort(void 0)})||!u(function(){ue.sort(null)})||!Z(ae)),"Array",{sort:function(t){return void 0===t?ae.call(k(this)):ae.call(k(this),_(t))}});var se=U("species"),ce=function(t){var e=n[t];s&&e&&!e[se]&&p.f(e,se,{configurable:!0,get:function(){return this}})};ce("Array"),T(T.S,"Date",{now:function(){return(new Date).getTime()}});var fe=Date.prototype.getTime,he=Date.prototype.toISOString,le=function(t){return t>9?t:"0"+t},ve=u(function(){return"0385-07-25T07:06:39.999Z"!=he.call(new Date(-5e13-1))})||!u(function(){he.call(new Date(NaN))})?function(){if(!isFinite(fe.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),r=t.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+le(t.getUTCMonth()+1)+"-"+le(t.getUTCDate())+"T"+le(t.getUTCHours())+":"+le(t.getUTCMinutes())+":"+le(t.getUTCSeconds())+"."+(r>99?r:"0"+le(r))+"Z"}:he;T(T.P+T.F*(Date.prototype.toISOString!==ve),"Date",{toISOString:ve}),T(T.P+T.F*u(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=k(this),r=v(e);return"number"!=typeof r||isFinite(r)?e.toISOString():null}});var de=U("toPrimitive"),pe=Date.prototype;de in pe||g(pe,de,function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return v(a(this),"number"!=t)});var ye=Date.prototype,ge=ye.toString,me=ye.getTime;new Date(NaN)+""!="Invalid Date"&&E(ye,"toString",function(){var t=me.call(this);return t==t?ge.call(this):"Invalid Date"});var be=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)},we=[].slice,Ae={},xe=Function.bind||function(t){var e=_(this),r=we.call(arguments,1),n=function(){var i=r.concat(we.call(arguments));return this instanceof n?function(t,e,r){if(!(e in Ae)){for(var n=[],i=0;i<e;i++)n[i]="a["+i+"]";Ae[e]=Function("F,a","return new F("+n.join(",")+")")}return Ae[e](t,r)}(e,i.length,i):be(e,i,t)};return o(e.prototype)&&(n.prototype=e.prototype),n};T(T.P,"Function",{bind:xe});var Ee=U("hasInstance"),_e=Function.prototype;Ee in _e||p.f(_e,Ee,{value:function(t){if("function"!=typeof this||!o(t))return!1;if(!o(this.prototype))return t instanceof this;for(;t=$t(t);)if(this.prototype===t)return!0;return!1}});var Se=p.f,Oe=Function.prototype,Te=/^\s*function ([^ (]*)/;"name"in Oe||s&&Se(Oe,"name",{configurable:!0,get:function(){try{return(""+this).match(Te)[1]}catch(t){return""}}});var Pe=function(t,e,r){for(var n in e)E(t,n,e[n],r);return t},ke=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t},Re=r(function(t){var e={},r={},n=t.exports=function(t,n,i,o,u){var s,c,f,h,l=u?function(){return t}:gt(t),v=S(i,o,n?2:1),d=0;if("function"!=typeof l)throw TypeError(t+" is not iterable!");if(ht(l)){for(s=N(t.length);s>d;d++)if((h=n?v(a(c=t[d])[0],c[1]):v(t[d]))===e||h===r)return h}else for(f=l.call(t);!(c=f.next()).done;)if((h=ut(f,v,c.value,n))===e||h===r)return h};n.BREAK=e,n.RETURN=r}),Ce=r(function(t){var e=x("meta"),r=p.f,n=0,i=Object.isExtensible||function(){return!0},a=!u(function(){return i(Object.preventExtensions({}))}),s=function(t){r(t,e,{value:{i:"O"+ ++n,w:{}}})},c=t.exports={KEY:e,NEED:!1,fastKey:function(t,r){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!b(t,e)){if(!i(t))return"F";if(!r)return"E";s(t)}return t[e].i},getWeak:function(t,r){if(!b(t,e)){if(!i(t))return!0;if(!r)return!1;s(t)}return t[e].w},onFreeze:function(t){return a&&c.NEED&&i(t)&&!b(t,e)&&s(t),t}}}),Ie=(Ce.KEY,Ce.NEED,Ce.fastKey,Ce.getWeak,Ce.onFreeze,function(t,e){if(!o(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}),Le=p.f,je=Ce.fastKey,Fe=s?"_s":"size",Me=function(t,e){var r,n=je(e);if("F"!==n)return t._i[n];for(r=t._f;r;r=r.n)if(r.k==e)return r},Ne={getConstructor:function(t,e,r,n){var i=t(function(t,o){ke(t,i,e,"_i"),t._t=e,t._i=Dt(null),t._f=void 0,t._l=void 0,t[Fe]=0,null!=o&&Re(o,r,t[n],t)});return Pe(i.prototype,{clear:function(){for(var t=Ie(this,e),r=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];t._f=t._l=void 0,t[Fe]=0},delete:function(t){var r=Ie(this,e),n=Me(r,t);if(n){var i=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==n&&(r._f=i),r._l==n&&(r._l=o),r[Fe]--}return!!n},forEach:function(t){Ie(this,e);for(var r,n=S(t,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(t){return!!Me(Ie(this,e),t)}}),s&&Le(i.prototype,"size",{get:function(){return Ie(this,e)[Fe]}}),i},def:function(t,e,r){var n,i,o=Me(t,e);return o?o.v=r:(t._l=o={i:i=je(e,!0),k:e,v:r,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[Fe]++,"F"!==i&&(t._i[i]=o)),t},getEntry:Me,setStrong:function(t,e,r){Qt(t,e,function(t,r){this._t=Ie(t,e),this._k=r,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?Tt(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,Tt(1))},r?"entries":"values",!r,!0),ce(e)}},Ve={f:{}.propertyIsEnumerable},Be=Object.getOwnPropertyDescriptor,Ue={f:s?Be:function(t,e){if(t=At(t),e=v(e,!0),l)try{return Be(t,e)}catch(t){}if(b(t,e))return y(!Ve.f.call(t,e),t[e])}},De=function(t,e){if(a(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},Ge={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=S(Function.call,Ue.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return De(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:De},We=Ge.set,ze=function(t,e,r){var n,i=e.constructor;return i!==r&&"function"==typeof i&&(n=i.prototype)!==r.prototype&&o(n)&&We&&We(t,n),t},Ye=function(t,e,r,i,a,s){var c=n[t],f=c,h=a?"set":"add",l=f&&f.prototype,v={},d=function(t){var e=l[t];E(l,t,"delete"==t?function(t){return!(s&&!o(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(s&&!o(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return s&&!o(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,r){return e.call(this,0===t?0:t,r),this})};if("function"==typeof f&&(s||l.forEach&&!u(function(){(new f).entries().next()}))){var p=new f,y=p[h](s?{}:-0,1)!=p,g=u(function(){p.has(1)}),m=wt(function(t){new f(t)}),b=!s&&u(function(){for(var t=new f,e=5;e--;)t[h](e,e);return!t.has(-0)});m||((f=e(function(e,r){ke(e,f,t);var n=ze(new c,e,f);return null!=r&&Re(r,a,n[h],n),n})).prototype=l,l.constructor=f),(g||b)&&(d("delete"),d("has"),a&&d("get")),(b||y)&&d(h),s&&l.clear&&delete l.clear}else f=i.getConstructor(e,t,a,h),Pe(f.prototype,r),Ce.NEED=!0;return zt(f,t),v[t]=f,T(T.G+T.W+T.F*(f!=c),v),s||i.setStrong(f,t,a),f},Xe=(Ye("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=Ne.getEntry(Ie(this,"Map"),t);return e&&e.v},set:function(t,e){return Ne.def(Ie(this,"Map"),0===t?0:t,e)}},Ne,!0),Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}),He=Math.sqrt,Ke=Math.acosh;T(T.S+T.F*!(Ke&&710==Math.floor(Ke(Number.MAX_VALUE))&&Ke(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:Xe(t-1+He(t-1)*He(t+1))}});var $e=Math.asinh;T(T.S+T.F*!($e&&1/$e(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}});var qe=Math.atanh;T(T.S+T.F*!(qe&&1/qe(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}});var Ze=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1};T(T.S,"Math",{cbrt:function(t){return Ze(t=+t)*Math.pow(Math.abs(t),1/3)}}),T(T.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}});var Je=Math.exp;T(T.S,"Math",{cosh:function(t){return(Je(t=+t)+Je(-t))/2}});var Qe=Math.expm1,tr=!Qe||Qe(10)>22025.465794806718||Qe(10)<22025.465794806718||-2e-17!=Qe(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:Qe;T(T.S+T.F*(tr!=Math.expm1),"Math",{expm1:tr});var er=Math.pow,rr=er(2,-52),nr=er(2,-23),ir=er(2,127)*(2-nr),or=er(2,-126),ar=Math.fround||function(t){var e,r,n=Math.abs(t),i=Ze(t);return n<or?i*(n/or/nr+1/rr-1/rr)*or*nr:(r=(e=(1+nr/rr)*n)-(e-n))>ir||r!=r?i*(1/0):i*r};T(T.S,"Math",{fround:ar});var ur=Math.abs;T(T.S,"Math",{hypot:function(t,e){for(var r,n,i=0,o=0,a=arguments.length,u=0;o<a;)u<(r=ur(arguments[o++]))?(i=i*(n=u/r)*n+1,u=r):i+=r>0?(n=r/u)*n:r;return u===1/0?1/0:u*Math.sqrt(i)}});var sr=Math.imul;T(T.S+T.F*u(function(){return-5!=sr(4294967295,5)||2!=sr.length}),"Math",{imul:function(t,e){var r=+t,n=+e,i=65535&r,o=65535&n;return 0|i*o+((65535&r>>>16)*o+i*(65535&n>>>16)<<16>>>0)}}),T(T.S,"Math",{log1p:Xe}),T(T.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}}),T(T.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}}),T(T.S,"Math",{sign:Ze});var cr=Math.exp;T(T.S+T.F*u(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(tr(t)-tr(-t))/2:(cr(t-1)-cr(-t-1))*(Math.E/2)}});var fr=Math.exp;T(T.S,"Math",{tanh:function(t){var e=tr(t=+t),r=tr(-t);return e==1/0?1:r==1/0?-1:(e-r)/(fr(t)+fr(-t))}}),T(T.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}});var hr=Lt.concat("length","prototype"),lr={f:Object.getOwnPropertyNames||function(t){return It(t,hr)}},vr="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff",dr="["+vr+"]",pr=RegExp("^"+dr+dr+"*"),yr=RegExp(dr+dr+"*$"),gr=function(t,e,r){var n={},i=u(function(){return!!vr[t]()||"âÂ"!="âÂ"[t]()}),o=n[t]=i?e(mr):vr[t];r&&(n[r]=o),T(T.P+T.F*i,"String",n)},mr=gr.trim=function(t,e){return t=String(P(t)),1&e&&(t=t.replace(pr,"")),2&e&&(t=t.replace(yr,"")),t},br=gr,wr=lr.f,Ar=Ue.f,xr=p.f,Er=br.trim,_r=n.Number,Sr=_r,Or=_r.prototype,Tr="Number"==Y(Dt(Or)),Pr="trim"in String.prototype,kr=function(t){var e=v(t,!1);if("string"==typeof e&&e.length>2){var r,n,i,o=(e=Pr?e.trim():Er(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=e.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+e}for(var a,u=e.slice(2),s=0,c=u.length;s<c;s++)if((a=u.charCodeAt(s))<48||a>i)return NaN;return parseInt(u,n)}}return+e};if(!_r(" 0o1")||!_r("0b1")||_r("+0x1")){_r=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof _r&&(Tr?u(function(){Or.valueOf.call(r)}):"Number"!=Y(r))?ze(new Sr(kr(e)),r,_r):kr(e)};for(var Rr,Cr=s?wr(Sr):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Ir=0;Cr.length>Ir;Ir++)b(Sr,Rr=Cr[Ir])&&!b(_r,Rr)&&xr(_r,Rr,Ar(Sr,Rr));_r.prototype=Or,Or.constructor=_r,E(n,"Number",_r)}T(T.S,"Number",{EPSILON:Math.pow(2,-52)});var Lr=n.isFinite;T(T.S,"Number",{isFinite:function(t){return"number"==typeof t&&Lr(t)}});var jr=Math.floor,Fr=function(t){return!o(t)&&isFinite(t)&&jr(t)===t};T(T.S,"Number",{isInteger:Fr}),T(T.S,"Number",{isNaN:function(t){return t!=t}});var Mr=Math.abs;T(T.S,"Number",{isSafeInteger:function(t){return Fr(t)&&Mr(t)<=9007199254740991}}),T(T.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),T(T.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991});var Nr=n.parseFloat,Vr=br.trim,Br=1/Nr(vr+"-0")!=-1/0?function(t){var e=Vr(String(t),3),r=Nr(e);return 0===r&&"-"==e.charAt(0)?-0:r}:Nr;T(T.S+T.F*(Number.parseFloat!=Br),"Number",{parseFloat:Br});var Ur=n.parseInt,Dr=br.trim,Gr=/^[-+]?0[xX]/,Wr=8!==Ur(vr+"08")||22!==Ur(vr+"0x16")?function(t,e){var r=Dr(String(t),3);return Ur(r,e>>>0||(Gr.test(r)?16:10))}:Ur;T(T.S+T.F*(Number.parseInt!=Wr),"Number",{parseInt:Wr});var zr={f:Object.getOwnPropertySymbols},Yr=Object.assign,Xr=!Yr||u(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=Yr({},t)[r]||Object.keys(Yr({},e)).join("")!=n})?function(t,e){for(var r=k(t),n=arguments.length,i=1,o=zr.f,a=Ve.f;n>i;)for(var u,s=X(arguments[i++]),c=o?jt(s).concat(o(s)):jt(s),f=c.length,h=0;f>h;)a.call(s,u=c[h++])&&(r[u]=s[u]);return r}:Yr;T(T.S+T.F,"Object",{assign:Xr}),T(T.S,"Object",{create:Dt});var Hr=!u(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete n[t]});s&&T(T.P+Hr,"Object",{__defineGetter__:function(t,e){p.f(k(this),t,{get:_(e),enumerable:!0,configurable:!0})}}),s&&T(T.P+Hr,"Object",{__defineSetter__:function(t,e){p.f(k(this),t,{set:_(e),enumerable:!0,configurable:!0})}}),T(T.S+T.F*!s,"Object",{defineProperty:p.f}),T(T.S+T.F*!s,"Object",{defineProperties:Ft});var Kr=Ve.f,$r=function(t){return function(e){for(var r,n=At(e),i=jt(n),o=i.length,a=0,u=[];o>a;)Kr.call(n,r=i[a++])&&u.push(t?[r,n[r]]:n[r]);return u}},qr=$r(!0);T(T.S,"Object",{entries:function(t){return qr(t)}});var Zr=function(t,e){var r=(i.Object||{})[t]||Object[t],n={};n[t]=e(r),T(T.S+T.F*u(function(){r(1)}),"Object",n)},Jr=Ce.onFreeze;Zr("freeze",function(t){return function(e){return t&&o(e)?t(Jr(e)):e}});var Qr=Ue.f;Zr("getOwnPropertyDescriptor",function(){return function(t,e){return Qr(At(t),e)}});var tn=n.Reflect,en=tn&&tn.ownKeys||function(t){var e=lr.f(a(t)),r=zr.f;return r?e.concat(r(t)):e};T(T.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,r,n=At(t),i=Ue.f,o=en(n),a={},u=0;o.length>u;)void 0!==(r=i(n,e=o[u++]))&&lt(a,e,r);return a}});var rn=lr.f,nn={}.toString,on="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],an={f:function(t){return on&&"[object Window]"==nn.call(t)?function(t){try{return rn(t)}catch(t){return on.slice()}}(t):rn(At(t))}};Zr("getOwnPropertyNames",function(){return an.f}),Zr("getPrototypeOf",function(){return function(t){return $t(k(t))}});var un=Ue.f;s&&T(T.P+Hr,"Object",{__lookupGetter__:function(t){var e,r=k(this),n=v(t,!0);do{if(e=un(r,n))return e.get}while(r=$t(r))}});var sn=Ue.f;s&&T(T.P+Hr,"Object",{__lookupSetter__:function(t){var e,r=k(this),n=v(t,!0);do{if(e=sn(r,n))return e.set}while(r=$t(r))}});var cn=Ce.onFreeze;Zr("preventExtensions",function(t){return function(e){return t&&o(e)?t(cn(e)):e}});var fn=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};T(T.S,"Object",{is:fn}),Zr("isFrozen",function(t){return function(e){return!o(e)||!!t&&t(e)}}),Zr("isSealed",function(t){return function(e){return!o(e)||!!t&&t(e)}}),Zr("isExtensible",function(t){return function(e){return!!o(e)&&(!t||t(e))}}),Zr("keys",function(){return function(t){return jt(k(t))}});var hn=Ce.onFreeze;Zr("seal",function(t){return function(e){return t&&o(e)?t(hn(e)):e}}),T(T.S,"Object",{setPrototypeOf:Ge.set});var ln=$r(!1);T(T.S,"Object",{values:function(t){return ln(t)}});var vn,dn,pn,yn=U("species"),gn=function(t,e){var r,n=a(t).constructor;return void 0===n||null==(r=a(n)[yn])?e:_(r)},mn=n.process,bn=n.setImmediate,wn=n.clearImmediate,An=n.MessageChannel,xn=n.Dispatch,En=0,_n={},Sn=function(){var t=+this;if(_n.hasOwnProperty(t)){var e=_n[t];delete _n[t],e()}},On=function(t){Sn.call(t.data)};bn&&wn||(bn=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return _n[++En]=function(){be("function"==typeof t?t:Function(t),e)},vn(En),En},wn=function(t){delete _n[t]},"process"==Y(mn)?vn=function(t){mn.nextTick(S(Sn,t,1))}:xn&&xn.now?vn=function(t){xn.now(S(Sn,t,1))}:An?(pn=(dn=new An).port2,dn.port1.onmessage=On,vn=S(pn.postMessage,pn,1)):n.addEventListener&&"function"==typeof postMessage&&!n.importScripts?(vn=function(t){n.postMessage(t+"","*")},n.addEventListener("message",On,!1)):vn="onreadystatechange"in h("script")?function(t){Nt.appendChild(h("script")).onreadystatechange=function(){Nt.removeChild(this),Sn.call(t)}}:function(t){setTimeout(S(Sn,t,1),0)});var Tn={set:bn,clear:wn},Pn=Tn.set,kn=n.MutationObserver||n.WebKitMutationObserver,Rn=n.process,Cn=n.Promise,In="process"==Y(Rn);function Ln(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n}),this.resolve=_(e),this.reject=_(r)}var jn,Fn,Mn,Nn,Vn={f:function(t){return new Ln(t)}},Bn=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Un=n.navigator,Dn=Un&&Un.userAgent||"",Gn=function(t,e){if(a(t),o(e)&&e.constructor===t)return e;var r=Vn.f(t);return(0,r.resolve)(e),r.promise},Wn=Tn.set,zn=function(){var t,e,r,i=function(){var n,i;for(In&&(n=Rn.domain)&&n.exit();t;){i=t.fn,t=t.next;try{i()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(In)r=function(){Rn.nextTick(i)};else if(!kn||n.navigator&&n.navigator.standalone)if(Cn&&Cn.resolve){var o=Cn.resolve(void 0);r=function(){o.then(i)}}else r=function(){Pn.call(n,i)};else{var a=!0,u=document.createTextNode("");new kn(i).observe(u,{characterData:!0}),r=function(){u.data=a=!a}}return function(n){var i={fn:n,next:void 0};e&&(e.next=i),t||(t=i,r()),e=i}}(),Yn=n.TypeError,Xn=n.process,Hn=Xn&&Xn.versions,Kn=Hn&&Hn.v8||"",$n=n.Promise,qn="process"==pt(Xn),Zn=function(){},Jn=Fn=Vn.f,Qn=!!function(){try{var t=$n.resolve(1),e=(t.constructor={})[U("species")]=function(t){t(Zn,Zn)};return(qn||"function"==typeof PromiseRejectionEvent)&&t.then(Zn)instanceof e&&0!==Kn.indexOf("6.6")&&-1===Dn.indexOf("Chrome/66")}catch(t){}}(),ti=function(t){var e;return!(!o(t)||"function"!=typeof(e=t.then))&&e},ei=function(t,e){if(!t._n){t._n=!0;var r=t._c;zn(function(){for(var n=t._v,i=1==t._s,o=0,a=function(e){var r,o,a,u=i?e.ok:e.fail,s=e.resolve,c=e.reject,f=e.domain;try{u?(i||(2==t._h&&ii(t),t._h=1),!0===u?r=n:(f&&f.enter(),r=u(n),f&&(f.exit(),a=!0)),r===e.promise?c(Yn("Promise-chain cycle")):(o=ti(r))?o.call(r,s,c):s(r)):c(n)}catch(t){f&&!a&&f.exit(),c(t)}};r.length>o;)a(r[o++]);t._c=[],t._n=!1,e&&!t._h&&ri(t)})}},ri=function(t){Wn.call(n,function(){var e,r,i,o=t._v,a=ni(t);if(a&&(e=Bn(function(){qn?Xn.emit("unhandledRejection",o,t):(r=n.onunhandledrejection)?r({promise:t,reason:o}):(i=n.console)&&i.error&&i.error("Unhandled promise rejection",o)}),t._h=qn||ni(t)?2:1),t._a=void 0,a&&e.e)throw e.v})},ni=function(t){return 1!==t._h&&0===(t._a||t._c).length},ii=function(t){Wn.call(n,function(){var e;qn?Xn.emit("rejectionHandled",t):(e=n.onrejectionhandled)&&e({promise:t,reason:t._v})})},oi=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),ei(e,!0))},ai=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw Yn("Promise can't be resolved itself");(e=ti(t))?zn(function(){var n={_w:r,_d:!1};try{e.call(t,S(ai,n,1),S(oi,n,1))}catch(t){oi.call(n,t)}}):(r._v=t,r._s=1,ei(r,!1))}catch(t){oi.call({_w:r,_d:!1},t)}}};Qn||($n=function(t){ke(this,$n,"Promise","_h"),_(t),jn.call(this);try{t(S(ai,this,1),S(oi,this,1))}catch(t){oi.call(this,t)}},(jn=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=Pe($n.prototype,{then:function(t,e){var r=Jn(gn(this,$n));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=qn?Xn.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&ei(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Mn=function(){var t=new jn;this.promise=t,this.resolve=S(ai,t,1),this.reject=S(oi,t,1)},Vn.f=Jn=function(t){return t===$n||t===Nn?new Mn(t):Fn(t)}),T(T.G+T.W+T.F*!Qn,{Promise:$n}),zt($n,"Promise"),ce("Promise"),Nn=i.Promise,T(T.S+T.F*!Qn,"Promise",{reject:function(t){var e=Jn(this);return(0,e.reject)(t),e.promise}}),T(T.S+T.F*!Qn,"Promise",{resolve:function(t){return Gn(this,t)}}),T(T.S+T.F*!(Qn&&wt(function(t){$n.all(t).catch(Zn)})),"Promise",{all:function(t){var e=this,r=Jn(e),n=r.resolve,i=r.reject,o=Bn(function(){var r=[],o=0,a=1;Re(t,!1,function(t){var u=o++,s=!1;r.push(void 0),a++,e.resolve(t).then(function(t){s||(s=!0,r[u]=t,--a||n(r))},i)}),--a||n(r)});return o.e&&i(o.v),r.promise},race:function(t){var e=this,r=Jn(e),n=r.reject,i=Bn(function(){Re(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}}),T(T.P+T.R,"Promise",{finally:function(t){var e=gn(this,i.Promise||n.Promise),r="function"==typeof t;return this.then(r?function(r){return Gn(e,t()).then(function(){return r})}:t,r?function(r){return Gn(e,t()).then(function(){throw r})}:t)}});var ui=(n.Reflect||{}).apply,si=Function.apply;T(T.S+T.F*!u(function(){ui(function(){})}),"Reflect",{apply:function(t,e,r){var n=_(t),i=a(r);return ui?ui(n,e,i):si.call(n,e,i)}});var ci=(n.Reflect||{}).construct,fi=u(function(){function t(){}return!(ci(function(){},[],t)instanceof t)}),hi=!u(function(){ci(function(){})});T(T.S+T.F*(fi||hi),"Reflect",{construct:function(t,e){_(t),a(e);var r=arguments.length<3?t:_(arguments[2]);if(hi&&!fi)return ci(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(xe.apply(t,n))}var i=r.prototype,u=Dt(o(i)?i:Object.prototype),s=Function.apply.call(t,u,e);return o(s)?s:u}}),T(T.S+T.F*u(function(){Reflect.defineProperty(p.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,r){a(t),e=v(e,!0),a(r);try{return p.f(t,e,r),!0}catch(t){return!1}}});var li=Ue.f;T(T.S,"Reflect",{deleteProperty:function(t,e){var r=li(a(t),e);return!(r&&!r.configurable)&&delete t[e]}}),T(T.S,"Reflect",{get:function t(e,r){var n,i,u=arguments.length<3?e:arguments[2];return a(e)===u?e[r]:(n=Ue.f(e,r))?b(n,"value")?n.value:void 0!==n.get?n.get.call(u):void 0:o(i=$t(e))?t(i,r,u):void 0}}),T(T.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return Ue.f(a(t),e)}}),T(T.S,"Reflect",{getPrototypeOf:function(t){return $t(a(t))}}),T(T.S,"Reflect",{has:function(t,e){return e in t}});var vi=Object.isExtensible;T(T.S,"Reflect",{isExtensible:function(t){return a(t),!vi||vi(t)}}),T(T.S,"Reflect",{ownKeys:en});var di=Object.preventExtensions;T(T.S,"Reflect",{preventExtensions:function(t){a(t);try{return di&&di(t),!0}catch(t){return!1}}}),T(T.S,"Reflect",{set:function t(e,r,n){var i,u,s=arguments.length<4?e:arguments[3],c=Ue.f(a(e),r);if(!c){if(o(u=$t(e)))return t(u,r,n,s);c=y(0)}if(b(c,"value")){if(!1===c.writable||!o(s))return!1;if(i=Ue.f(s,r)){if(i.get||i.set||!1===i.writable)return!1;i.value=n,p.f(s,r,i)}else p.f(s,r,y(0,n));return!0}return void 0!==c.set&&(c.set.call(s,n),!0)}}),Ge&&T(T.S,"Reflect",{setPrototypeOf:function(t,e){Ge.check(t,e);try{return Ge.set(t,e),!0}catch(t){return!1}}});var pi=U("match"),yi=function(t){var e;return o(t)&&(void 0!==(e=t[pi])?!!e:"RegExp"==Y(t))},gi=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},mi=p.f,bi=lr.f,wi=n.RegExp,Ai=wi,xi=wi.prototype,Ei=/a/g,_i=/a/g,Si=new wi(Ei)!==Ei;if(s&&(!Si||u(function(){return _i[U("match")]=!1,wi(Ei)!=Ei||wi(_i)==_i||"/a/i"!=wi(Ei,"i")}))){wi=function(t,e){var r=this instanceof wi,n=yi(t),i=void 0===e;return!r&&n&&t.constructor===wi&&i?t:ze(Si?new Ai(n&&!i?t.source:t,e):Ai((n=t instanceof wi)?t.source:t,n&&i?gi.call(t):e),r?this:xi,wi)};for(var Oi=function(t){t in wi||mi(wi,t,{configurable:!0,get:function(){return Ai[t]},set:function(e){Ai[t]=e}})},Ti=bi(Ai),Pi=0;Ti.length>Pi;)Oi(Ti[Pi++]);xi.constructor=wi,wi.prototype=xi,E(n,"RegExp",wi)}ce("RegExp"),s&&"g"!=/./g.flags&&p.f(RegExp.prototype,"flags",{configurable:!0,get:gi});var ki=function(t,e,r){var n=U(t),i=r(P,n,""[t]),o=i[0],a=i[1];u(function(){var e={};return e[n]=function(){return 7},7!=""[t](e)})&&(E(String.prototype,t,o),g(RegExp.prototype,n,2==e?function(t,e){return a.call(t,this,e)}:function(t){return a.call(t,this)}))};ki("match",1,function(t,e,r){return[function(r){var n=t(this),i=null==r?void 0:r[e];return void 0!==i?i.call(r,n):new RegExp(r)[e](String(n))},r]}),ki("replace",2,function(t,e,r){return[function(n,i){var o=t(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},r]}),ki("split",2,function(t,e,r){var n=yi,i=r,o=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var a=void 0===/()??/.exec("")[1];r=function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!n(t))return i.call(r,t,e);var u,s,c,f,h,l=[],v=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,p=void 0===e?4294967295:e>>>0,y=new RegExp(t.source,v+"g");for(a||(u=new RegExp("^"+y.source+"$(?!\\s)",v));(s=y.exec(r))&&!((c=s.index+s[0].length)>d&&(l.push(r.slice(d,s.index)),!a&&s.length>1&&s[0].replace(u,function(){for(h=1;h<arguments.length-2;h++)void 0===arguments[h]&&(s[h]=void 0)}),s.length>1&&s.index<r.length&&o.apply(l,s.slice(1)),f=s[0].length,d=c,l.length>=p));)y.lastIndex===s.index&&y.lastIndex++;return d===r.length?!f&&y.test("")||l.push(""):l.push(r.slice(d)),l.length>p?l.slice(0,p):l}}else"0".split(void 0,0).length&&(r=function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)});return[function(n,i){var o=t(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},r]}),ki("search",1,function(t,e,r){return[function(r){var n=t(this),i=null==r?void 0:r[e];return void 0!==i?i.call(r,n):new RegExp(r)[e](String(n))},r]});var Ri=/./.toString,Ci=function(t){E(RegExp.prototype,"toString",t,!0)};u(function(){return"/a/b"!=Ri.call({source:"a",flags:"b"})})?Ci(function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?gi.call(t):void 0)}):"toString"!=Ri.name&&Ci(function(){return Ri.call(this)});Ye("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return Ne.def(Ie(this,"Set"),t=0===t?0:t,t)}},Ne);var Ii={f:U},Li=p.f,ji=function(t){var e=i.Symbol||(i.Symbol=n.Symbol||{});"_"==t.charAt(0)||t in e||Li(e,t,{value:Ii.f(t)})},Fi=Ce.KEY,Mi=Ue.f,Ni=p.f,Vi=an.f,Bi=n.Symbol,Ui=n.JSON,Di=Ui&&Ui.stringify,Gi=U("_hidden"),Wi=U("toPrimitive"),zi={}.propertyIsEnumerable,Yi=B("symbol-registry"),Xi=B("symbols"),Hi=B("op-symbols"),Ki=Object.prototype,$i="function"==typeof Bi,qi=n.QObject,Zi=!qi||!qi.prototype||!qi.prototype.findChild,Ji=s&&u(function(){return 7!=Dt(Ni({},"a",{get:function(){return Ni(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=Mi(Ki,e);n&&delete Ki[e],Ni(t,e,r),n&&t!==Ki&&Ni(Ki,e,n)}:Ni,Qi=function(t){var e=Xi[t]=Dt(Bi.prototype);return e._k=t,e},to=$i&&"symbol"==typeof Bi.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Bi},eo=function(t,e,r){return t===Ki&&eo(Hi,e,r),a(t),e=v(e,!0),a(r),b(Xi,e)?(r.enumerable?(b(t,Gi)&&t[Gi][e]&&(t[Gi][e]=!1),r=Dt(r,{enumerable:y(0,!1)})):(b(t,Gi)||Ni(t,Gi,y(1,{})),t[Gi][e]=!0),Ji(t,e,r)):Ni(t,e,r)},ro=function(t,e){a(t);for(var r,n=function(t){var e=jt(t),r=zr.f;if(r)for(var n,i=r(t),o=Ve.f,a=0;i.length>a;)o.call(t,n=i[a++])&&e.push(n);return e}(e=At(e)),i=0,o=n.length;o>i;)eo(t,r=n[i++],e[r]);return t},no=function(t){var e=zi.call(this,t=v(t,!0));return!(this===Ki&&b(Xi,t)&&!b(Hi,t))&&(!(e||!b(this,t)||!b(Xi,t)||b(this,Gi)&&this[Gi][t])||e)},io=function(t,e){if(t=At(t),e=v(e,!0),t!==Ki||!b(Xi,e)||b(Hi,e)){var r=Mi(t,e);return!r||!b(Xi,e)||b(t,Gi)&&t[Gi][e]||(r.enumerable=!0),r}},oo=function(t){for(var e,r=Vi(At(t)),n=[],i=0;r.length>i;)b(Xi,e=r[i++])||e==Gi||e==Fi||n.push(e);return n},ao=function(t){for(var e,r=t===Ki,n=Vi(r?Hi:At(t)),i=[],o=0;n.length>o;)!b(Xi,e=n[o++])||r&&!b(Ki,e)||i.push(Xi[e]);return i};$i||(E((Bi=function(){if(this instanceof Bi)throw TypeError("Symbol is not a constructor!");var t=x(arguments.length>0?arguments[0]:void 0),e=function(r){this===Ki&&e.call(Hi,r),b(this,Gi)&&b(this[Gi],t)&&(this[Gi][t]=!1),Ji(this,t,y(1,r))};return s&&Zi&&Ji(Ki,t,{configurable:!0,set:e}),Qi(t)}).prototype,"toString",function(){return this._k}),Ue.f=io,p.f=eo,lr.f=an.f=oo,Ve.f=no,zr.f=ao,s&&E(Ki,"propertyIsEnumerable",no,!0),Ii.f=function(t){return Qi(U(t))}),T(T.G+T.W+T.F*!$i,{Symbol:Bi});for(var uo="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),so=0;uo.length>so;)U(uo[so++]);for(var co=jt(U.store),fo=0;co.length>fo;)ji(co[fo++]);T(T.S+T.F*!$i,"Symbol",{for:function(t){return b(Yi,t+="")?Yi[t]:Yi[t]=Bi(t)},keyFor:function(t){if(!to(t))throw TypeError(t+" is not a symbol!");for(var e in Yi)if(Yi[e]===t)return e},useSetter:function(){Zi=!0},useSimple:function(){Zi=!1}}),T(T.S+T.F*!$i,"Object",{create:function(t,e){return void 0===e?Dt(t):ro(Dt(t),e)},defineProperty:eo,defineProperties:ro,getOwnPropertyDescriptor:io,getOwnPropertyNames:oo,getOwnPropertySymbols:ao}),Ui&&T(T.S+T.F*(!$i||u(function(){var t=Bi();return"[null]"!=Di([t])||"{}"!=Di({a:t})||"{}"!=Di(Object(t))})),"JSON",{stringify:function(t){for(var e,r,n=[t],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=e=n[1],(o(e)||void 0!==t)&&!to(t))return H(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!to(e))return e}),n[1]=e,Di.apply(Ui,n)}}),Bi.prototype[Wi]||g(Bi.prototype,Wi,Bi.prototype.valueOf),zt(Bi,"Symbol"),zt(Math,"Math",!0),zt(n.JSON,"JSON",!0),ji("asyncIterator");var ho=/"/g,lo=function(t,e,r,n){var i=String(P(t)),o="<"+e;return""!==r&&(o+=" "+r+'="'+String(n).replace(ho,"&quot;")+'"'),o+">"+i+"</"+e+">"},vo=function(t,e){var r={};r[t]=e(lo),T(T.P+T.F*u(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",r)};vo("anchor",function(t){return function(e){return t(this,"a","name",e)}}),vo("big",function(t){return function(){return t(this,"big","","")}}),vo("blink",function(t){return function(){return t(this,"blink","","")}}),vo("bold",function(t){return function(){return t(this,"b","","")}});var po=function(t){return function(e,r){var n,i,o=String(P(e)),a=I(r),u=o.length;return a<0||a>=u?t?"":void 0:(n=o.charCodeAt(a))<55296||n>56319||a+1===u||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):n:t?o.slice(a,a+2):i-56320+(n-55296<<10)+65536}},yo=po(!1);T(T.P,"String",{codePointAt:function(t){return yo(this,t)}});var go=function(t,e,r){if(yi(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(P(t))},mo=U("match"),bo=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[mo]=!1,!"/./"[t](e)}catch(t){}}return!0},wo="".endsWith;T(T.P+T.F*bo("endsWith"),"String",{endsWith:function(t){var e=go(this,t,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=N(e.length),i=void 0===r?n:Math.min(N(r),n),o=String(t);return wo?wo.call(e,o,i):e.slice(i-o.length,i)===o}}),vo("fixed",function(t){return function(){return t(this,"tt","","")}}),vo("fontcolor",function(t){return function(e){return t(this,"font","color",e)}}),vo("fontsize",function(t){return function(e){return t(this,"font","size",e)}});var Ao=String.fromCharCode,xo=String.fromCodePoint;T(T.S+T.F*(!!xo&&1!=xo.length),"String",{fromCodePoint:function(t){for(var e,r=[],n=arguments.length,i=0;n>i;){if(e=+arguments[i++],F(e,1114111)!==e)throw RangeError(e+" is not a valid code point");r.push(e<65536?Ao(e):Ao(55296+((e-=65536)>>10),e%1024+56320))}return r.join("")}});T(T.P+T.F*bo("includes"),"String",{includes:function(t){return!!~go(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}}),vo("italics",function(t){return function(){return t(this,"i","","")}});var Eo=po(!0);Qt(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=Eo(e,r),this._i+=t.length,{value:t,done:!1})}),vo("link",function(t){return function(e){return t(this,"a","href",e)}});var _o=function(t){var e=String(P(this)),r="",n=I(t);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(r+=e);return r},So=function(t,e,r,n){var i=String(P(t)),o=i.length,a=void 0===r?" ":String(r),u=N(e);if(u<=o||""==a)return i;var s=u-o,c=_o.call(a,Math.ceil(s/a.length));return c.length>s&&(c=c.slice(0,s)),n?c+i:i+c};T(T.P+T.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(Dn),"String",{padStart:function(t){return So(this,t,arguments.length>1?arguments[1]:void 0,!0)}}),T(T.P+T.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(Dn),"String",{padEnd:function(t){return So(this,t,arguments.length>1?arguments[1]:void 0,!1)}}),T(T.S,"String",{raw:function(t){for(var e=At(t.raw),r=N(e.length),n=arguments.length,i=[],o=0;r>o;)i.push(String(e[o++])),o<n&&i.push(String(arguments[o]));return i.join("")}}),T(T.P,"String",{repeat:_o}),vo("small",function(t){return function(){return t(this,"small","","")}});var Oo="".startsWith;T(T.P+T.F*bo("startsWith"),"String",{startsWith:function(t){var e=go(this,t,"startsWith"),r=N(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return Oo?Oo.call(e,n,r):e.slice(r,r+n.length)===n}}),vo("strike",function(t){return function(){return t(this,"strike","","")}}),vo("sub",function(t){return function(){return t(this,"sub","","")}}),vo("sup",function(t){return function(){return t(this,"sup","","")}}),br("trim",function(t){return function(){return t(this,3)}});for(var To,Po=x("typed_array"),ko=x("view"),Ro=!(!n.ArrayBuffer||!n.DataView),Co=Ro,Io=0,Lo="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");Io<9;)(To=n[Lo[Io++]])?(g(To.prototype,Po,!0),g(To.prototype,ko,!0)):Co=!1;var jo={ABV:Ro,CONSTR:Co,TYPED:Po,VIEW:ko},Fo=function(t){if(void 0===t)return 0;var e=I(t),r=N(e);if(e!==r)throw RangeError("Wrong length!");return r},Mo=r(function(t,e){var r=lr.f,i=p.f,o="prototype",a="Wrong index!",c=n.ArrayBuffer,f=n.DataView,h=n.Math,l=n.RangeError,v=n.Infinity,d=c,y=h.abs,m=h.pow,b=h.floor,w=h.log,A=h.LN2,x=s?"_b":"buffer",E=s?"_l":"byteLength",_=s?"_o":"byteOffset";function S(t,e,r){var n,i,o,a=new Array(r),u=8*r-e-1,s=(1<<u)-1,c=s>>1,f=23===e?m(2,-24)-m(2,-77):0,h=0,l=t<0||0===t&&1/t<0?1:0;for((t=y(t))!=t||t===v?(i=t!=t?1:0,n=s):(n=b(w(t)/A),t*(o=m(2,-n))<1&&(n--,o*=2),(t+=n+c>=1?f/o:f*m(2,1-c))*o>=2&&(n++,o/=2),n+c>=s?(i=0,n=s):n+c>=1?(i=(t*o-1)*m(2,e),n+=c):(i=t*m(2,c-1)*m(2,e),n=0));e>=8;a[h++]=255&i,i/=256,e-=8);for(n=n<<e|i,u+=e;u>0;a[h++]=255&n,n/=256,u-=8);return a[--h]|=128*l,a}function O(t,e,r){var n,i=8*r-e-1,o=(1<<i)-1,a=o>>1,u=i-7,s=r-1,c=t[s--],f=127&c;for(c>>=7;u>0;f=256*f+t[s],s--,u-=8);for(n=f&(1<<-u)-1,f>>=-u,u+=e;u>0;n=256*n+t[s],s--,u-=8);if(0===f)f=1-a;else{if(f===o)return n?NaN:c?-v:v;n+=m(2,e),f-=a}return(c?-1:1)*n*m(2,f-e)}function T(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function P(t){return[255&t]}function k(t){return[255&t,t>>8&255]}function R(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function C(t){return S(t,52,8)}function L(t){return S(t,23,4)}function j(t,e,r){i(t[o],e,{get:function(){return this[r]}})}function F(t,e,r,n){var i=Fo(+r);if(i+e>t[E])throw l(a);var o=t[x]._b,u=i+t[_],s=o.slice(u,u+e);return n?s:s.reverse()}function M(t,e,r,n,i,o){var u=Fo(+r);if(u+e>t[E])throw l(a);for(var s=t[x]._b,c=u+t[_],f=n(+i),h=0;h<e;h++)s[c+h]=f[o?h:e-h-1]}if(jo.ABV){if(!u(function(){c(1)})||!u(function(){new c(-1)})||u(function(){return new c,new c(1.5),new c(NaN),"ArrayBuffer"!=c.name})){for(var V,B=(c=function(t){return ke(this,c),new d(Fo(t))})[o]=d[o],U=r(d),D=0;U.length>D;)(V=U[D++])in c||g(c,V,d[V]);B.constructor=c}var G=new f(new c(2)),W=f[o].setInt8;G.setInt8(0,2147483648),G.setInt8(1,2147483649),!G.getInt8(0)&&G.getInt8(1)||Pe(f[o],{setInt8:function(t,e){W.call(this,t,e<<24>>24)},setUint8:function(t,e){W.call(this,t,e<<24>>24)}},!0)}else c=function(t){ke(this,c,"ArrayBuffer");var e=Fo(t);this._b=Q.call(new Array(e),0),this[E]=e},f=function(t,e,r){ke(this,f,"DataView"),ke(t,c,"DataView");var n=t[E],i=I(e);if(i<0||i>n)throw l("Wrong offset!");if(i+(r=void 0===r?n-i:N(r))>n)throw l("Wrong length!");this[x]=t,this[_]=i,this[E]=r},s&&(j(c,"byteLength","_l"),j(f,"buffer","_b"),j(f,"byteLength","_l"),j(f,"byteOffset","_o")),Pe(f[o],{getInt8:function(t){return F(this,1,t)[0]<<24>>24},getUint8:function(t){return F(this,1,t)[0]},getInt16:function(t){var e=F(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=F(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return T(F(this,4,t,arguments[1]))},getUint32:function(t){return T(F(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return O(F(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return O(F(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){M(this,1,t,P,e)},setUint8:function(t,e){M(this,1,t,P,e)},setInt16:function(t,e){M(this,2,t,k,e,arguments[2])},setUint16:function(t,e){M(this,2,t,k,e,arguments[2])},setInt32:function(t,e){M(this,4,t,R,e,arguments[2])},setUint32:function(t,e){M(this,4,t,R,e,arguments[2])},setFloat32:function(t,e){M(this,4,t,L,e,arguments[2])},setFloat64:function(t,e){M(this,8,t,C,e,arguments[2])}});zt(c,"ArrayBuffer"),zt(f,"DataView"),g(f[o],jo.VIEW,!0),e.ArrayBuffer=c,e.DataView=f}),No=n.ArrayBuffer,Vo=Mo.ArrayBuffer,Bo=Mo.DataView,Uo=jo.ABV&&No.isView,Do=Vo.prototype.slice,Go=jo.VIEW;T(T.G+T.W+T.F*(No!==Vo),{ArrayBuffer:Vo}),T(T.S+T.F*!jo.CONSTR,"ArrayBuffer",{isView:function(t){return Uo&&Uo(t)||o(t)&&Go in t}}),T(T.P+T.U+T.F*u(function(){return!new Vo(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==Do&&void 0===e)return Do.call(a(this),t);for(var r=a(this).byteLength,n=F(t,r),i=F(void 0===e?r:e,r),o=new(gn(this,Vo))(N(i-n)),u=new Bo(this),s=new Bo(o),c=0;n<i;)s.setUint8(c++,u.getUint8(n++));return o}}),ce("ArrayBuffer"),T(T.G+T.W+T.F*!jo.ABV,{DataView:Mo.DataView});var Wo=r(function(t){if(s){var e=n,r=u,i=T,a=jo,c=Mo,f=S,h=ke,l=y,d=g,m=Pe,w=I,A=N,E=Fo,_=F,O=v,P=b,R=pt,C=o,L=k,j=ht,M=Dt,B=$t,D=lr.f,G=gt,W=x,z=U,Y=q,X=xt,H=gn,K=te,$=st,Z=wt,J=ce,tt=Q,et=V,rt=p,nt=Ue,it=rt.f,ot=nt.f,at=e.RangeError,ut=e.TypeError,ct=e.Uint8Array,ft=Array.prototype,lt=c.ArrayBuffer,vt=c.DataView,dt=Y(0),yt=Y(2),mt=Y(3),bt=Y(4),At=Y(5),Et=Y(6),_t=X(!0),St=X(!1),Ot=K.values,Tt=K.keys,Pt=K.entries,kt=ft.lastIndexOf,Rt=ft.reduce,Ct=ft.reduceRight,It=ft.join,Lt=ft.sort,jt=ft.slice,Ft=ft.toString,Mt=ft.toLocaleString,Nt=z("iterator"),Vt=z("toStringTag"),Bt=W("typed_constructor"),Ut=W("def_constructor"),Gt=a.CONSTR,Wt=a.TYPED,zt=a.VIEW,Yt=Y(1,function(t,e){return Zt(H(t,t[Ut]),e)}),Xt=r(function(){return 1===new ct(new Uint16Array([1]).buffer)[0]}),Ht=!!ct&&!!ct.prototype.set&&r(function(){new ct(1).set({})}),Kt=function(t,e){var r=w(t);if(r<0||r%e)throw at("Wrong offset!");return r},qt=function(t){if(C(t)&&Wt in t)return t;throw ut(t+" is not a typed array!")},Zt=function(t,e){if(!(C(t)&&Bt in t))throw ut("It is not a typed array constructor!");return new t(e)},Jt=function(t,e){return Qt(H(t,t[Ut]),e)},Qt=function(t,e){for(var r=0,n=e.length,i=Zt(t,n);n>r;)i[r]=e[r++];return i},ee=function(t,e,r){it(t,e,{get:function(){return this._d[r]}})},re=function(t){var e,r,n,i,o,a,u=L(t),s=arguments.length,c=s>1?arguments[1]:void 0,h=void 0!==c,l=G(u);if(null!=l&&!j(l)){for(a=l.call(u),n=[],e=0;!(o=a.next()).done;e++)n.push(o.value);u=n}for(h&&s>2&&(c=f(c,arguments[2],2)),e=0,r=A(u.length),i=Zt(this,r);r>e;e++)i[e]=h?c(u[e],e):u[e];return i},ne=function(){for(var t=0,e=arguments.length,r=Zt(this,e);e>t;)r[t]=arguments[t++];return r},ie=!!ct&&r(function(){Mt.call(new ct(1))}),oe=function(){return Mt.apply(ie?jt.call(qt(this)):qt(this),arguments)},ae={copyWithin:function(t,e){return et.call(qt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return bt(qt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return tt.apply(qt(this),arguments)},filter:function(t){return Jt(this,yt(qt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return At(qt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return Et(qt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){dt(qt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return St(qt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return _t(qt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return It.apply(qt(this),arguments)},lastIndexOf:function(t){return kt.apply(qt(this),arguments)},map:function(t){return Yt(qt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return Rt.apply(qt(this),arguments)},reduceRight:function(t){return Ct.apply(qt(this),arguments)},reverse:function(){for(var t,e=qt(this).length,r=Math.floor(e/2),n=0;n<r;)t=this[n],this[n++]=this[--e],this[e]=t;return this},some:function(t){return mt(qt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return Lt.call(qt(this),t)},subarray:function(t,e){var r=qt(this),n=r.length,i=_(t,n);return new(H(r,r[Ut]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,A((void 0===e?n:_(e,n))-i))}},ue=function(t,e){return Jt(this,jt.call(qt(this),t,e))},se=function(t){qt(this);var e=Kt(arguments[1],1),r=this.length,n=L(t),i=A(n.length),o=0;if(i+e>r)throw at("Wrong length!");for(;o<i;)this[e+o]=n[o++]},fe={entries:function(){return Pt.call(qt(this))},keys:function(){return Tt.call(qt(this))},values:function(){return Ot.call(qt(this))}},he=function(t,e){return C(t)&&t[Wt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},le=function(t,e){return he(t,e=O(e,!0))?l(2,t[e]):ot(t,e)},ve=function(t,e,r){return!(he(t,e=O(e,!0))&&C(r)&&P(r,"value"))||P(r,"get")||P(r,"set")||r.configurable||P(r,"writable")&&!r.writable||P(r,"enumerable")&&!r.enumerable?it(t,e,r):(t[e]=r.value,t)};Gt||(nt.f=le,rt.f=ve),i(i.S+i.F*!Gt,"Object",{getOwnPropertyDescriptor:le,defineProperty:ve}),r(function(){Ft.call({})})&&(Ft=Mt=function(){return It.call(this)});var de=m({},ae);m(de,fe),d(de,Nt,fe.values),m(de,{slice:ue,set:se,constructor:function(){},toString:Ft,toLocaleString:oe}),ee(de,"buffer","b"),ee(de,"byteOffset","o"),ee(de,"byteLength","l"),ee(de,"length","e"),it(de,Vt,{get:function(){return this[Wt]}}),t.exports=function(t,n,o,u){var s=t+((u=!!u)?"Clamped":"")+"Array",c="get"+t,f="set"+t,l=e[s],v=l||{},p=l&&B(l),y=!l||!a.ABV,g={},m=l&&l.prototype,b=function(t,e){it(t,e,{get:function(){return function(t,e){var r=t._d;return r.v[c](e*n+r.o,Xt)}(this,e)},set:function(t){return function(t,e,r){var i=t._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[f](e*n+i.o,r,Xt)}(this,e,t)},enumerable:!0})};y?(l=o(function(t,e,r,i){h(t,l,s,"_d");var o,a,u,c,f=0,v=0;if(C(e)){if(!(e instanceof lt||"ArrayBuffer"==(c=R(e))||"SharedArrayBuffer"==c))return Wt in e?Qt(l,e):re.call(l,e);o=e,v=Kt(r,n);var p=e.byteLength;if(void 0===i){if(p%n)throw at("Wrong length!");if((a=p-v)<0)throw at("Wrong length!")}else if((a=A(i)*n)+v>p)throw at("Wrong length!");u=a/n}else u=E(e),o=new lt(a=u*n);for(d(t,"_d",{b:o,o:v,l:a,e:u,v:new vt(o)});f<u;)b(t,f++)}),m=l.prototype=M(de),d(m,"constructor",l)):r(function(){l(1)})&&r(function(){new l(-1)})&&Z(function(t){new l,new l(null),new l(1.5),new l(t)},!0)||(l=o(function(t,e,r,i){var o;return h(t,l,s),C(e)?e instanceof lt||"ArrayBuffer"==(o=R(e))||"SharedArrayBuffer"==o?void 0!==i?new v(e,Kt(r,n),i):void 0!==r?new v(e,Kt(r,n)):new v(e):Wt in e?Qt(l,e):re.call(l,e):new v(E(e))}),dt(p!==Function.prototype?D(v).concat(D(p)):D(v),function(t){t in l||d(l,t,v[t])}),l.prototype=m,m.constructor=l);var w=m[Nt],x=!!w&&("values"==w.name||null==w.name),_=fe.values;d(l,Bt,!0),d(m,Wt,s),d(m,zt,!0),d(m,Ut,l),(u?new l(1)[Vt]==s:Vt in m)||it(m,Vt,{get:function(){return s}}),g[s]=l,i(i.G+i.W+i.F*(l!=v),g),i(i.S,s,{BYTES_PER_ELEMENT:n}),i(i.S+i.F*r(function(){v.of.call(l,1)}),s,{from:re,of:ne}),"BYTES_PER_ELEMENT"in m||d(m,"BYTES_PER_ELEMENT",n),i(i.P,s,ae),J(s),i(i.P+i.F*Ht,s,{set:se}),i(i.P+i.F*!x,s,fe),m.toString!=Ft&&(m.toString=Ft),i(i.P+i.F*r(function(){new l(1).slice()}),s,{slice:ue}),i(i.P+i.F*(r(function(){return[1,2].toLocaleString()!=new l([1,2]).toLocaleString()})||!r(function(){m.toLocaleString.call([1,2])})),s,{toLocaleString:oe}),$[s]=x?w:_,x||d(m,Nt,_)}}else t.exports=function(){}});Wo("Int8",1,function(t){return function(e,r,n){return t(this,e,r,n)}}),Wo("Uint8",1,function(t){return function(e,r,n){return t(this,e,r,n)}}),Wo("Uint8",1,function(t){return function(e,r,n){return t(this,e,r,n)}},!0),Wo("Int16",2,function(t){return function(e,r,n){return t(this,e,r,n)}}),Wo("Uint16",2,function(t){return function(e,r,n){return t(this,e,r,n)}}),Wo("Int32",4,function(t){return function(e,r,n){return t(this,e,r,n)}}),Wo("Uint32",4,function(t){return function(e,r,n){return t(this,e,r,n)}}),Wo("Float32",4,function(t){return function(e,r,n){return t(this,e,r,n)}}),Wo("Float64",8,function(t){return function(e,r,n){return t(this,e,r,n)}});var zo=Ce.getWeak,Yo=q(5),Xo=q(6),Ho=0,Ko=function(t){return t._l||(t._l=new $o)},$o=function(){this.a=[]},qo=function(t,e){return Yo(t.a,function(t){return t[0]===e})};$o.prototype={get:function(t){var e=qo(this,t);if(e)return e[1]},has:function(t){return!!qo(this,t)},set:function(t,e){var r=qo(this,t);r?r[1]=e:this.a.push([t,e])},delete:function(t){var e=Xo(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}};var Zo={getConstructor:function(t,e,r,n){var i=t(function(t,o){ke(t,i,e,"_i"),t._t=e,t._i=Ho++,t._l=void 0,null!=o&&Re(o,r,t[n],t)});return Pe(i.prototype,{delete:function(t){if(!o(t))return!1;var r=zo(t);return!0===r?Ko(Ie(this,e)).delete(t):r&&b(r,this._i)&&delete r[this._i]},has:function(t){if(!o(t))return!1;var r=zo(t);return!0===r?Ko(Ie(this,e)).has(t):r&&b(r,this._i)}}),i},def:function(t,e,r){var n=zo(a(e),!0);return!0===n?Ko(t).set(e,r):n[t._i]=r,t},ufstore:Ko};r(function(t){var e,r=q(0),n=Ce.getWeak,i=Object.isExtensible,a=Zo.ufstore,s={},c=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},f={get:function(t){if(o(t)){var e=n(t);return!0===e?a(Ie(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return Zo.def(Ie(this,"WeakMap"),t,e)}},h=t.exports=Ye("WeakMap",c,f,Zo,!0,!0);u(function(){return 7!=(new h).set((Object.freeze||Object)(s),7).get(s)})&&(e=Zo.getConstructor(c,"WeakMap"),Xr(e.prototype,f),Ce.NEED=!0,r(["delete","has","get","set"],function(t){var r=h.prototype,n=r[t];E(r,t,function(r,a){if(o(r)&&!i(r)){this._f||(this._f=new e);var u=this._f[t](r,a);return"set"==t?this:u}return n.call(this,r,a)})}))});Ye("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return Zo.def(Ie(this,"WeakSet"),t,!0)}},Zo,!1,!0);var Jo=[].slice,Qo=/MSIE .\./.test(Dn),ta=function(t){return function(e,r){var n=arguments.length>2,i=!!n&&Jo.call(arguments,2);return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,r)}};T(T.G+T.B+T.F*Qo,{setTimeout:ta(n.setTimeout),setInterval:ta(n.setInterval)}),T(T.G+T.B,{setImmediate:Tn.set,clearImmediate:Tn.clear});for(var ea=U("iterator"),ra=U("toStringTag"),na=st.Array,ia={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},oa=jt(ia),aa=0;aa<oa.length;aa++){var ua,sa=oa[aa],ca=ia[sa],fa=n[sa],ha=fa&&fa.prototype;if(ha&&(ha[ea]||g(ha,ea,na),ha[ra]||g(ha,ra,sa),st[sa]=na,ca))for(ua in te)ha[ua]||E(ha,ua,te[ua],!0)}r(function(t){!function(e){var r,n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag",c=e.regeneratorRuntime;if(c)t.exports=c;else{(c=e.regeneratorRuntime=t.exports).wrap=b;var f="suspendedStart",h="suspendedYield",l="executing",v="completed",d={},p={};p[a]=function(){return this};var y=Object.getPrototypeOf,g=y&&y(y(R([])));g&&g!==n&&i.call(g,a)&&(p=g);var m=E.prototype=A.prototype=Object.create(p);x.prototype=m.constructor=E,E.constructor=x,E[s]=x.displayName="GeneratorFunction",c.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(m),t},c.awrap=function(t){return{__await:t}},_(S.prototype),S.prototype[u]=function(){return this},c.AsyncIterator=S,c.async=function(t,e,r,n){var i=new S(b(t,e,r,n));return c.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},_(m),m[s]="Generator",m[a]=function(){return this},m.toString=function(){return"[object Generator]"},c.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},c.values=R,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return u.type="throw",u.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:R(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),d}}}function b(t,e,r,n){var i=e&&e.prototype instanceof A?e:A,o=Object.create(i.prototype),a=new k(n||[]);return o._invoke=function(t,e,r){var n=f;return function(i,o){if(n===l)throw new Error("Generator is already running");if(n===v){if("throw"===i)throw o;return C()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=l;var s=w(t,e,r);if("normal"===s.type){if(n=r.done?v:h,s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=v,r.method="throw",r.arg=s.arg)}}}(t,r,a),o}function w(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function A(){}function x(){}function E(){}function _(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function S(t){var e;this._invoke=function(r,n){function o(){return new Promise(function(e,o){!function e(r,n,o,a){var u=w(t[r],t,n);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(c).then(function(t){s.value=t,o(s)},a)}a(u.arg)}(r,n,e,o)})}return e=e?e.then(o,o):o()}}function O(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,O(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=w(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function R(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())});function la(t){for(var e=1;t>e;)e<<=1;return e}var va=new RegExp(/(.+)\[(\d+)\]$/),da=function t(e,r){if(null!=e){if(r in e)return e[r];var n=r.split(/[.]/),i=function(t,e){var r=va.exec(e);if(r){var n=t[r[1]];return null!=n?n[parseInt(r[2],10)]:void 0}return t[e]}(e,n.shift());return null!=i&&n.length?t(i,n.join(".")):i}},pa=function(t){return 0!==t&&0==(t&t-1)},ya=Math.PI/180,ga=function(t,e){return t>e?t:e},ma=function(t){return function(e){var r={};return e&&t.forEach(function(t){var n=e[t];void 0!==n&&(r[t]=n)}),r}},ba=function(t,e,r,n){if(t){var i=t[e];if(void 0!==i)return i}return"function"==typeof r?r.call(null,n):r},wa=function(t){return t[Math.random()*t.length|0]},Aa=Object.freeze({findNextPowerOf2:la,get:da,hexCol2rgb:function(t){var e=t.startsWith("#")?1:0;return[parseInt(t.substring(e,e+2),16),parseInt(t.substring(e+2,e+4),16),parseInt(t.substring(e+4,e+6),16)]},hexCol2rgba:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255,r=t.startsWith("#")?1:0;return[parseInt(t.substring(r,r+2),16),parseInt(t.substring(r+2,r+4),16),parseInt(t.substring(r+4,r+6),16),e]},isPowerOf2:pa,makeCircleCoords:function(t){for(var e=.5*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),r=360/t,n=[],i=0,o=0;i<t;i++)n.push([e*Math.sin(o*ya),e*Math.cos(o*ya)]),o+=r;return n},maxOf:ga,pick:ma,readOption:ba,sample:wa,toFloatColors:function(t){return t.map(function(t){return t/255})}}),xa=function(t){return"number"==typeof t},Ea=function(t,e){if(xa(t)&&xa(e))return t+e;if(xa(t))switch(t){case 0:return e;default:return"".concat(t," + ").concat(e)}else{if(!xa(e))return"".concat(t," + ").concat(e);switch(e){case 0:return t;default:return"".concat(t," + ").concat(e)}}},_a=function(t,e){if(xa(t)&&xa(e))return t-e;if(xa(t))switch(t){case 0:return"-".concat(e);default:return"".concat(t," - ").concat(e)}else{if(!xa(e))return"".concat(t," - ").concat(e);switch(e){case 0:return t;default:return"".concat(t," - ").concat(e)}}},Sa=function(t,e){if(xa(e)&&xa(t))return t*e;if(xa(t))switch(t){case 0:return 0;case 1:return e;default:return"".concat(t," * ").concat(e)}else{if(!xa(e))return"".concat(t," * ").concat(e);switch(e){case 0:return 0;case 1:return t;default:return"".concat(t," * ").concat(e)}}},Oa=function(t){var e="".concat(t).trim();return e.match(/^[0-9]+$/)?"".concat(e,".0"):e},Ta=function(t){return"return ".concat(t,";")},Pa=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,h=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,l=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,v=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,p=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1,y=(arguments.length>16&&void 0!==arguments[16]?arguments[16]:Oa)||function(t){return"".concat(t)};return"mat4(".concat(y(t),", ").concat(y(e),", ").concat(y(r),", ").concat(y(n),", ").concat(y(i),", ").concat(y(o),", ").concat(y(a),", ").concat(y(u),", ").concat(y(s),", ").concat(y(c),", ").concat(y(f),", ").concat(y(h),", ").concat(y(l),", ").concat(y(v),", ").concat(y(d),", ").concat(y(p),")")},ka=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rotate",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return"\nmat4 ".concat(t,"(float angle) {\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n  ").concat(Ta(Pa(Ea(Sa("oc",e*e),"c"),_a(Sa("oc",e*r),Sa(n,"s")),Ea(Sa("oc",n*e),Sa(r,"s")),0,Ea(Sa("oc",e*r),Sa(n,"s")),Ea(Sa("oc",r*r),"c"),_a(Sa("oc",r*n),Sa(e,"s")),0,_a(Sa("oc",n*e),Sa(r,"s")),Ea(Sa("oc",r*n),Sa(e,"s")),Ea(Sa("oc",n*n),"c"))),"\n}")},Ra=Object.freeze({add:Ea,sub:_a,mul:Sa,asFloat:Oa,ret:Ta,mat4:Pa,rotate:ka,rotateZ:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rotateZ";return ka(t,0,0,1)}});function Ca(t){return(Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ia(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,i)}function La(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(t){Ia(o,n,i,a,u,"next",t)}function u(t){Ia(o,n,i,a,u,"throw",t)}a(void 0)})}}function ja(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ma(t,e,r){return e&&Fa(t.prototype,e),r&&Fa(t,r),t}function Na(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Va(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ua(t,e)}function Ba(t){return(Ba=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ua(t,e){return(Ua=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Da(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ga(t,e,r){return(Ga="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ba(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Wa(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function za(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ya=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;ja(this,t),e<r?(this.minX=e,this.maxX=r):(this.minX=r,this.maxX=e),n<i?(this.minY=n,this.maxY=i):(this.minY=i,this.maxY=n)}return Ma(t,[{key:"addPoint",value:function(t,e){t<this.minX?this.minX=t:t>this.maxX&&(this.maxX=t),e<this.minY?this.minY=e:e>this.maxY&&(this.maxY=e)}},{key:"isInside",value:function(t,e){return t>=this.minX&&t<this.maxX&&e>=this.minY&&e<this.maxY}},{key:"isIntersection",value:function(t){return!(t.maxX<=this.minX||t.minX>=this.maxX||t.maxY<=this.minY||t.minY>=this.maxY)}},{key:"width",get:function(){return this.maxX-this.minX},set:function(t){this.maxX=this.minX+t}},{key:"height",get:function(){return this.maxY-this.minY},set:function(t){this.maxY=this.minY+t}},{key:"centerX",get:function(){return this.minX+(this.maxX-this.minX)/2}},{key:"centerY",get:function(){return this.minY+(this.maxY-this.minY)/2}}]),t}(),Xa=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^16*Math.random()>>t/4).toString(16)})},Ha=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;ja(this,t),this.type=e,this.data_=r,this.id=n&&n.id?String(n.id):Xa(),this.serial=n&&"number"==typeof n.serial?n.serial:1,this.hints=n}return Ma(t,[{key:"touch",value:function(){this.serial++}},{key:"isSynced",value:function(t){var e=this.serial;return e>0&&e===t.serial}},{key:"needSync",value:function(t){return!this.isSynced(t)}},{key:"sync",value:function(t,e){this.needSync(t)&&(e(this.data),this.serial=t.serial)}},{key:"hasHint",value:function(t,e){return 1===arguments.length?Boolean(this.hints&&t in this.hints):Boolean(this.hints&&t in this.hints&&this.hints[t]===e)}},{key:"hint",value:function(t){return this.hints&&this.hints[t]}},{key:"data",get:function(){return this.data_},set:function(t){t!==this.data_&&(this.data_=t,this.touch())}}]),t}(),Ka=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"static";ja(this,t),this.objectCount=e,this.itemCount=r,this.length=e*r,this.array=new Uint16Array(this.length),this.ref=new Ha("ElementIndexArray",this,{usage:n,target:"ELEMENT_ARRAY_BUFFER",typedArray:this.array})}return Ma(t,null,[{key:"Generate",value:function(e,r,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"static",a=new t(e,r.length,o),u=0;u<e;++u)for(var s=0;s<r.length;++s)a.array[u*a.itemCount+s]=r[s]+(u+i)*n;return a}}]),t}(),$a=function(){function t(e,r){ja(this,t),this.primitiveType=e,this.elementIndexArray=r}return Ma(t,null,[{key:"createQuads",value:function(e){return new t("TRIANGLES",Ka.Generate(e,[0,1,2,0,2,3],4))}}]),t}(),qa=1e-6,Za="undefined"!=typeof Float32Array?Float32Array:Array;Math.PI;function Ja(t,e,r){var n=r[0],i=r[1],o=r[2],a=void 0,u=void 0,s=void 0,c=void 0,f=void 0,h=void 0,l=void 0,v=void 0,d=void 0,p=void 0,y=void 0,g=void 0;return e===t?(t[12]=e[0]*n+e[4]*i+e[8]*o+e[12],t[13]=e[1]*n+e[5]*i+e[9]*o+e[13],t[14]=e[2]*n+e[6]*i+e[10]*o+e[14],t[15]=e[3]*n+e[7]*i+e[11]*o+e[15]):(a=e[0],u=e[1],s=e[2],c=e[3],f=e[4],h=e[5],l=e[6],v=e[7],d=e[8],p=e[9],y=e[10],g=e[11],t[0]=a,t[1]=u,t[2]=s,t[3]=c,t[4]=f,t[5]=h,t[6]=l,t[7]=v,t[8]=d,t[9]=p,t[10]=y,t[11]=g,t[12]=a*n+f*i+d*o+e[12],t[13]=u*n+h*i+p*o+e[13],t[14]=s*n+l*i+y*o+e[14],t[15]=c*n+v*i+g*o+e[15]),t}function Qa(){var t=new Za(3);return Za!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function tu(t,e,r){var n=new Za(3);return n[0]=t,n[1]=e,n[2]=r,n}function eu(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],u=r[1],s=r[2];return t[0]=i*s-o*u,t[1]=o*a-n*s,t[2]=n*u-i*a,t}var ru,nu=function(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)};ru=Qa();!function(){var t,e=(t=new Za(4),Za!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();function iu(){var t=new Za(4);return Za!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function ou(t,e,r,n){var i=e[0],o=e[1],a=e[2],u=e[3],s=r[0],c=r[1],f=r[2],h=r[3],l=void 0,v=void 0,d=void 0,p=void 0,y=void 0;return(v=i*s+o*c+a*f+u*h)<0&&(v=-v,s=-s,c=-c,f=-f,h=-h),1-v>qa?(l=Math.acos(v),d=Math.sin(l),p=Math.sin((1-n)*l)/d,y=Math.sin(n*l)/d):(p=1-n,y=n),t[0]=p*i+y*s,t[1]=p*o+y*c,t[2]=p*a+y*f,t[3]=p*u+y*h,t}var au,uu,su,cu,fu,hu,lu,vu=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=o*a),t};au=Qa(),uu=tu(1,0,0),su=tu(0,1,0),cu=iu(),fu=iu(),hu=new Za(9),Za!=Float32Array&&(hu[1]=0,hu[2]=0,hu[3]=0,hu[5]=0,hu[6]=0,hu[7]=0),hu[0]=1,hu[4]=1,hu[8]=1,lu=hu;!function(){var t,e=(t=new Za(2),Za!=Float32Array&&(t[0]=0,t[1]=0),t)}();var du=Math.PI/180,pu=function(){function t(){var e;ja(this,t),this.mat4=(e=new Za(16),Za!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e)}return Ma(t,[{key:"identity",value:function(){var t;(t=this.mat4)[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}},{key:"ortho",value:function(t,e){var r,n,i,o,a,u,s,c,f,h,l=t>>1,v=e>>1,d=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.pow(2,16))>>1;r=this.mat4,c=1/((n=-l)-(i=l)),f=1/((o=-v)-(a=v)),h=1/((u=-d)-(s=d)),r[0]=-2*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*f,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*h,r[11]=0,r[12]=(n+i)*c,r[13]=(a+o)*f,r[14]=(s+u)*h,r[15]=1}},{key:"perspective",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n=t/e,i=e/2,o=2*Math.atan(i/r);!function(t,e,r,n,i){var o=1/Math.tan(e/2),a=void 0;t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(n-i),t[10]=(i+n)*a,t[14]=2*i*n*a):(t[10]=-1,t[14]=-2*n)}(this.mat4,o,n,0,2e3),Ja(this.mat4,this.mat4,[0,0,-r])}},{key:"translate",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Ja(this.mat4,this.mat4,[t,e,r])}},{key:"scale",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;!function(t,e,r){var n=r[0],i=r[1],o=r[2];t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(this.mat4,this.mat4,[t,e,r])}},{key:"rotateX",value:function(t){var e,r,n,i,o,a,u,s,c,f,h,l,v;e=this.mat4,r=this.mat4,n=t*du,i=Math.sin(n),o=Math.cos(n),a=r[4],u=r[5],s=r[6],c=r[7],f=r[8],h=r[9],l=r[10],v=r[11],r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=a*o+f*i,e[5]=u*o+h*i,e[6]=s*o+l*i,e[7]=c*o+v*i,e[8]=f*o-a*i,e[9]=h*o-u*i,e[10]=l*o-s*i,e[11]=v*o-c*i}},{key:"rotateY",value:function(t){var e,r,n,i,o,a,u,s,c,f,h,l,v;e=this.mat4,r=this.mat4,n=t*du,i=Math.sin(n),o=Math.cos(n),a=r[0],u=r[1],s=r[2],c=r[3],f=r[8],h=r[9],l=r[10],v=r[11],r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=a*o-f*i,e[1]=u*o-h*i,e[2]=s*o-l*i,e[3]=c*o-v*i,e[8]=a*i+f*o,e[9]=u*i+h*o,e[10]=s*i+l*o,e[11]=c*i+v*o}},{key:"rotateZ",value:function(t){var e,r,n,i,o,a,u,s,c,f,h,l,v;e=this.mat4,r=this.mat4,n=t*du,i=Math.sin(n),o=Math.cos(n),a=r[0],u=r[1],s=r[2],c=r[3],f=r[4],h=r[5],l=r[6],v=r[7],r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=a*o+f*i,e[1]=u*o+h*i,e[2]=s*o+l*i,e[3]=c*o+v*i,e[4]=f*o-a*i,e[5]=h*o-u*i,e[6]=l*o-s*i,e[7]=v*o-c*i}},{key:"multiply",value:function(t,e){!function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=e[8],l=e[9],v=e[10],d=e[11],p=e[12],y=e[13],g=e[14],m=e[15],b=r[0],w=r[1],A=r[2],x=r[3];t[0]=b*n+w*u+A*h+x*p,t[1]=b*i+w*s+A*l+x*y,t[2]=b*o+w*c+A*v+x*g,t[3]=b*a+w*f+A*d+x*m,b=r[4],w=r[5],A=r[6],x=r[7],t[4]=b*n+w*u+A*h+x*p,t[5]=b*i+w*s+A*l+x*y,t[6]=b*o+w*c+A*v+x*g,t[7]=b*a+w*f+A*d+x*m,b=r[8],w=r[9],A=r[10],x=r[11],t[8]=b*n+w*u+A*h+x*p,t[9]=b*i+w*s+A*l+x*y,t[10]=b*o+w*c+A*v+x*g,t[11]=b*a+w*f+A*d+x*m,b=r[12],w=r[13],A=r[14],x=r[15],t[12]=b*n+w*u+A*h+x*p,t[13]=b*i+w*s+A*l+x*y,t[14]=b*o+w*c+A*v+x*g,t[15]=b*a+w*f+A*d+x*m}(this.mat4,t.mat4,e.mat4)}},{key:"copy",value:function(t){var e,r;e=this.mat4,r=t.mat4,e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]}},{key:"clone",value:function(){var e=new t;return e.copy(this),e}},{key:"x",get:function(){return this.mat4[12]},set:function(t){this.mat4[12]=t}},{key:"y",get:function(){return this.mat4[13]},set:function(t){this.mat4[13]=t}},{key:"z",get:function(){return this.mat4[14]},set:function(t){this.mat4[14]=t}},{key:"sx",get:function(){return this.mat4[0]},set:function(t){this.mat4[0]=t}},{key:"sy",get:function(){return this.mat4[5]},set:function(t){this.mat4[5]=t}},{key:"sz",get:function(){return this.mat4[10]},set:function(t){this.mat4[10]=t}}]),t}();function yu(t,e){var r,n,i,o;t.imgEl=pa(e.width)&&pa(e.height)?e:(n=la((r=e).width),i=la(r.height),(o=document.createElement("canvas")).width=n,o.height=i,o.getContext("2d").drawImage(r,0,0),o),t.origWidth=e.width,t.origHeight=e.height}var gu=function(){function t(e){var r,n=this;ja(this,t),"string"==typeof e?(r=new window.Image).src=e:r=e,!1===r.onLoaded||0===r.width&&0===r.height?(this.imgEl=null,this.onLoaded=new Promise(function(t){var e=r.onload;r.onload=function(){e&&e.call(r),yu(n,r),t(n)}})):(yu(this,r),this.onLoaded=Promise.resolve(this))}return Ma(t,[{key:"isComplete",get:function(){return null!=this.imgEl}},{key:"width",get:function(){return this.imgEl&&this.imgEl.width||0}},{key:"height",get:function(){return this.imgEl&&this.imgEl.height||0}}]),t}(),mu=function(){function t(e){var r=e.devicePixelRatio,n=e.fit,i=e.height,o=e.perspective,a=e.pixelRatio,u=e.width;ja(this,t),this.desiredWidth=u||0,this.desiredHeight=i||0,this.desiredPixelRatio=a,this.customDevicePixelRatio=r,this.fit=n,this.perspective=o,this.lastPerspective=void 0,this.width=0,this.height=0,this.pixelRatio=0,this.rawWidth=0,this.rawHeight=0,this.mat4=new pu}return Ma(t,[{key:"updateOrtho",value:function(t,e){var r=this.perspective;return(t!==this.width||e!==this.height||r!==this.lastPerspective)&&(this.width=t,this.height=e,this.lastPerspective=r,r>0?this.mat4.perspective(t,e,r):this.mat4.ortho(t,e),this.pixelRatio=this.rawHeight/e,!0)}},{key:"update",value:function(t,e){this.rawWidth=t,this.rawHeight=e;var r=this.desiredPixelRatio;if("number"==typeof r&&r>0){var n=this.devicePixelRatio*r,i=t/n,o=e/n;return this.updateOrtho(i,o)}if("fill"===this.fit&&this.desiredWidth>0&&this.desiredHeight>0)return this.updateOrtho(this.desiredWidth,this.desiredHeight);if(("cover"===this.fit||"contain"===this.fit)&&this.desiredWidth>=0&&this.desiredHeight>=0){var a=e/t,u=this.desiredHeight/this.desiredWidth,s="cover"===this.fit,c=this.desiredWidth,f=this.desiredHeight;if(0===this.desiredWidth&&this.desiredHeight||a<u||1===a&&u>1){if(c=this.desiredHeight/e*t,s){var h=this.desiredWidth/c;c*=h,f*=h}}else if((this.desiredWidth&&0===this.desiredHeight||a>u||1===a&&u<1)&&(f=this.desiredWidth/t*e,s)){var l=this.desiredHeight/f;c*=l,f*=l}return this.updateOrtho(c,f)}return!1}},{key:"devicePixelRatio",get:function(){return this.customDevicePixelRatio||window.devicePixelRatio||1}},{key:"perspective",set:function(t){this._perspective="number"==typeof t?Math.abs(t):0},get:function(){return this._perspective}}]),t}(),bu=function(t){function e(t,r,n,i){var o;return ja(this,e),(o=Da(this,Ba(e).call(this,r,n,Object.assign({serial:0},i)))).name=t,o}return Va(e,Ha),e}();bu.UNIFORM="uniform",bu.ATTRIB="attrib",bu.TEXTURE_2D="tex2d";var wu=function(t){function e(t,r,n){return ja(this,e),Da(this,Ba(e).call(this,t,bu.UNIFORM,r,n))}return Va(e,bu),e}(),Au="projection",xu=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Au;return ja(this,e),Da(this,Ba(e).call(this,r,t.mat4,{projection:t}))}return Va(e,wu),Ma(e,[{key:"update",value:function(t,e){this.projection.update(t,e)&&this.touch()}},{key:"projection",get:function(){return this.hint("projection")}}]),e}(),Eu={float32:Float32Array,int16:Int16Array,int32:Int32Array,int8:Int8Array,uint16:Uint16Array,uint32:Uint32Array,uint8:Uint8Array},_u=function(t,e,r){var n=t*e;if(r instanceof ArrayBuffer){if(n>r.byteLength)throw new TypeError("VOArray: [data] buffer is too small! needs ".concat(n," bytes (capacity=").concat(t," bytesPerVO=").concat(e,") but has ").concat(r.byteLength," bytes!"));return new DataView(r,0,n)}if(ArrayBuffer.isView(r)){var i=r.byteOffset,o=r.byteLength;if(n>o)throw new TypeError("VOArray: [data] buffer is too small! needs ".concat(n," bytes (capacity=").concat(t," bytesPerVO=").concat(e,") but has ").concat(o," (byteOffset=").concat(i,") bytes!"));return new DataView(r.buffer,i,n)}throw new TypeError("VOArray: [data] must be instanceof ArrayBuffer, DataView or TypedArray!")},Su=function(t,e,r,n){var i={};return n.forEach(function(n){var o=Eu[n],a=new o(t,e,r/o.BYTES_PER_ELEMENT);i[function(t){return"".concat(t,"Array")}(n)]=a}),i},Ou=function(){function t(e,r,n,i,o){if(ja(this,t),r%4!=0)throw new TypeError("new VOArray: bytesPerVO must be divisible by 4 (but is not!) bytesPerVO=".concat(r));if(this.capacity=e,this.bytesPerVO=r,this.arrayTypes=n.slice(0),i){var a=_u(e,r,i);this.buffer=a.buffer,this.bufferByteOffset=a.byteOffset,this.bufferByteLength=a.byteLength}else this.buffer=new ArrayBuffer(e*r),this.bufferByteOffset=0,this.bufferByteLength=this.buffer.byteLength;Object.assign(this,Su(this.buffer,this.bufferByteOffset,this.bufferByteLength,n)),this.ref=new Ha("VOArray",this,Object.assign({typedArray:this.toUint32Array(),serial:1},o))}return Ma(t,[{key:"copy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.bytesPerVO/Uint32Array.BYTES_PER_ELEMENT,n=0;e>0&&(n=e*r),this.toUint32Array().set(t.toUint32Array(),n)}},{key:"toUint32Array",value:function(){var t=this.uint32Array;if(!t){var e=this.bytesPerVO/Uint32Array.BYTES_PER_ELEMENT;return this.uint32Array=new Uint32Array(this.buffer,this.bufferByteOffset,this.capacity*e),this.uint32Array}return t}},{key:"subarray",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.bytesPerVO,i=this.bufferByteOffset+e*n,o=r*n;return new t(r,n,this.arrayTypes,new DataView(this.buffer,i,o))}}]),t}(),Tu={float32:4,int16:2,int32:4,int8:1,uint16:2,uint32:4,uint8:1},Pu={float32:function(t){return t.float32Array},int32:function(t){return t.int32Array},int16:function(t){return t.int16Array},int8:function(t){return t.int8Array},uint32:function(t){return t.uint32Array},uint16:function(t){return t.uint16Array},uint8:function(t){return t.uint8Array}},ku=function(t){return t[0].toUpperCase()+t.substr(1)},Ru=function(t,e,r){if(t.scalars){var n=t.scalars[r];if(void 0!==n)return n}return"".concat(e,"_").concat(r)},Cu=function(t,e){return function(){return t(this.voArray)[e]}},Iu=function(t,e,r,n,i){return function(){for(var o=t(this.voArray),a=0;a<r;++a)for(var u=0;u<e;++u)o[a*n+i+u]=arguments[a*e+u]}},Lu=function(t,e,r,n){return function(i){for(var o=t(this.voArray),a=0;a<e;++a)o[a*r+n]=i}},ju=function(){function t(e,r,n,i,o,a,u){ja(this,t),this.name=e,this.type=r,this.size=n,this.uniform=a,this.scalars=u,this.bytesPerElement=Tu[this.type],this.bytesPerVertex=this.bytesPerElement*n,this.byteOffset="number"!=typeof o?i*this.bytesPerElement:o,this.offset="number"!=typeof i?o/this.bytesPerElement:i}return Ma(t,[{key:"vertexAttrCount",value:function(t){return t.bytesPerVertex/this.bytesPerElement}}],[{key:"defineProperties",value:function(t,e,r){var n=t.name,i=Pu[t.type],o=r.vertexCount,a=t.vertexAttrCount(r),u=t.byteOffset/t.bytesPerElement;if(1===t.size)if(t.uniform){var s=Cu(i,u),c=Lu(i,o,a,u);t.getValue=function(t){return s.call(t)},t.setValue=function(t,e){return c.call(t,e)},e[n]={get:s,set:c,enumerable:!0}}else{var f=Iu(i,1,o,a,u);t.setValue=function(t,e){return f.apply(t,e)},e["set".concat(ku(n))]={value:f,enumerable:!0};for(var h=[],l=0;l<r.vertexCount;++l){var v=Cu(i,u+l*a);h.push(v),e[n+l]={get:v,set:Iu(i,1,1,0,u+l*a),enumerable:!0}}t.getValue=function(t,e){return h[e].call(t)}}else if(t.size>=2)if(t.uniform){var d=function(t,e){return function(r){return t(this.voArray)[e+r]}}(i,u),p=function(t,e,r,n,i){return function(){for(var o=t(this.voArray),a=0;a<r;++a)for(var u=0;u<e;++u)o[a*n+i+u]=arguments[u]}}(i,t.size,o,a,u);t.getValue=function(t,e,r){return d.call(t,r)},t.setValue=function(t,e){return p.apply(t,e)},e["get".concat(ku(n))]={value:d,enumerable:!0},e["set".concat(ku(n))]={value:p,enumerable:!0};for(var y=0;y<t.size;++y){e[Ru(t,n,y)]={get:Cu(i,u+y),set:Lu(i,o,a,u+y),enumerable:!0}}}else{var g=Iu(i,t.size,o,a,u);t.setValue=function(t,e){return g.apply(t,e)},e["set".concat(ku(n))]={value:g,enumerable:!0};for(var m=[],b=0;b<r.vertexCount;++b){for(var w=[],A=0;A<t.size;++A){var x=Ru(t,n,A)+b,E=Cu(i,u+b*a+A);w.push(E),e[x]={get:E,set:Iu(i,1,1,0,u+b*a+A),enumerable:!0}}m.push(w)}t.getValue=function(t,e,r){return m[e][r].call(t)}}}}]),t}(),Fu=function(t,e){var r;if(Array.isArray(e)?r=e:"object"===Ca(e)&&(r=Object.keys(e).map(function(t){var r=e[t];return Object.assign({name:t},Array.isArray(r)?{scalars:r}:r)})),!r)throw new Error("VODescriptor:createAttributes: attributes should be an array or an object!");t.attr={},t.scalars=[];for(var n=0,i=0,o=0;o<r.length;++o){var a=r[o],u=a.size;void 0===u&&(u=Array.isArray(a.scalars)?a.scalars.length:1);var s=a.type||"float32";void 0!==a.name&&(t.scalars.push(a.name),t.attr[a.name]=new ju(a.name,s,u,n,i,!!a.uniform,a.scalars)),n+=u,i+=Tu[s]*u}t.rightPadBytesPerVertex=i%4>0?4-i%4:0,t.bytesPerVertex=i+t.rightPadBytesPerVertex,t.bytesPerVO=t.bytesPerVertex*t.vertexCount,t.vertexAttrCount=n,t.attrList=t.scalars.map(function(e){return t.attr[e]})},Mu=function(t,e){"object"===Ca(e)&&Object.keys(e).forEach(function(r){var n=e[r];"string"==typeof n?void 0!==(n=t.attr[n])&&(t.attr[r]=n):t.attr[r]=new ju(r,n.type,n.size,n.offset,n.byteOffset,!!n.uniform,n.scalars)})},Nu=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={toArray:{value:function(t){return function(e){for(var r=[],n=Array.isArray(e)?e.map(function(e){return t.attr[e]}):t.attrList,i=n.length,o=0;o<t.vertexCount;++o)for(var a=0;a<i;++a)for(var u=n[a],s=0;s<u.size;++s)r.push(u.getValue(this,o,s));return r}}(t)}};Object.keys(t.attr).forEach(function(e){var n=t.attr[e];ju.defineProperties(n,r,t)}),t.voPrototype=Object.create(e,r)},Vu=function(t){t.typedArrays={float32:!1,int16:!1,int32:!1,int8:!1,uint16:!1,uint32:!1,uint8:!1},Object.keys(t.attr).forEach(function(e){t.typedArrays[t.attr[e].type]=!0}),t.typeList=Object.keys(t.typedArrays).filter(function(e){return t.typedArrays[e]}).sort()},Bu=function(){function t(e){var r=e.vertexCount,n=e.instanceOf,i=e.attributes,o=e.aliases,a=e.proto;ja(this,t),this.vertexCount=parseInt(r,10)||1,this.isInstanced=null!=n,this.base=n,Fu(this,i),Mu(this,o),Nu(this,a),Vu(this)}return Ma(t,[{key:"createVOArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return new Ou(t,this.bytesPerVO,this.typeList,null,Object.assign({descriptor:this,usage:"dynamic",doubleBuffer:!0},e))}},{key:"createVO",value:function(t,e){var r=this,n=function(t,e,r){if(t.descriptor=e,!t.descriptor)throw new Error("VODescriptor:createVO: could not read descriptor!");if(t.voArray=r||t.descriptor.createVOArray(),t.descriptor.bytesPerVO!==t.voArray.bytesPerVO&&t.descriptor.typeList.join()!==t.voArray.arrayTypes.join())throw new TypeError("VODescriptor:createVO: descriptor and voArray are not compatible with each other!");return t}(Object.create(this.voPrototype),this,t);switch(Ca(e)){case"function":e(n);break;case"object":Object.keys(e).forEach(function(t){var i=r.attr[t];i?i.setValue(n,e[t]):"function"==typeof n[t]?n[t](e[t]):n[t]=e[t]})}return n}},{key:"hasAttribute",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.attr[t];return r&&r.size===e}},{key:"maxIndexedVOPoolSize",get:function(){return Math.floor(65536/this.vertexCount)}}]),t}(),Uu=function(){function t(e,r,n,i){if(ja(this,t),this.id=n||Xa(),this.type=e,this.ctx=Object.assign({},i),r instanceof HTMLElement)this.strings=[r.textContent],this.values=[];else if(Array.isArray(r)){var o=Wa(r,2);this.strings=o[0],this.values=o[1]}else this.strings=[String(r)],this.values=[]}return Ma(t,[{key:"compile",value:function(e){var r=this,n=[this.strings[0]],i=Object.assign({},this.ctx,e);return this.values.forEach(function(e,o){var a=e;if("function"==typeof e)a=e(i);else if(e instanceof t){if(e.type!==t.PARTIAL)throw new Error("ShaderSource.compile() panic! Only PARTIAL's are allowed to embed into shader sources! (but type=".concat(e.type,")"));a=e.compile(i)}n.push(a,r.strings[o+1])}),n.join("")}}]),t}();Uu.VERTEX_SHADER="VERTEX_SHADER",Uu.FRAGMENT_SHADER="FRAGMENT_SHADER",Uu.PARTIAL="PARTIAL",Uu.vertexShader=function(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return new Uu(Uu.VERTEX_SHADER,[e,n],t&&t.id,t)}},Uu.fragmentShader=function(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return new Uu(Uu.FRAGMENT_SHADER,[e,n],t&&t.id,t)}},Uu.partial=function(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return new Uu(Uu.PARTIAL,[e,n],t&&t.id,t)}},Uu.fromElement=function(t){var e=t.getAttribute("type");if("x-shader/vertex"===e)e=Uu.VERTEX_SHADER;else{if("x-shader/fragment"!==e)throw new Error('ShaderSource.fromElement() panic! Invalid type="'.concat(e,'" attribute value (should be "x-shader/vertex" or "x-shader/fragment")'));e=Uu.FRAGMENT_SHADER}return new Uu(e,t,t.getAttribute("id"))};var Du=function(){function t(){ja(this,t),this.descriptors=new Map,this.vertexShaders=new Map,this.fragmentShaders=new Map}return Ma(t,[{key:"createDescriptor",value:function(t,e){var r=e instanceof Bu?e:new Bu(e);return this.descriptors.set(t,r),t}},{key:"addVertexShader",value:function(t,e){if(e.type!==Uu.VERTEX_SHADER)throw new Error("addVertexShader: shaderSource has wrong type=".concat(e.type," (expected type=").concat(Uu.VERTEX_SHADER,")"));return this.vertexShaders.set(t,e),t}},{key:"addFragmentShader",value:function(t,e){if(e.type!==Uu.FRAGMENT_SHADER)throw new Error("addFragmentShader: shaderSource has wrong type=".concat(e.type," (expected type=").concat(Uu.FRAGMENT_SHADER,")"));return this.fragmentShaders.set(t,e),t}},{key:"createVertexShader",value:function(t){var e=new Uu(Uu.VERTEX_SHADER,t);return this.vertexShaders.set(e.id,e),e.id}},{key:"createFragmentShader",value:function(t){var e=new Uu(Uu.FRAGMENT_SHADER,t);return this.fragmentShaders.set(e.id,e),e.id}},{key:"getDescriptor",value:function(t){return this.descriptors.get(t)}},{key:"getVertexShader",value:function(t){return this.vertexShaders.get(t)}},{key:"getFragmentShader",value:function(t){return this.fragmentShaders.get(t)}}]),t}(),Gu=function(t){function e(t,r){return ja(this,e),Da(this,Ba(e).call(this,t,bu.ATTRIB,r))}return Va(e,bu),e}(),Wu=function(){function t(e){ja(this,t),this.shaderVars=e}return Ma(t,[{key:"pushVar",value:function(t){this.shaderVars.forEach(t.pushVar.bind(t))}},{key:"popVar",value:function(t){this.shaderVars.forEach(t.popVar.bind(t))}}]),t}();function zu(t,e){switch(e){case bu.UNIFORM:return t.uniform;case bu.ATTRIB:return t.attrib;case bu.TEXTURE_2D:return t.tex2d;default:return null}}function Yu(t,e,r){var n=zu(t,e),i=n.get(r);return i||(i=[],n.set(r,i)),i}var Xu=function(){function t(){ja(this,t),this.uniform=new Map,this.attrib=new Map,this.tex2d=new Map}return Ma(t,[{key:"clear",value:function(){this.uniform.clear(),this.attrib.clear(),this.tex2d.clear()}},{key:"pushVar",value:function(t){t instanceof Wu?t.pushVar(this):Yu(this,t.type,t.name).push(t)}},{key:"popVar",value:function(t){if(t instanceof Wu)t.popVar(this);else for(var e=Yu(this,t.type,t.name),r=e.length,n=0;n<r;++n)if(e[n]===t)return void(e.length=n)}},{key:"curVar",value:function(t){var e=zu(this,t.type).get(t.name);return e&&e.length?e[e.length-1]:null}},{key:"curUniform",value:function(t){var e=this.uniform.get(t);return e&&e.length?e[e.length-1]:null}},{key:"curAttrib",value:function(t){var e=this.attrib.get(t);return e&&e.length?e[e.length-1]:null}},{key:"curTex2d",value:function(t){var e=this.tex2d.get(t);return e&&e.length?e[e.length-1]:null}}]),t}(),Hu=function t(e,r,n){ja(this,t),this.id=n||Xa(),this.vertexShader=e,this.fragmentShader=r},Ku=function(t){function e(t){var r;return ja(this,e),r=Da(this,Ba(e).call(this,[])),Object.keys(t).forEach(function(e){r.addUniform(e,t[e])}),r}return Va(e,Wu),Ma(e,[{key:"addUniform",value:function(t,e,r){var n=e instanceof mu,i=n?new xu(e,t):new wu(t,e,r);this.shaderVars.push(i),Object.defineProperty(this,"".concat(t,"Uniform"),{value:i,enumerable:!0}),n?Object.defineProperty(this,t,{enumerable:!0,get:function(){return i.projection}}):Object.defineProperty(this,t,{enumerable:!0,get:function(){return i.data},set:function(t){i.data=t}})}}]),e}(),$u=function(){function t(e,r,n){ja(this,t),this.name=e,this.descriptor=r,this.bufferSource=n}return Ma(t,[{key:"bufferSource",set:function(t){this.bufferSource_=t,this.ref=t instanceof Ou?t.ref:t.voArray.ref},get:function(){return this.bufferSource_}},{key:"attrDescriptor",get:function(){return this.descriptor.attr[this.name]}}]),t}(),qu=function(){function t(e,r){ja(this,t),this.name=e,this.shaderVar=r}return Ma(t,[{key:"type",get:function(){return this.shaderVar.type}},{key:"data",get:function(){return this.shaderVar.data}},{key:"serial",get:function(){return this.shaderVar.serial}}]),t}(),Zu=function(t){function e(t,r){var n;ja(this,e),n=Da(this,Ba(e).call(this,[]));var i,o=r||t.descriptor;return Object.keys(o.attr).forEach(function(e){i?n.shaderVars.push(new qu(e,i)):(i=new Gu(e,new $u(e,o,t)),n.shaderVars.push(i))}),n}return Va(e,Wu),Ma(e,[{key:"touch",value:function(){return this.shaderVars[0].touch()}},{key:"bufferSource",get:function(){return this.shaderVars[0].data.bufferSource}},{key:"serial",get:function(){return this.shaderVars[0].serial}}]),e}(),Ju=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t.capacity-t.usedCount-t.allocatedCount,n=e>0&&e<r?e:r,i=t.allocatedCount+n,o=t.allocatedCount;o<i;o++){var a=t.voArray.subarray(o),u=t.descriptor.createVO(a);u.free=t.free.bind(t,u),t.availableVOs.push(u)}return n},Qu=function(){function t(e,r){var n=this;ja(this,t),this.id=Xa(),this.descriptor=e,this.capacity=ba(r,"capacity",this.descriptor.maxIndexedVOPoolSize),this.maxAllocVOSize=ba(r,"maxAllocVOSize",0),this.voZero=ba(r,"voZero",function(){return e.createVO()}),this.voNew=ba(r,"voNew",function(){return e.createVO()}),this.usage=ba(r,"usage","dynamic"),this.voArray=ba(r,"voArray",function(){return e.createVOArray(n.capacity,{usage:n.usage,autotouch:ba(r,"autotouch","dynamic"===n.usage),doubleBuffer:ba(r,"doubleBuffer","dynamic"===n.usage)})}),this.availableVOs=[],this.usedVOs=[],Ju(this,this.maxAllocVOSize)}return Ma(t,[{key:"alloc",value:function(){var t=this.availableVOs.shift();if(void 0===t){if(!(this.capacity-this.allocatedCount>0))return;Ju(this,this.maxAllocVOSize),t=this.availableVOs.shift()}return this.usedVOs.push(t),t.voArray.copy(this.voNew.voArray),t}},{key:"multiAlloc",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.allocatedCount-this.usedCount<t&&Ju(this,ga(this.maxAllocVOSize,t-this.allocatedCount-this.usedCount));for(var r=0;r<t;++r){var n=this.availableVOs.shift();if(void 0===n)break;this.usedVOs.push(n),n.voArray.copy(this.voNew.voArray),e.push(n)}return e}},{key:"free",value:function(t){if(Array.isArray(t))t.forEach(this.free.bind(this));else{var e=this.usedVOs.indexOf(t);if(-1!==e){var r=this.usedVOs.length-1;if(e!==r){var n=this.usedVOs[r];t.voArray.copy(n.voArray);var i=n.voArray;n.voArray=t.voArray,t.voArray=i,this.usedVOs.splice(e,1,n)}this.usedVOs.pop(),this.availableVOs.unshift(t),t.voArray.copy(this.voZero.voArray)}}}},{key:"usedCount",get:function(){return this.usedVOs.length}},{key:"availableCount",get:function(){return this.capacity-this.usedVOs.length}},{key:"allocatedCount",get:function(){return this.availableVOs.length+this.usedVOs.length}}]),t}(),ts=ma(["autotouch","capacity","doubleBuffer","maxAllocVOSize","usage","voArray"]),es=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"size";switch(Ca(t)){case"string":return function(e,r,n,i){return i.attr[t].setValue(e,[r,n])};case"function":return t;case"object":case"boolean":if(!t)return null;default:throw new Error("SpriteGroup: invalid sprite size setter! (is ".concat(Ca(t)," but should be a function, string, null or false)"))}},rs=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ja(this,t),this.descriptor=e,r.base instanceof t?this.base=r.base:"object"===Ca(r.base)&&(this.base=new t(e.base,r.base));var n=r.voNew,i=r.voZero;n&&(n=e.createVO(null,n)),i&&(i=e.createVO(null,i)),this.spriteHook={setSize:es(r.setSize)},this.voPool=new Qu(e,Object.assign({maxAllocVOSize:1e3},ts(r),{voNew:n,voZero:i})),this.voPoolShaderAttribs=new Zu(this.voPool);var o=r.primitive;this.primitive="function"==typeof o?o(this.capacity):o,this.shaderProgram=r.shaderProgram,!this.shaderProgram&&r.vertexShader&&r.fragmentShader&&(this.shaderProgram=new Hu(r.vertexShader,r.fragmentShader))}return Ma(t,[{key:"createSprite",value:function(t,e){var r=this.voPool.alloc(),n=this.spriteHook.setSize;return!n||void 0===t&&void 0===e||n(r,t,void 0!==e?e:t,this.descriptor),r}},{key:"createSprites",value:function(t,e,r){var n=this,i=this.voPool.multiAlloc(t),o=this.spriteHook.setSize;if(o&&(void 0!==e||void 0!==r)){var a=void 0!==r?r:e;i.forEach(function(t){return o(t,e,a,n.descriptor)})}return i}},{key:"touchVertexBuffers",value:function(){this.voPool.voArray.ref.touch()}},{key:"capacity",get:function(){return this.voPool.capacity}},{key:"usedCount",get:function(){return this.voPool.usedCount}},{key:"availableCount",get:function(){return this.voPool.availableCount}}]),t}(),ns=function(){function t(){ja(this,t),this.context=new Map}return Ma(t,[{key:"push",value:function(t,e){var r=this.context.get(t);return r?(r.push(e),r.length-1):(this.context.set(t,[e]),0)}},{key:"pop",value:function(t,e){var r=this.context.get(t);if(r)return void 0===e?r.pop():r.splice(e,r.length-e)}},{key:"get",value:function(t){var e=this.context.get(t);if(e){var r=e.length;if(r>0)return e[r-1]}}},{key:"clear",value:function(){this.context.forEach(function(t){t.length=0})}}]),t}(),is=function(){function t(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;ja(this,t);var u=r,s=n;if(e instanceof t)this.parent=e,this.image=null;else{if(!("object"===Ca(e)&&"width"in e&&"height"in e))throw new Error("new Texture() panic: unexpected source argument!");this.image=e,this.parent=null,this._ref=new Ha("Texture",this,{flipY:ba(a,"flipY",!1),repeatable:ba(a,"repeatable",!1),premultiplyAlpha:ba(a,"premultiplyAlpha",!0),nearest:ba(a,"nearest",!0)}),"origWidth"in e&&"origHeight"in e&&(u=e.origWidth,s=e.origHeight)}this._width=u,this._height=s,this.x=i,this.y=o}var e;return Ma(t,[{key:"root",get:function(){return this.parent&&this.parent.root||this}},{key:"imgEl",get:function(){var t=this.root;return t.image.imgEl||t.image}},{key:"ref",get:function(){return this._ref||this.root.ref}},{key:"width",get:function(){return"number"==typeof this._width?this._width:this.image?this.image.width:this.parent?this.root.width:0},set:function(t){this._width=t}},{key:"height",get:function(){return"number"==typeof this._height?this._height:this.image?this.image.height:this.parent?this.root.height:0},set:function(t){this._height=t}},{key:"minS",get:function(){for(var t=this.x,e=this;null!=(e=e.parent);)t+=e.x;return t/this.root.image.width}},{key:"minT",get:function(){for(var t=this.y,e=this;null!=(e=e.parent);)t+=e.y;return t/this.root.image.height}},{key:"maxS",get:function(){for(var t=this.x+this.width,e=this;null!=(e=e.parent);)t+=e.x;return t/this.root.image.width}},{key:"maxT",get:function(){for(var t=this.y+this.height,e=this;null!=(e=e.parent);)t+=e.y;return t/this.root.image.height}}],[{key:"load",value:(e=La(regeneratorRuntime.mark(function e(r,n){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=new URL(r,window.location.href).href,e.next=3,new gu(i).onLoaded;case 3:return o=e.sent,e.abrupt("return",new t(o,void 0,void 0,0,0,n));case 5:case"end":return e.stop()}},e,this)})),function(t,r){return e.apply(this,arguments)})}]),t}(),os=function(){function t(e){ja(this,t),this.frameNames=Object.keys(e.frames),this.frames=e.frames,this.meta=e.meta,this.imageUrl=e.meta.image}var e;return Ma(t,null,[{key:"load",value:(e=La(regeneratorRuntime.mark(function e(r,n){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch(r,n);case 2:return i=e.sent,e.next=5,i.json();case 5:return o=e.sent,e.abrupt("return",new t(o));case 7:case"end":return e.stop()}},e,this)})),function(t,r){return e.apply(this,arguments)})}]),t}(),as=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;ja(this,t),this.rootTexture=e,this.jsonDef=r,this.frames=new Map}var e;return Ma(t,[{key:"addFrame",value:function(t,e,r,n,i){this.frames.set(t,new is(this.rootTexture,e,r,n,i))}},{key:"addFrameAlias",value:function(t,e){this.frames.has(e)&&this.frames.set(t,this.frames.get(e))}},{key:"frame",value:function(t){return this.frames.get(t)}},{key:"randomFrame",value:function(){return wa(Array.from(this.frames.values()))}},{key:"randomFrameName",value:function(){return wa(this.frameNames())}},{key:"frameNames",value:function(t){var e=Array.from(this.frames.keys());if(t){var r=new RegExp(t);return e.filter(function(t){return r.test(t)})}return e}}],[{key:"load",value:(e=La(regeneratorRuntime.mark(function e(r,n){var i,o,a,u,s,c,f,h,l,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=new URL(r,window.location.href).href,e.next=3,os.load(i,ba(n,"fetchOptions"));case 3:return o=e.sent,e.next=6,new gu(ba(n,"image",function(){return new URL(o.imageUrl,i).href},o)).onLoaded;case 6:for(a=e.sent,u=new is(a,void 0,void 0,0,0,ba(n,"textureHints")),s=new t(u,o),c=o.frameNames,f=c.length,h=0;h<f;h++)l=c[h],v=o.frames[l].frame,s.addFrame(l,v.w,v.h,v.x,v.y);return e.abrupt("return",s);case 13:case"end":return e.stop()}},e,this)})),function(t,r){return e.apply(this,arguments)})}]),t}(),us=function t(e){var r=this;ja(this,t),this.texture=null,this.atlas=null,this.onReady=Promise.resolve(e).then(function(){var t=La(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e instanceof as?(r.atlas=e,r.texture=e.rootTexture):r.texture=e,t.abrupt("return",e);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())},ss=function(t){function e(t,r){var n;return ja(this,e),(n=Da(this,Ba(e).call(this,t,bu.TEXTURE_2D,r))).texture=null,n}return Va(e,bu),e}(),cs=function(){function t(){ja(this,t),this.handles=new Map,this.shaderVars=new Map}return Ma(t,[{key:"loadTexture",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=new us(is.load(e,r));return this.handles.set(t,n),n.onReady}},{key:"loadTextureAtlas",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=new us(as.load(e,r));return this.handles.set(t,n),n.onReady}},{key:"getTexture",value:function(t){var e=this.handles.get(t);return e&&e.texture}},{key:"getTextureAtlas",value:function(t){var e=this.handles.get(t);return e&&e.atlas}},{key:"whenLoaded",value:function(t,e,r){var n=this.getTexture(t);if(n){var i=this.shaderVars.get(e);i||(i=new ss(e),this.shaderVars.set(e,i)),i.texture=n,r(i)}}}]),t}(),fs=function(){function t(e,r){ja(this,t),this.textureLibrary=e,this.waitFor=Object.keys(r).map(function(t){return{shaderVarKey:t,textureId:r[t],isLoaded:!1}}),this.shaderVarGroup=new Wu([]),this.shaderVarStore=new Map}return Ma(t,[{key:"whenLoaded",value:function(t){var e=this;this.isLoaded?t(this.shaderVarGroup):(this.waitFor.forEach(function(t){if(!t.isLoaded){var r=e.textureLibrary.getTexture(t.textureId);if(!r)return;var n=new ss(t.shaderVarKey);n.texture=r,e.shaderVarGroup.shaderVars.push(n),t.isLoaded=!0}}),this.waitFor=this.waitFor.filter(function(t){return!1===t.isLoaded}),this.isLoaded&&t(this.shaderVarGroup))}},{key:"isLoaded",get:function(){return 0===this.waitFor.length&&this.shaderVarGroup.shaderVars.length>0}}]),t}(),hs=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ja(this,e),(r=Da(this,Ba(e).call(this,t,n))).textureLibrary=ba(n,"textureLibrary",function(){return new cs});var i=n.setTexCoordsByTexture;return r.spriteHook.setTexCoordsByTexture=null===i||!1===i?null:i||function(t,e){return t.setTexCoordsByTexture(e)},r.textures=Object.assign({},n.textures),r.shaderTextureGroup=null,r}return Va(e,rs),Ma(e,[{key:"setTexture",value:function(t,e){this.textures[t]!==e&&(this.textures[t]=e,this.shaderTextureGroup=null)}},{key:"loadTextureAtlas",value:function(t,e,r){return this.setTexture(t,e),this.textureLibrary.loadTextureAtlas(e,e,r)}},{key:"getTexture",value:function(t){return this.textureLibrary.getTexture(this.textures[t])}},{key:"getTextureAtlas",value:function(t){return this.textureLibrary.getTextureAtlas(this.textures[t])}},{key:"whenTexturesLoaded",value:function(t){this.shaderTextureGroup||(this.shaderTextureGroup=new fs(this.textureLibrary,this.textures)),this.shaderTextureGroup.whenLoaded(t)}},{key:"createSprite",value:function(t,r,n){var i,o;t&&void 0===r?(i=t.width,o=t.height):(i=r,o=n);var a=Ga(Ba(e.prototype),"createSprite",this).call(this,i,o),u=this.spriteHook.setTexCoordsByTexture;return u&&t&&u(a,t),a}}]),e}(),ls=function(t){function e(t,r,n,i){return ja(this,e),Da(this,Ba(e).call(this,t,t+n,r,r+i))}return Va(e,Ya),Ma(e,[{key:"x",get:function(){return this.minX},set:function(t){var e=this.width;this.minX=t,this.maxX=t+e}},{key:"y",get:function(){return this.minY},set:function(t){var e=this.height;this.minY=t,this.maxY=t+e}}]),e}(),vs=Object.freeze({ShaderTool:Ra,AABB2:Ya,DataRef:Ha,ElementIndexArray:Ka,IndexedPrimitive:$a,Mat4:pu,PowerOf2Image:gu,Projection:mu,ProjectionUniform:xu,ResourceLibrary:Du,ShaderAttribVariable:Gu,ShaderContext:Xu,ShaderProgram:Hu,ShaderSource:Uu,ShaderUniformGroup:Ku,ShaderUniformVariable:wu,ShaderVariableBufferGroup:Zu,SpriteGroup:rs,StackedContext:ns,Texture:is,TextureAtlas:as,TextureLibrary:cs,TexturedSpriteGroup:hs,VOArray:Ou,VODescriptor:Bu,VOPool:Qu,Viewport:ls,generateUuid:Xa}),ds=null,ps=function(){function t(e){var r=e.enable,n=e.sfactor,i=void 0===n?null:n,o=e.dfactor,a=void 0===o?null:o;ja(this,t),this.enable=r,this.sfactor=i,this.dfactor=a}return Ma(t,null,[{key:"make",value:function(e,r){null===ds&&(ds=new Map,t.make("off",{enable:!1}),t.make("additive",{enable:!0,sfactor:"SRC_ALPHA",dfactor:"ONE"}),t.make("orderDependent",{enable:!0,sfactor:"SRC_ALPHA",dfactor:"ONE_MINUS_SRC_ALPHA"}));var n=ds.get(e);if(n)return n;if(r){var i,o,a,u,s,c,f=(o=(i=r).enable,a=i.sfactor,u=void 0===a?"":a,s=i.dfactor,c=void 0===s?"":s,JSON.stringify([o,u,c]));return(n=ds.get(f))?(ds.set(e,n),n):(n=new t(r),ds.set(f,n),ds.set(e,n),n)}}}]),Ma(t,[{key:"isEqual",value:function(t){return t&&this.enable===t.enable&&this._sfactor===t.sfactor&&this._dfactor===t.dfactor}},{key:"sfactor",set:function(t){this._sfactor="string"==typeof t?t:void 0},get:function(){return this._sfactor}},{key:"dfactor",set:function(t){this._dfactor="string"==typeof t?t:void 0},get:function(){return this._dfactor}}]),t}(),ys=function(){function t(e){ja(this,t),this.glx=e,this.boundTextures=new Array(e.MAX_TEXTURE_IMAGE_UNITS);for(var r=0;r<this.boundTextures.length;++r)this.boundTextures[r]=null;this.lastBoundTexUnit=0}return Ma(t,[{key:"bindWebGlTexture",value:function(t){var e=this.boundTextures.indexOf(t);if(e<0){for(var r=0;r<this.boundTextures.length;++r)if(!this.boundTextures[r]){e=r,this.boundTextures[r]=t;break}if(e<0){e=this.lastBoundTexUnit;var n=this.boundTextures[e];n&&(n.texUnit=-1),this.lastBoundTexUnit=(this.lastBoundTexUnit+1)%this.glx.MAX_TEXTURE_IMAGE_UNITS}this.glx.activeTexture(e),this.glx.bindTexture2d(t.glTexObj),t.texUnit=e}return e}}]),t}(),gs=function(t){var e=t.gl;t.DEPTH_BITS=e.getParameter(e.DEPTH_BITS),t.STENCIL_BITS=e.getParameter(e.STENCIL_BITS),t.MAX_TEXTURE_IMAGE_UNITS=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),t.boundBuffers.set(e.ARRAY_BUFFER,e.getParameter(e.ARRAY_BUFFER_BINDING)),t.boundBuffers.set(e.ELEMENT_ARRAY_BUFFER,e.getParameter(e.ELEMENT_ARRAY_BUFFER_BINDING)),t.currentProgram=e.getParameter(e.CURRENT_PROGRAM),t.blendEnabled=e.getParameter(e.BLEND)},ms=function(){function t(e){ja(this,t),this.gl=e,this.contextAttributes=e.getContextAttributes(),this.currentBlendMode=null,this.boundBuffers=new Map,gs(this,e),this.boundTextures=new Array(this.MAX_TEXTURE_IMAGE_UNITS);for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]={TEXTURE_2D:null};this.textureUnitManager=new ys(this),this.enabledVertexAttribLocations=[],this.activeTexture(0)}return Ma(t,[{key:"bindBuffer",value:function(t,e){this.boundBuffers.get(t)!==e&&(this.gl.bindBuffer(t,e),this.boundBuffers.set(t,e))}},{key:"activeTexture",value:function(t){var e=this.gl,r=e.TEXTURE0+t;this.activeTexUnit!==r&&(this.activeTexUnit=r,e.activeTexture(this.activeTexUnit))}},{key:"bindTexture2d",value:function(t){var e=this.gl,r=this.boundTextures[this.activeTexUnit-e.TEXTURE0];r.TEXTURE_2D!==t&&(r.TEXTURE_2D=t,e.bindTexture(e.TEXTURE_2D,t))}},{key:"useProgram",value:function(t){return this.currentProgram!==t&&(this.gl.useProgram(t),this.currentProgram=t,!0)}},{key:"enableVertexAttribArrays",value:function(t){var e=this,r=this.gl;this.enabledVertexAttribLocations.filter(function(e){return-1===t.indexOf(e)}).forEach(function(n){r.disableVertexAttribArray(n),e.enabledVertexAttribLocations.splice(t.indexOf(n),1)}),t.forEach(function(t){-1===e.enabledVertexAttribLocations.indexOf(t)&&(r.enableVertexAttribArray(t),e.enabledVertexAttribLocations.push(t))})}},{key:"blend",value:function(t){if(t!==this.currentBlendMode){this.currentBlendMode=t;var e=this.gl;t.enable?(this.blendEnabled||(e.enable(e.BLEND),this.blendEnabled=!0),e.blendFunc(e[t.sfactor],e[t.dfactor])):this.blendEnabled&&(e.disable(e.BLEND),this.blendEnabled=!1)}}}]),t}(),bs=function(t){function e(t){var r;return ja(this,e),(r=Da(this,Ba(e).call(this,t))).isWebGL1=!0,r.ANGLE_instanced_arrays=t.getExtension("ANGLE_instanced_arrays"),r}return Va(e,ms),Ma(e,[{key:"vertexAttribDivisor",value:function(t,e){this.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(t,e)}},{key:"drawElementsInstanced",value:function(t,e,r,n,i){this.ANGLE_instanced_arrays.drawElementsInstancedANGLE(t,e,r,n,i)}}]),e}(),ws=function(t){function e(t){var r;return ja(this,e),(r=Da(this,Ba(e).call(this,t))).isWebGL2=!0,r}return Va(e,ms),Ma(e,[{key:"vertexAttribDivisor",value:function(t,e){this.gl.vertexAttribDivisor(t,e)}},{key:"drawElementsInstanced",value:function(t,e,r,n,i){this.gl.drawElementsInstanced(t,e,r,n,i)}}]),e}(),As=function(t,e){var r,n=function(t){return{alpha:ba(t,"alpha",!1),depth:ba(t,"depth",!0),stencil:ba(t,"stencil",!0),antialias:ba(t,"antialias",!1),premultipliedAlpha:ba(t,"premultipliedAlpha",!0),preserveDrawingBuffer:ba(t,"preserveDrawingBuffer",!1),preferLowPowerToHighPerformance:ba(t,"preferLowPowerToHighPerformance",!1),failIfMajorPerformanceCaveat:ba(t,"failIfMajorPerformanceCaveat",!1)}}(e);if(!ba(e,"disableWebGL2",!1)&&(r=t.getContext("webgl2",n)))return new ws(r);if(null==(r=t.getContext("webgl",n)||t.getContext("experimental-webgl",n)))throw Error("createWebGlContext: could not create webgl context with attributes: ".concat(JSON.stringify(n)));return new bs(r)},xs=r(function(t){var r,n;r=e,n=function(){var t=function(){},e="undefined",r=["trace","debug","info","warn","error"];function n(t,e){var r=t[e];if("function"==typeof r.bind)return r.bind(t);try{return Function.prototype.bind.call(r,t)}catch(e){return function(){return Function.prototype.apply.apply(r,[t,arguments])}}}function i(e,n){for(var i=0;i<r.length;i++){var o=r[i];this[o]=i<e?t:this.methodFactory(o,e,n)}this.log=this.debug}function o(r,o,a){return function(r){return"debug"===r&&(r="log"),typeof console!==e&&(void 0!==console[r]?n(console,r):void 0!==console.log?n(console,"log"):t)}(r)||function(t,r,n){return function(){typeof console!==e&&(i.call(this,r,n),this[t].apply(this,arguments))}}.apply(this,arguments)}function a(t,n,a){var u,s=this,c="loglevel";function f(){var t;if(typeof window!==e){try{t=window.localStorage[c]}catch(t){}if(typeof t===e)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(c)+"=");-1!==n&&(t=/^([^;]+)/.exec(r.slice(n))[1])}catch(t){}return void 0===s.levels[t]&&(t=void 0),t}}t&&(c+=":"+t),s.name=t,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=a||o,s.getLevel=function(){return u},s.setLevel=function(n,o){if("string"==typeof n&&void 0!==s.levels[n.toUpperCase()]&&(n=s.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(u=n,!1!==o&&function(t){var n=(r[t]||"silent").toUpperCase();if(typeof window!==e){try{return void(window.localStorage[c]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(c)+"="+n+";"}catch(t){}}}(n),i.call(s,n,t),typeof console===e&&n<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(t){f()||s.setLevel(t,!1)},s.enableAll=function(t){s.setLevel(s.levels.TRACE,t)},s.disableAll=function(t){s.setLevel(s.levels.SILENT,t)};var h=f();null==h&&(h=null==n?"WARN":n),s.setLevel(h,!1)}var u=new a,s={};u.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=s[t];return e||(e=s[t]=new a(t,u.getLevel(),u.methodFactory)),e};var c=typeof window!==e?window.log:void 0;return u.noConflict=function(){return typeof window!==e&&window.log===u&&(window.log=c),u},u.getLoggers=function(){return s},u},t.exports?t.exports=n():r.log=n()}),Es=function(){function t(e,r,n,i){ja(this,t),this.glx=e;var o=e.gl;this.target=o[r],this.usage=o[n],this.typedArray=i,this.clonedTypedArray=void 0,this.lastTypedArray=void 0,this.glBuffer=o.createBuffer()}return Ma(t,[{key:"bindBuffer",value:function(){this.glx.bindBuffer(this.target,this.glBuffer)}},{key:"bufferData",value:function(t){this.bindBuffer(),this.glx.gl.bufferData(this.target,t||this.typedArray,this.usage)}},{key:"doubleBufferData",value:function(t){var e=t||this.typedArray;void 0===this.clonedTypedArray||e!==this.lastTypedArray?(this.clonedTypedArray=new e.constructor(e.length),this.clonedTypedArray.set(e),this.lastTypedArray=e):this.clonedTypedArray.set(e),this.bufferData(this.clonedTypedArray)}},{key:"deleteBuffer",value:function(){this.glx.gl.deleteBuffer(this.glBuffer)}}]),t}();Es.ARRAY_BUFFER="ARRAY_BUFFER",Es.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",Es.STATIC_DRAW="STATIC_DRAW",Es.DYNAMIC_DRAW="DYNAMIC_DRAW";var _s=xs.getLogger("picimo.renderer.WebGlShader"),Ss=function t(e,r){if(ja(this,t),this.glx=e,!(r instanceof Uu))throw new Error("WebGlShader panic! source must be an instance of ShaderSource!");this.source=r;var n=e.gl;this.shaderType=n[r.type],this.glShader=n.createShader(this.shaderType),function(t){var e=t.glx.gl,r=t.glShader,n=t.source.compile({glx:t.glx});if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var i=e.getShaderInfoLog(r);throw _s.debug("WebGlShader: vertex shader source =>\n".concat(n)),new Error("WebGlShader: gl.compileShader(..) panic!\n".concat(i))}}(this)};var Os=function t(e,r){ja(this,t),this.program=e,this.glx=e.glx;var n=e.glx.gl,i=e.glProgram,o=n.getActiveUniform(i,r),a=o.name,u=o.size,s=o.type;this.name=a,this.size=u,this.type=s,this.location=n.getUniformLocation(i,a),this.setValue=function(t){var e=t.type,r=t.location,n=t.glx.gl;switch(e){case n.FLOAT:return function(t){return n.uniform1f(r,t)};case n.FLOAT_VEC2:return function(t){return n.uniform2f(r,t[0],t[1])};case n.FLOAT_VEC3:return function(t){return n.uniform3f(r,t[0],t[1],t[2])};case n.FLOAT_VEC4:return function(t){return n.uniform4f(r,t[0],t[1],t[2],t[3])};case n.FLOAT_MAT4:return function(t){return n.uniformMatrix4fv(r,n.FALSE,t.mat4)};case n.SAMPLER_2D:return function(t){return n.uniform1i(r,t)};default:throw new Error("WebGlUniform: unknown uniform type:".concat(e))}}(this)},Ts={float32:"FLOAT",int16:"SHORT",int32:"INT",int8:"BYTE",uint16:"UNSIGNED_SHORT",uint32:"UNSIGNED_INT",uint8:"UNSIGNED_BYTE"},Ps=function(){function t(e,r){ja(this,t),this.program=e,this.glx=e.glx;var n=e.glx.gl,i=e.glProgram,o=n.getActiveAttrib(i,r),a=o.name,u=o.size,s=o.type;this.name=a,this.size=u,this.type=s,this.location=n.getAttribLocation(i,a)}return Ma(t,[{key:"vertexAttribPointer",value:function(t){var e=this.glx.gl,r=t.attr[this.name],n=function(t,e){return t[Ts[e]]}(e,r.type);e.vertexAttribPointer(this.location,r.size,n,!1,t.bytesPerVertex,r.byteOffset),t.isInstanced&&this.glx.vertexAttribDivisor(this.location,1)}}]),t}(),ks=xs.getLogger("picimo.renderer.WebGlProgram");var Rs=function(){function t(e,r,n){ja(this,t),this.glx=e,this.vertexShader=r,this.fragmentShader=n;var i=e.gl;this.glProgram=i.createProgram(),function(t,e,r){var n=t.glx.gl,i=t.glProgram;if(n.attachShader(i,e),n.attachShader(i,r),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS))throw new Error("WebGlProgram: link panic!")}(this,this.vertexShader.glShader,this.fragmentShader.glShader),function(t){var e=t.glx.gl,r=e.getProgramParameter(t.glProgram,e.ACTIVE_UNIFORMS);t.uniforms={},t.uniformNames=[];for(var n=0;n<r;++n){var i=new Os(t,n);t.uniforms[i.name]=i,t.uniformNames.push(i.name)}}(this),function(t){var e=t.glx.gl,r=e.getProgramParameter(t.glProgram,e.ACTIVE_ATTRIBUTES);t.attributes={},t.attributeNames=[],t.attributeLocations=[];for(var n=0;n<r;++n){var i=new Ps(t,n);t.attributes[i.name]=i,t.attributeNames.push(i.name),t.attributeLocations.push(i.location)}}(this)}return Ma(t,[{key:"use",value:function(){var t=this.glx;return!!t.useProgram(this.glProgram)&&(t.enableVertexAttribArrays(this.attributeLocations),!0)}},{key:"loadUniforms",value:function(t,e){var r=this,n=!0;return this.uniformNames.forEach(function(i){var o=t.curUniform(i);if(null==o){if(!(o=t.curTex2d(i)))return ks.error("WebGlProgram: could not load uniform:",i),void(n=!1);var a=o.texture;a&&(o.data=e.syncTexture(a).bind())}r.uniforms[i].setValue(o.data)}),n}},{key:"loadAttributes",value:function(t,e){var r=this,n=!0;return this.attributeNames.forEach(function(i){var o=t.curAttrib(i);if(o){var a=o.data;e.syncBuffer(a).bindBuffer(),r.attributes[i].vertexAttribPointer(a.descriptor)}else ks.error("WebGlProgram: could not load attribute:",i),n=!1}),n}}]),t}(),Cs=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];ja(this,t),this.glx=e,this.imgEl=r,this.flipY=n,this.repeatable=i,this.premultiplyAlpha=o,this.nearest=a,this.isInitialized=!1,this.glTexObj=e.gl.createTexture(),this.texUnit=-1}return Ma(t,[{key:"bind",value:function(){return this.glx.textureUnitManager.bindWebGlTexture(this)}},{key:"uploadImageData",value:function(){if(null!=this.imgEl){this.isInitialized||(!function(t){var e=t.glx.gl;t.bind(),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha);var r=t.repeatable?e.REPEAT:e.CLAMP_TO_EDGE;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,r);var n=t.nearest?e.NEAREST:e.LINEAR;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.imgEl.width,t.imgEl.height,0,e.RGBA,e.UNSIGNED_BYTE,null)}(this),this.isInitialized=!0),this.bind();var t=this.glx.gl;t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.imgEl)}}}]),t}(),Is={static:Es.STATIC_DRAW,dynamic:Es.DYNAMIC_DRAW},Ls=function(t,e,r){var n=t.get(e.id);return n||(n=r(e),t.set(e.id,n)),n},js=xs.getLogger("picimo.renderer.WebGlResourceLibrary"),Fs=function(){function t(e){ja(this,t),this.glx=e,this.vertexShader=new Map,this.fragmentShader=new Map,this.shaderProgram=new Map,this.buffer=new Map,this.texture=new Map}return Ma(t,[{key:"loadBuffer",value:function(t){var e=this;return Ls(this.buffer,t,function(){if("VOArray"===t.type||"ElementIndexArray"===t.type){var r=ba(t.hints,"target",Es.ARRAY_BUFFER),n=ba(t.hints,"usage","dynamic"),i=ba(t.hints,"typedArray"),o=new Es(e.glx,r,Is[n],i);return new Ha("WebGlBuffer",o,{id:t.id,serial:0})}js.warn('WebGlResourceLibrary.loadBuffer() ref.type="'.concat(t.type,'" mismatch! (should be "VOArray" or "ElementIndexArray")'))})}},{key:"findBuffer",value:function(t){return this.buffer.get(t.id)}},{key:"freeBuffer",value:function(t){var e=this.findBuffer(t);e&&(this.buffer.delete(e.id),e.data.deleteBuffer())}},{key:"loadVertexShader",value:function(t){var e=this;return Ls(this.vertexShader,t,function(){return new Ss(e.glx,t)})}},{key:"loadFragementShader",value:function(t){var e=this;return Ls(this.fragmentShader,t,function(){return new Ss(e.glx,t)})}},{key:"loadProgram",value:function(t){var e=this;return Ls(this.shaderProgram,t,function(){var r=e.loadVertexShader(t.vertexShader),n=e.loadFragementShader(t.fragmentShader);return new Rs(e.glx,r,n)})}},{key:"loadTexture",value:function(t){var e=this.texture.get(t.id);if(!e){var r=new Cs(this.glx,t.data.imgEl,t.hints.flipY,t.hints.repeatable,t.hints.premultiplyAlpha,t.hints.nearest);e=new Ha("WebGlTexture",r,{id:t.id,serial:0}),this.texture.set(t.id,e)}return e}}]),t}(),Ms=function(t){if("CANVAS"===t.tagName)return t;var e=document.createElement("canvas");return t.appendChild(e),e},Ns=function(t){var e=t.universalContext.get("blend");e&&t.glx.blend(e)},Vs=function(){function t(e,r){ja(this,t),this.domElement=e,this.canvas=Ms(e),this.glx=As(this.canvas,r),this.resources=new Fs(this.glx),this.shaderContext=new Xu,this.universalContext=new ns,this.now=0,this.lastFrameTime=0,this.frameNo=0,this.timeFrameOffset=0,this._pixelRatio=ba(r,"pixelRatio"),this._touchedWithinFrame=new Set,this.shaderGlobals=new Ku({time:0,resolution:[0,0],projection:new mu({pixelRatio:1})}),this.resize()}return Ma(t,[{key:"pushBlendMode",value:function(t){var e=t instanceof ps?t:ps.make(t);return this.universalContext.push("blend",e)}},{key:"popBlendMode",value:function(t){return this.universalContext.pop("blend",t)}},{key:"resize",value:function(){var t=this.canvas,e=this.domElement,r=window.getComputedStyle(t,null),n=(("inline"===r.display||""===r.display)&&e===t?e.parentNode:e)||{clientWidth:t.width,clientHeight:t.height},i=n.clientWidth,o=n.clientHeight;t.style.width="".concat(i,"px"),t.style.height="".concat(o,"px");var a=this.pixelRatio,u=Math.round(i*a),s=Math.round(o*a);u===t.width&&s===t.height||(t.width=u,t.height=s),u===this.width&&s===this.height||(this.width=u,this.height=s,this.shaderGlobals.resolution=[u,s],this.shaderGlobals.projectionUniform.update(u,s))}},{key:"readPixels",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.gl,r=e.drawingBufferWidth,n=e.drawingBufferHeight,i=new Uint8Array(r*n*4);return e.readPixels(0,0,r,n,e.RGBA,e.UNSIGNED_BYTE,i),t&&Array.from({length:n},function(t,e){return i.slice(e*r*4,(e+1)*r*4)}).forEach(function(t,e){return i.set(t,(n-e-1)*r*4)}),new ImageData(Uint8ClampedArray.from(i),r,n)}},{key:"initFrame",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.performance.now();++this.frameNo,this.now=t/1e3,1!==this.frameNo&&(this.timeFrameOffset=this.now-this.lastFrameTime),this.lastFrameTime=this.now,this.shaderGlobals.time=this.now,this._touchedWithinFrame.clear(),this.universalContext.clear(),this.pushBlendMode("orderDependent"),this.shaderContext.clear(),this.shaderGlobals.pushVar(this.shaderContext),this.glx.gl.viewport(0,0,this.width,this.height)}},{key:"syncBuffer",value:function(t){var e=t.ref;e.hasHint("autotouch",!0)&&function(t,e){e.has(t.id)||(e.add(t.id),t.touch())}(e,this._touchedWithinFrame);var r=this.resources.loadBuffer(e);return r.sync(e,function(t){e.hasHint("doubleBuffer",!0)?t.doubleBufferData():t.bufferData()}),r.data}},{key:"syncTexture",value:function(t){var e=t.ref,r=this.resources.loadTexture(e);return r.sync(e,function(t){return t.uploadImageData()}),r.data}},{key:"useShaderProgram",value:function(t){var e=this.resources.loadProgram(t),r=this.shaderContext,n=e.use(),i=e.loadUniforms(r,this),o=e.loadAttributes(r,this);return n&&i&&o}},{key:"drawArrays",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Ns(this);var n=this.glx.gl;n.drawArrays(n[t],r,e)}},{key:"drawIndexed",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Ns(this),this.syncBuffer(e).bindBuffer();var i=this.glx.gl;i.drawElements(i[t],r||e.length,i.UNSIGNED_SHORT,n*e.array.BYTES_PER_ELEMENT)}},{key:"drawIndexedInstanced",value:function(t,e,r,n,i){Ns(this),this.syncBuffer(e).bindBuffer();var o=this.glx,a=o.gl;o.drawElementsInstanced(a[t],r||e.length,a.UNSIGNED_SHORT,n*e.array.BYTES_PER_ELEMENT,i)}},{key:"drawPrimitive",value:function(t,e,r){var n=t.primitiveType,i=t.elementIndexArray,o=i.itemCount;this.drawIndexed(n,i,e*o,r*o)}},{key:"drawPrimitiveIndexed",value:function(t,e,r,n){var i=t.primitiveType,o=t.elementIndexArray,a=o.itemCount;this.drawIndexedInstanced(i,o,e*a,r*a,n)}},{key:"drawSpriteGroup",value:function(t){var e=this,r=function(){var r=t.base;r&&(e.syncBuffer(r.voPool.voArray),e.shaderContext.pushVar(r.voPoolShaderAttribs)),e.syncBuffer(t.voPool.voArray),e.shaderContext.pushVar(t.voPoolShaderAttribs),e.useShaderProgram(t.shaderProgram),r?e.drawPrimitiveIndexed(r.primitive,r.usedCount,0,t.usedCount):e.drawPrimitive(t.primitive,t.usedCount,0)};t instanceof hs?t.whenTexturesLoaded(function(t){e.shaderContext.pushVar(t),r()}):r()}},{key:"pixelRatio",get:function(){return this._pixelRatio||window.devicePixelRatio||1}}]),t}(),Bs=Object.freeze({BlendMode:ps,WebGlRenderer:Vs,WebGlTexture:Cs,WebGlBuffer:Es,WebGlResourceLibrary:Fs}),Us=Object.prototype.hasOwnProperty;var Ds=function(t,e){return null!=t&&Us.call(t,e)},Gs=Array.isArray,Ws="object"==typeof e&&e&&e.Object===Object&&e,zs="object"==typeof self&&self&&self.Object===Object&&self,Ys=Ws||zs||Function("return this")(),Xs=Ys.Symbol,Hs=Object.prototype,Ks=Hs.hasOwnProperty,$s=Hs.toString,qs=Xs?Xs.toStringTag:void 0;var Zs=function(t){var e=Ks.call(t,qs),r=t[qs];try{t[qs]=void 0}catch(t){}var n=$s.call(t);return e?t[qs]=r:delete t[qs],n},Js=Object.prototype.toString;var Qs=function(t){return Js.call(t)},tc="[object Null]",ec="[object Undefined]",rc=Xs?Xs.toStringTag:void 0;var nc=function(t){return null==t?void 0===t?ec:tc:rc&&rc in Object(t)?Zs(t):Qs(t)};var ic=function(t){return null!=t&&"object"==typeof t},oc="[object Symbol]";var ac=function(t){return"symbol"==typeof t||ic(t)&&nc(t)==oc},uc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sc=/^\w*$/;var cc=function(t,e){if(Gs(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!ac(t))||sc.test(t)||!uc.test(t)||null!=e&&t in Object(e)};var fc=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},hc="[object AsyncFunction]",lc="[object Function]",vc="[object GeneratorFunction]",dc="[object Proxy]";var pc,yc=function(t){if(!fc(t))return!1;var e=nc(t);return e==lc||e==vc||e==hc||e==dc},gc=Ys["__core-js_shared__"],mc=(pc=/[^.]+$/.exec(gc&&gc.keys&&gc.keys.IE_PROTO||""))?"Symbol(src)_1."+pc:"";var bc=function(t){return!!mc&&mc in t},wc=Function.prototype.toString;var Ac=function(t){if(null!=t){try{return wc.call(t)}catch(t){}try{return t+""}catch(t){}}return""},xc=/^\[object .+?Constructor\]$/,Ec=Function.prototype,_c=Object.prototype,Sc=Ec.toString,Oc=_c.hasOwnProperty,Tc=RegExp("^"+Sc.call(Oc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Pc=function(t){return!(!fc(t)||bc(t))&&(yc(t)?Tc:xc).test(Ac(t))};var kc=function(t,e){return null==t?void 0:t[e]};var Rc=function(t,e){var r=kc(t,e);return Pc(r)?r:void 0},Cc=Rc(Object,"create");var Ic=function(){this.__data__=Cc?Cc(null):{},this.size=0};var Lc=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},jc="__lodash_hash_undefined__",Fc=Object.prototype.hasOwnProperty;var Mc=function(t){var e=this.__data__;if(Cc){var r=e[t];return r===jc?void 0:r}return Fc.call(e,t)?e[t]:void 0},Nc=Object.prototype.hasOwnProperty;var Vc=function(t){var e=this.__data__;return Cc?void 0!==e[t]:Nc.call(e,t)},Bc="__lodash_hash_undefined__";var Uc=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Cc&&void 0===e?Bc:e,this};function Dc(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Dc.prototype.clear=Ic,Dc.prototype.delete=Lc,Dc.prototype.get=Mc,Dc.prototype.has=Vc,Dc.prototype.set=Uc;var Gc=Dc;var Wc=function(){this.__data__=[],this.size=0};var zc=function(t,e){return t===e||t!=t&&e!=e};var Yc=function(t,e){for(var r=t.length;r--;)if(zc(t[r][0],e))return r;return-1},Xc=Array.prototype.splice;var Hc=function(t){var e=this.__data__,r=Yc(e,t);return!(r<0||(r==e.length-1?e.pop():Xc.call(e,r,1),--this.size,0))};var Kc=function(t){var e=this.__data__,r=Yc(e,t);return r<0?void 0:e[r][1]};var $c=function(t){return Yc(this.__data__,t)>-1};var qc=function(t,e){var r=this.__data__,n=Yc(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function Zc(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Zc.prototype.clear=Wc,Zc.prototype.delete=Hc,Zc.prototype.get=Kc,Zc.prototype.has=$c,Zc.prototype.set=qc;var Jc=Zc,Qc=Rc(Ys,"Map");var tf=function(){this.size=0,this.__data__={hash:new Gc,map:new(Qc||Jc),string:new Gc}};var ef=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var rf=function(t,e){var r=t.__data__;return ef(e)?r["string"==typeof e?"string":"hash"]:r.map};var nf=function(t){var e=rf(this,t).delete(t);return this.size-=e?1:0,e};var of=function(t){return rf(this,t).get(t)};var af=function(t){return rf(this,t).has(t)};var uf=function(t,e){var r=rf(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function sf(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}sf.prototype.clear=tf,sf.prototype.delete=nf,sf.prototype.get=of,sf.prototype.has=af,sf.prototype.set=uf;var cf=sf,ff="Expected a function";function hf(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(ff);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(hf.Cache||cf),r}hf.Cache=cf;var lf=hf,vf=500;var df=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pf=/\\(\\)?/g,yf=function(t){var e=lf(t,function(t){return r.size===vf&&r.clear(),t}),r=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(df,function(t,r,n,i){e.push(n?i.replace(pf,"$1"):r||t)}),e});var gf=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i},mf=1/0,bf=Xs?Xs.prototype:void 0,wf=bf?bf.toString:void 0;var Af=function t(e){if("string"==typeof e)return e;if(Gs(e))return gf(e,t)+"";if(ac(e))return wf?wf.call(e):"";var r=e+"";return"0"==r&&1/e==-mf?"-0":r};var xf=function(t){return null==t?"":Af(t)};var Ef=function(t,e){return Gs(t)?t:cc(t,e)?[t]:yf(xf(t))},_f="[object Arguments]";var Sf=function(t){return ic(t)&&nc(t)==_f},Of=Object.prototype,Tf=Of.hasOwnProperty,Pf=Of.propertyIsEnumerable,kf=Sf(function(){return arguments}())?Sf:function(t){return ic(t)&&Tf.call(t,"callee")&&!Pf.call(t,"callee")},Rf=9007199254740991,Cf=/^(?:0|[1-9]\d*)$/;var If=function(t,e){var r=typeof t;return!!(e=null==e?Rf:e)&&("number"==r||"symbol"!=r&&Cf.test(t))&&t>-1&&t%1==0&&t<e},Lf=9007199254740991;var jf=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Lf},Ff=1/0;var Mf=function(t){if("string"==typeof t||ac(t))return t;var e=t+"";return"0"==e&&1/t==-Ff?"-0":e};var Nf=function(t,e,r){for(var n=-1,i=(e=Ef(e,t)).length,o=!1;++n<i;){var a=Mf(e[n]);if(!(o=null!=t&&r(t,a)))break;t=t[a]}return o||++n!=i?o:!!(i=null==t?0:t.length)&&jf(i)&&If(a,i)&&(Gs(t)||kf(t))};var Vf=function(t,e){return null!=t&&Nf(t,e,Ds)},Bf=function(){try{var t=Rc(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Uf=function(t,e,r){"__proto__"==e&&Bf?Bf(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},Df=Object.prototype.hasOwnProperty;var Gf=function(t,e,r){var n=t[e];Df.call(t,e)&&zc(n,r)&&(void 0!==r||e in t)||Uf(t,e,r)};var Wf=function(t,e,r,n){if(!fc(t))return t;for(var i=-1,o=(e=Ef(e,t)).length,a=o-1,u=t;null!=u&&++i<o;){var s=Mf(e[i]),c=r;if(i!=a){var f=u[s];void 0===(c=n?n(f,s,u):void 0)&&(c=fc(f)?f:If(e[i+1])?[]:{})}Gf(u,s,c),u=u[s]}return t};var zf=function(t,e,r){return null==t?t:Wf(t,e,r)};function Yf(t,e,r,n){this.message=t,this.expected=e,this.found=r,this.location=n,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,Yf)}!function(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}(Yf,Error),Yf.buildMessage=function(t,e){var r={literal:function(t){return'"'+i(t.text)+'"'},class:function(t){var e,r="";for(e=0;e<t.parts.length;e++)r+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function i(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+n(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+n(t)})}return"Expected "+function(t){var e,n,i,o=new Array(t.length);for(e=0;e<t.length;e++)o[e]=(i=t[e],r[i.type](i));if(o.sort(),o.length>0){for(e=1,n=1;e<o.length;e++)o[e-1]!==o[e]&&(o[n]=o[e],n++);o.length=n}switch(o.length){case 1:return o[0];case 2:return o[0]+" or "+o[1];default:return o.slice(0,-1).join(", ")+", or "+o[o.length-1]}}(t)+" but "+function(t){return t?'"'+i(t)+'"':"end of input"}(e)+" found."};var Xf=function(t,e){e=void 0!==e?e:{};var r,n={},i={start:Or},o=Or,a=xr("picimo-lang"),u=function(t){return tn(t)},s=xr("top-level statement"),c=function(t){return t},f=xr("statement"),h=function(t,e,r,n){return{verb:r,subject:n}},l=function(t,e,r,n){return n.type="declaration",n.name=e,n.declarationType=t,r&&(n.verb=r.verb,n.subject=r.subject),n},v="vertexobject",d=wr("VertexObject",!0),p="primitive",y=wr("Primitive",!0),g="spritegroup",m=wr("SpriteGroup",!0),b=function(t){return t.toLowerCase()},w="instantiates",A=wr("instantiates",!0),x=function(t){return t.toLowerCase()},E=function(t,e,r){return r.name=t,e&&(r.args=e),r},_=function(t,e){return e},S=function(t,e,r){var n={type:"dataBlock",data:tn(r)};return t&&(n.dataType=t),e.length&&e.forEach(en.bind(null,n)),n},O="{",T=wr("{",!1),P="}",k=wr("}",!1),R=xr("constant statement"),C="=",I=wr("=",!1),L=function(t,e){!function(t,e){Qr.hasOption(t)||Qr.writeOption(t,e)}(t,e)},j=xr("property-call statement"),F="@",M=wr("@",!1),N=function(t,e){var r={type:"propertyCall",name:t};return e&&(r.args=e),r},V=xr("property call arguments list"),B="(",U=wr("(",!1),D=",",G=wr(",",!1),W=function(t,e){return e},z=")",Y=wr(")",!1),X=function(t,e){return[t].concat(e)},H=xr("property call argument"),K=function(t){return t},$=xr("named arguments list"),q=xr("named argument"),Z=":",J=wr(":",!1),Q=function(t,e){return{name:t,value:e}},tt=xr("data statement"),et=function(t,e,r,n){return n},rt=function(t,e,r,n,i,o){return o},nt=function(t,e,r,n,i,o){var a={type:"data",name:t};return e&&(a.args=e),null!=i&&(a.value=i),r&&(a.valueType=r),n.length&&n.forEach(en.bind(null,a)),o.length&&o.forEach(en.bind(null,a)),a},it=xr("data value type"),ot="float32",at=wr("float32",!1),ut="int32",st=wr("int32",!1),ct="int16",ft=wr("int16",!1),ht="int8",lt=wr("int8",!1),vt="uint32",dt=wr("uint32",!1),pt="uint16",yt=wr("uint16",!1),gt="uint8",mt=wr("uint8",!1),bt=function(t){return t},wt=function(t){return t},At="false",xt=wr("false",!1),Et=function(){return!1},_t="no",St=wr("no",!1),Ot="off",Tt=wr("off",!1),Pt="true",kt=wr("true",!1),Rt=function(){return!0},Ct="on",It=wr("on",!1),Lt="yes",jt=wr("yes",!1),Ft="null",Mt=wr("null",!1),Nt=function(){return null},Vt=function(t){return t},Bt=xr("value array"),Ut=function(t,e){return e},Dt=function(t,e){return[t].concat(e)},Gt=function(t){return t||[]},Wt="[",zt=wr("[",!1),Yt="]",Xt=wr("]",!1),Ht="+",Kt=wr("+",!1),$t="-",qt=wr("-",!1),Zt=function(t,e){return e.reduce(function(t,e){return"+"===e[1]?t+e[3]:"-"===e[1]?t-e[3]:void 0},t)},Jt="*",Qt=wr("*",!1),te="/",ee=wr("/",!1),re=function(t,e){return e.reduce(function(t,e){return"*"===e[1]?t*e[3]:"/"===e[1]?t/e[3]:void 0},t)},ne=function(t){return t},ie=function(t,e){var r=function(t){return Qr.hasOption(t)?Qr.readOption(t):t}(e);return t?-r:r},oe=xr("number"),ae=function(){return parseFloat(br())},ue=".",se=wr(".",!1),ce=/^[1-9]/,fe=Ar([["1","9"]],!1,!1),he=/^[eE]/,le=Ar(["e","E"],!1,!1),ve="0",de=wr("0",!1),pe=xr("string"),ye=function(t){return t.join("")},ge='"',me=wr('"',!1),be="\\",we=wr("\\",!1),Ae="b",xe=wr("b",!1),Ee=function(){return"\b"},_e="f",Se=wr("f",!1),Oe=function(){return"\f"},Te="n",Pe=wr("n",!1),ke=function(){return"\n"},Re="r",Ce=wr("r",!1),Ie=function(){return"\r"},Le="t",je=wr("t",!1),Fe=function(){return"\t"},Me="u",Ne=wr("u",!1),Ve=function(t){return String.fromCharCode(parseInt(t,16))},Be=function(t){return t},Ue=/^[^\0-\x1F"\\]/,De=Ar([["\0",""],'"',"\\"],!0,!1),Ge=/^[a-z]/i,We=Ar([["a","z"]],!1,!0),ze=function(t){return br()},Ye=function(t,e){return t+(e&&function t(e){return tn(e).reduce(function(e,r){return e+(Array.isArray(r)?t(r):r)},"")}(e)||"")},Xe=/^[_a-z0-9\-]/i,He=Ar(["_",["a","z"],["0","9"],"-"],!1,!0),Ke=xr("whitespaces with optional line breaks"),$e=/^[ \t\n\r]/,qe=Ar([" ","\t","\n","\r"],!1,!1),Ze=xr("whitespaces"),Je=/^[ \t]/,Qe=Ar([" ","\t"],!1,!1),tr=xr("new line"),er="\n",rr=wr("\n",!1),nr="\r\n",ir=wr("\r\n",!1),or="\r",ar=wr("\r",!1),ur="\f",sr=wr("\f",!1),cr=/^[0-9]/,fr=Ar([["0","9"]],!1,!1),hr=/^[0-9a-f]/i,lr=Ar([["0","9"],["a","f"]],!1,!0),vr=0,dr=0,pr=[{line:1,column:1}],yr=0,gr=[],mr=0;if("startRule"in e){if(!(e.startRule in i))throw new Error("Can't start parsing from rule \""+e.startRule+'".');o=i[e.startRule]}function br(){return t.substring(dr,vr)}function wr(t,e){return{type:"literal",text:t,ignoreCase:e}}function Ar(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function xr(t){return{type:"other",description:t}}function Er(e){var r,n=pr[e];if(n)return n;for(r=e-1;!pr[r];)r--;for(n={line:(n=pr[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return pr[e]=n,n}function _r(t,e){var r=Er(t),n=Er(e);return{start:{offset:t,line:r.line,column:r.column},end:{offset:e,line:n.line,column:n.column}}}function Sr(t){vr<yr||(vr>yr&&(yr=vr,gr=[]),gr.push(t))}function Or(){var t,e,r;if(mr++,t=vr,Yr()!==n){for(e=[],r=Tr();r!==n;)e.push(r),r=Tr();e!==n&&(r=Yr())!==n?(dr=t,t=u(e)):(vr=t,t=n)}else vr=t,t=n;return mr--,t===n&&0===mr&&Sr(a),t}function Tr(){var e,r;return mr++,e=vr,(r=function(){var e,r,i,o;return mr++,e=vr,(r=Wr())!==n&&Xr()!==n?(61===t.charCodeAt(vr)?(i=C,vr++):(i=n,0===mr&&Sr(I)),i!==n&&Xr()!==n&&(o=Fr())!==n?(dr=e,r=L(r,o),e=r):(vr=e,e=n)):(vr=e,e=n),mr--,e===n&&(r=n,0===mr&&Sr(R)),e}())===n&&(r=function(){var e,r,i,o,a,u,s;return e=vr,(r=function(){var e,r;return e=vr,t.substr(vr,12).toLowerCase()===v?(r=t.substr(vr,12),vr+=12):(r=n,0===mr&&Sr(d)),r===n&&(t.substr(vr,9).toLowerCase()===p?(r=t.substr(vr,9),vr+=9):(r=n,0===mr&&Sr(y)),r===n&&(t.substr(vr,11).toLowerCase()===g?(r=t.substr(vr,11),vr+=11):(r=n,0===mr&&Sr(m)))),r!==n&&(dr=e,r=b(r)),e=r}())!==n&&Xr()!==n&&(i=Wr())!==n&&Xr()!==n?(o=vr,(a=function(){var e,r;return e=vr,t.substr(vr,12).toLowerCase()===w?(r=t.substr(vr,12),vr+=12):(r=n,0===mr&&Sr(A)),r!==n&&(dr=e,r=x(r)),e=r}())!==n&&(u=Xr())!==n&&(s=Wr())!==n?(dr=o,a=h(r,i,a,s),o=a):(vr=o,o=n),o===n&&(o=null),o!==n&&(a=Xr())!==n&&(u=kr())!==n?(dr=e,r=l(r,i,o,u),e=r):(vr=e,e=n)):(vr=e,e=n),e}()),r!==n&&Hr()!==n&&Yr()!==n?(dr=e,e=r=c(r)):(vr=e,e=n),mr--,e===n&&(r=n,0===mr&&Sr(s)),e}function Pr(){var t,e;return mr++,t=vr,(e=function(){var t,e,r,i;return t=vr,(e=Wr())!==n&&Xr()!==n?((r=Ir())===n&&(r=null),r!==n&&Xr()!==n&&(i=kr())!==n?(dr=t,e=E(e,r,i),t=e):(vr=t,t=n)):(vr=t,t=n),t}())===n&&(e=function(){var t,e,r,i,o,a,u,s,c,f,h;if(mr++,t=vr,(e=Wr())!==n)if(Xr()!==n)if((r=Ir())===n&&(r=null),r!==n)if(Xr()!==n)if((i=jr())===n&&(i=null),i!==n){for(o=[],a=vr,(u=Xr())!==n&&(s=Rr())!==n?(dr=a,u=et(e,r,i,s),a=u):(vr=a,a=n);a!==n;)o.push(a),a=vr,(u=Xr())!==n&&(s=Rr())!==n?(dr=a,u=et(e,r,i,s),a=u):(vr=a,a=n);if(o!==n)if((a=Xr())!==n)if((u=Fr())===n&&(u=null),u!==n){for(s=[],c=vr,(f=Xr())!==n&&(h=Rr())!==n?(dr=c,f=rt(e,r,i,o,u,h),c=f):(vr=c,c=n);c!==n;)s.push(c),c=vr,(f=Xr())!==n&&(h=Rr())!==n?(dr=c,f=rt(e,r,i,o,u,h),c=f):(vr=c,c=n);s!==n?(dr=t,e=nt(e,r,i,o,u,s),t=e):(vr=t,t=n)}else vr=t,t=n;else vr=t,t=n;else vr=t,t=n}else vr=t,t=n;else vr=t,t=n;else vr=t,t=n;else vr=t,t=n;else vr=t,t=n;return mr--,t===n&&(e=n,0===mr&&Sr(tt)),t}())===n&&(e=Rr()),e!==n&&Hr()!==n&&Yr()!==n?(dr=t,t=e=c(e)):(vr=t,t=n),mr--,t===n&&(e=n,0===mr&&Sr(f)),t}function kr(){var e,r,i,o,a,u;if(e=vr,(r=jr())===n&&(r=null),r!==n){for(i=[],o=vr,(a=Xr())!==n&&(u=Rr())!==n?(dr=o,o=a=_(r,u)):(vr=o,o=n);o!==n;)i.push(o),o=vr,(a=Xr())!==n&&(u=Rr())!==n?(dr=o,o=a=_(r,u)):(vr=o,o=n);if(i!==n)if((o=function(){var e,r,i,o;return e=vr,(r=Xr())!==n?(123===t.charCodeAt(vr)?(i=O,vr++):(i=n,0===mr&&Sr(T)),i!==n&&(o=Yr())!==n?e=r=[r,i,o]:(vr=e,e=n)):(vr=e,e=n),e}())!==n){for(a=[],u=Pr();u!==n;)a.push(u),u=Pr();a!==n&&(u=function(){var e,r,i,o;return e=vr,(r=Yr())!==n?(125===t.charCodeAt(vr)?(i=P,vr++):(i=n,0===mr&&Sr(k)),i!==n&&(o=Xr())!==n?e=r=[r,i,o]:(vr=e,e=n)):(vr=e,e=n),e}())!==n?(dr=e,e=r=S(r,i,a)):(vr=e,e=n)}else vr=e,e=n;else vr=e,e=n}else vr=e,e=n;return e}function Rr(){var e,r,i,o;return mr++,e=vr,64===t.charCodeAt(vr)?(r=F,vr++):(r=n,0===mr&&Sr(M)),r!==n&&(i=Wr())!==n&&Xr()!==n?((o=function(){var e,r,i,o,a,u,s;if(mr++,e=vr,40===t.charCodeAt(vr)?(r=B,vr++):(r=n,0===mr&&Sr(U)),r!==n)if((i=Cr())!==n){for(o=[],a=vr,44===t.charCodeAt(vr)?(u=D,vr++):(u=n,0===mr&&Sr(G)),u!==n&&Xr()!==n&&(s=Cr())!==n?(dr=a,u=W(i,s),a=u):(vr=a,a=n);a!==n;)o.push(a),a=vr,44===t.charCodeAt(vr)?(u=D,vr++):(u=n,0===mr&&Sr(G)),u!==n&&Xr()!==n&&(s=Cr())!==n?(dr=a,u=W(i,s),a=u):(vr=a,a=n);o!==n?(41===t.charCodeAt(vr)?(a=z,vr++):(a=n,0===mr&&Sr(Y)),a!==n?(dr=e,r=X(i,o),e=r):(vr=e,e=n)):(vr=e,e=n)}else vr=e,e=n;else vr=e,e=n;return mr--,e===n&&(r=n,0===mr&&Sr(V)),e}())===n&&(o=null),o!==n?(dr=e,e=r=N(i,o)):(vr=e,e=n)):(vr=e,e=n),mr--,e===n&&(r=n,0===mr&&Sr(j)),e}function Cr(){var t,e;return mr++,t=vr,Xr()!==n?((e=Fr())===n&&(e=Wr()),e!==n&&Xr()!==n?(dr=t,t=K(e)):(vr=t,t=n)):(vr=t,t=n),mr--,t===n&&0===mr&&Sr(H),t}function Ir(){var e,r,i,o,a,u,s;if(mr++,e=vr,40===t.charCodeAt(vr)?(r=B,vr++):(r=n,0===mr&&Sr(U)),r!==n)if((i=Lr())!==n){for(o=[],a=vr,44===t.charCodeAt(vr)?(u=D,vr++):(u=n,0===mr&&Sr(G)),u!==n&&Xr()!==n&&(s=Lr())!==n?(dr=a,a=u=W(i,s)):(vr=a,a=n);a!==n;)o.push(a),a=vr,44===t.charCodeAt(vr)?(u=D,vr++):(u=n,0===mr&&Sr(G)),u!==n&&Xr()!==n&&(s=Lr())!==n?(dr=a,a=u=W(i,s)):(vr=a,a=n);o!==n?(41===t.charCodeAt(vr)?(a=z,vr++):(a=n,0===mr&&Sr(Y)),a!==n?(dr=e,e=r=X(i,o)):(vr=e,e=n)):(vr=e,e=n)}else vr=e,e=n;else vr=e,e=n;return mr--,e===n&&(r=n,0===mr&&Sr($)),e}function Lr(){var e,r,i,o;return mr++,e=vr,Xr()!==n&&(r=Wr())!==n&&Xr()!==n?(58===t.charCodeAt(vr)?(i=Z,vr++):(i=n,0===mr&&Sr(J)),i!==n&&Xr()!==n&&(o=Fr())!==n&&Xr()!==n?(dr=e,e=Q(r,o)):(vr=e,e=n)):(vr=e,e=n),mr--,e===n&&0===mr&&Sr(q),e}function jr(){var e,r,i;return mr++,e=vr,58===t.charCodeAt(vr)?(r=Z,vr++):(r=n,0===mr&&Sr(J)),r!==n&&Xr()!==n?(t.substr(vr,7)===ot?(i=ot,vr+=7):(i=n,0===mr&&Sr(at)),i===n&&(t.substr(vr,5)===ut?(i=ut,vr+=5):(i=n,0===mr&&Sr(st)),i===n&&(t.substr(vr,5)===ct?(i=ct,vr+=5):(i=n,0===mr&&Sr(ft)),i===n&&(t.substr(vr,4)===ht?(i=ht,vr+=4):(i=n,0===mr&&Sr(lt)),i===n&&(t.substr(vr,6)===vt?(i=vt,vr+=6):(i=n,0===mr&&Sr(dt)),i===n&&(t.substr(vr,6)===pt?(i=pt,vr+=6):(i=n,0===mr&&Sr(yt)),i===n&&(t.substr(vr,5)===gt?(i=gt,vr+=5):(i=n,0===mr&&Sr(mt)))))))),i!==n?(dr=e,e=r=bt(i)):(vr=e,e=n)):(vr=e,e=n),mr--,e===n&&(r=n,0===mr&&Sr(it)),e}function Fr(){var e,r;return e=vr,Xr()!==n?((r=function(){var e,r;return e=vr,t.substr(vr,4)===Ft?(r=Ft,vr+=4):(r=n,0===mr&&Sr(Mt)),r!==n&&(dr=e,r=Nt()),e=r}())===n&&(r=function(){var e,r;return e=vr,t.substr(vr,5)===At?(r=At,vr+=5):(r=n,0===mr&&Sr(xt)),r!==n&&(dr=e,r=Et()),(e=r)===n&&(e=vr,t.substr(vr,2)===_t?(r=_t,vr+=2):(r=n,0===mr&&Sr(St)),r!==n&&(dr=e,r=Et()),(e=r)===n&&(e=vr,t.substr(vr,3)===Ot?(r=Ot,vr+=3):(r=n,0===mr&&Sr(Tt)),r!==n&&(dr=e,r=Et()),e=r)),e}())===n&&(r=function(){var e,r;return e=vr,t.substr(vr,4)===Pt?(r=Pt,vr+=4):(r=n,0===mr&&Sr(kt)),r!==n&&(dr=e,r=Rt()),(e=r)===n&&(e=vr,t.substr(vr,2)===Ct?(r=Ct,vr+=2):(r=n,0===mr&&Sr(It)),r!==n&&(dr=e,r=Rt()),(e=r)===n&&(e=vr,t.substr(vr,3)===Lt?(r=Lt,vr+=3):(r=n,0===mr&&Sr(jt)),r!==n&&(dr=e,r=Rt()),e=r)),e}())===n&&(r=function(){var e,r,i,o,a,u,s,c;if(mr++,e=vr,(r=function(){var e,r,i,o;return e=vr,(r=Xr())!==n?(91===t.charCodeAt(vr)?(i=Wt,vr++):(i=n,0===mr&&Sr(zt)),i!==n&&(o=Yr())!==n?e=r=[r,i,o]:(vr=e,e=n)):(vr=e,e=n),e}())!==n){if(i=vr,(o=Fr())!==n){for(a=[],u=vr,(s=Nr())!==n&&(c=Fr())!==n?(dr=u,s=Ut(o,c),u=s):(vr=u,u=n);u!==n;)a.push(u),u=vr,(s=Nr())!==n&&(c=Fr())!==n?(dr=u,s=Ut(o,c),u=s):(vr=u,u=n);a!==n?(dr=i,o=Dt(o,a),i=o):(vr=i,i=n)}else vr=i,i=n;i===n&&(i=null),i!==n&&(o=function(){var e,r,i,o,a,u;return e=vr,(r=Yr())!==n?(44===t.charCodeAt(vr)?(i=D,vr++):(i=n,0===mr&&Sr(G)),i===n&&(i=null),i!==n&&(o=Yr())!==n?(93===t.charCodeAt(vr)?(a=Yt,vr++):(a=n,0===mr&&Sr(Xt)),a!==n&&(u=Xr())!==n?e=r=[r,i,o,a,u]:(vr=e,e=n)):(vr=e,e=n)):(vr=e,e=n),e}())!==n?(dr=e,r=Gt(i),e=r):(vr=e,e=n)}else vr=e,e=n;return mr--,e===n&&(r=n,0===mr&&Sr(Bt)),e}())===n&&(r=Mr())===n&&(r=function(){var t,e,r,i;if(mr++,t=vr,(e=Gr())!==n){for(r=[],i=Dr();i!==n;)r.push(i),i=Dr();r!==n&&(i=Gr())!==n?(dr=t,e=ye(r),t=e):(vr=t,t=n)}else vr=t,t=n;return mr--,t===n&&(e=n,0===mr&&Sr(pe)),t}()),r!==n&&Xr()!==n?(dr=e,e=wt(r)):(vr=e,e=n)):(vr=e,e=n),e}function Mr(){var e,r;return e=vr,(r=function(){var e,r,i,o,a,u,s,c;if(e=vr,(r=Vr())!==n){for(i=[],o=vr,(a=Xr())!==n?(43===t.charCodeAt(vr)?(u=Ht,vr++):(u=n,0===mr&&Sr(Kt)),u===n&&(45===t.charCodeAt(vr)?(u=$t,vr++):(u=n,0===mr&&Sr(qt))),u!==n&&(s=Xr())!==n&&(c=Vr())!==n?o=a=[a,u,s,c]:(vr=o,o=n)):(vr=o,o=n);o!==n;)i.push(o),o=vr,(a=Xr())!==n?(43===t.charCodeAt(vr)?(u=Ht,vr++):(u=n,0===mr&&Sr(Kt)),u===n&&(45===t.charCodeAt(vr)?(u=$t,vr++):(u=n,0===mr&&Sr(qt))),u!==n&&(s=Xr())!==n&&(c=Vr())!==n?o=a=[a,u,s,c]:(vr=o,o=n)):(vr=o,o=n);i!==n?(dr=e,r=Zt(r,i),e=r):(vr=e,e=n)}else vr=e,e=n;return e}())!==n&&(dr=e,r=Vt(r)),e=r}function Nr(){var e,r,i,o;return e=vr,(r=Yr())!==n?(44===t.charCodeAt(vr)?(i=D,vr++):(i=n,0===mr&&Sr(G)),i!==n&&(o=Yr())!==n?e=r=[r,i,o]:(vr=e,e=n)):(vr=e,e=n),e}function Vr(){var e,r,i,o,a,u,s,c;if(e=vr,(r=Br())!==n){for(i=[],o=vr,(a=Xr())!==n?(42===t.charCodeAt(vr)?(u=Jt,vr++):(u=n,0===mr&&Sr(Qt)),u===n&&(47===t.charCodeAt(vr)?(u=te,vr++):(u=n,0===mr&&Sr(ee))),u!==n&&(s=Xr())!==n&&(c=Br())!==n?o=a=[a,u,s,c]:(vr=o,o=n)):(vr=o,o=n);o!==n;)i.push(o),o=vr,(a=Xr())!==n?(42===t.charCodeAt(vr)?(u=Jt,vr++):(u=n,0===mr&&Sr(Qt)),u===n&&(47===t.charCodeAt(vr)?(u=te,vr++):(u=n,0===mr&&Sr(ee))),u!==n&&(s=Xr())!==n&&(c=Br())!==n?o=a=[a,u,s,c]:(vr=o,o=n)):(vr=o,o=n);i!==n?(dr=e,e=r=re(r,i)):(vr=e,e=n)}else vr=e,e=n;return e}function Br(){var e,r,i,o,a;return e=vr,40===t.charCodeAt(vr)?(r=B,vr++):(r=n,0===mr&&Sr(U)),r!==n&&(i=Xr())!==n&&(o=Mr())!==n&&Xr()!==n?(41===t.charCodeAt(vr)?(a=z,vr++):(a=n,0===mr&&Sr(Y)),a!==n?(dr=e,e=r=ne(o)):(vr=e,e=n)):(vr=e,e=n),e===n&&(e=function(){var e,r,i,o;return mr++,e=vr,(r=Ur())===n&&(r=null),r!==n&&function(){var e,r,i,o;if((e=function(){var e;return 48===t.charCodeAt(vr)?(e=ve,vr++):(e=n,0===mr&&Sr(de)),e}())===n)if(e=vr,(r=function(){var e;return ce.test(t.charAt(vr))?(e=t.charAt(vr),vr++):(e=n,0===mr&&Sr(fe)),e}())!==n){for(i=[],o=Kr();o!==n;)i.push(o),o=Kr();i!==n?e=r=[r,i]:(vr=e,e=n)}else vr=e,e=n;return e}()!==n?((i=function(){var e,r,i,o;if(e=vr,(r=function(){var e;return 46===t.charCodeAt(vr)?(e=ue,vr++):(e=n,0===mr&&Sr(se)),e}())!==n){if(i=[],(o=Kr())!==n)for(;o!==n;)i.push(o),o=Kr();else i=n;i!==n?e=r=[r,i]:(vr=e,e=n)}else vr=e,e=n;return e}())===n&&(i=null),i!==n?((o=function(){var e,r,i,o,a;if(e=vr,(r=function(){var e;return he.test(t.charAt(vr))?(e=t.charAt(vr),vr++):(e=n,0===mr&&Sr(le)),e}())!==n)if((i=Ur())===n&&(i=function(){var e;return 43===t.charCodeAt(vr)?(e=Ht,vr++):(e=n,0===mr&&Sr(Kt)),e}()),i===n&&(i=null),i!==n){if(o=[],(a=Kr())!==n)for(;a!==n;)o.push(a),a=Kr();else o=n;o!==n?e=r=[r,i,o]:(vr=e,e=n)}else vr=e,e=n;else vr=e,e=n;return e}())===n&&(o=null),o!==n?(dr=e,r=ae(),e=r):(vr=e,e=n)):(vr=e,e=n)):(vr=e,e=n),mr--,e===n&&(r=n,0===mr&&Sr(oe)),e}())===n&&(e=vr,(r=Ur())===n&&(r=null),r!==n&&(i=Wr())!==n?(dr=e,e=r=ie(r,i)):(vr=e,e=n)),e}function Ur(){var e;return 45===t.charCodeAt(vr)?(e=$t,vr++):(e=n,0===mr&&Sr(qt)),e}function Dr(){var e,r,i,o,a,u,s,c,f;return(e=function(){var e;return Ue.test(t.charAt(vr))?(e=t.charAt(vr),vr++):(e=n,0===mr&&Sr(De)),e}())===n&&(e=vr,function(){var e;return 92===t.charCodeAt(vr)?(e=be,vr++):(e=n,0===mr&&Sr(we)),e}()!==n?(34===t.charCodeAt(vr)?(r=ge,vr++):(r=n,0===mr&&Sr(me)),r===n&&(92===t.charCodeAt(vr)?(r=be,vr++):(r=n,0===mr&&Sr(we)),r===n&&(47===t.charCodeAt(vr)?(r=te,vr++):(r=n,0===mr&&Sr(ee)),r===n&&(r=vr,98===t.charCodeAt(vr)?(i=Ae,vr++):(i=n,0===mr&&Sr(xe)),i!==n&&(dr=r,i=Ee()),(r=i)===n&&(r=vr,102===t.charCodeAt(vr)?(i=_e,vr++):(i=n,0===mr&&Sr(Se)),i!==n&&(dr=r,i=Oe()),(r=i)===n&&(r=vr,110===t.charCodeAt(vr)?(i=Te,vr++):(i=n,0===mr&&Sr(Pe)),i!==n&&(dr=r,i=ke()),(r=i)===n&&(r=vr,114===t.charCodeAt(vr)?(i=Re,vr++):(i=n,0===mr&&Sr(Ce)),i!==n&&(dr=r,i=Ie()),(r=i)===n&&(r=vr,116===t.charCodeAt(vr)?(i=Le,vr++):(i=n,0===mr&&Sr(je)),i!==n&&(dr=r,i=Fe()),(r=i)===n&&(r=vr,117===t.charCodeAt(vr)?(i=Me,vr++):(i=n,0===mr&&Sr(Ne)),i!==n?(o=vr,a=vr,(u=$r())!==n&&(s=$r())!==n&&(c=$r())!==n&&(f=$r())!==n?a=u=[u,s,c,f]:(vr=a,a=n),(o=a!==n?t.substring(o,vr):a)!==n?(dr=r,r=i=Ve(o)):(vr=r,r=n)):(vr=r,r=n))))))))),r!==n?(dr=e,e=Be(r)):(vr=e,e=n)):(vr=e,e=n)),e}function Gr(){var e;return 34===t.charCodeAt(vr)?(e=ge,vr++):(e=n,0===mr&&Sr(me)),e}function Wr(){var e,r,i,o,a,u,s,c,f,h;if(e=vr,Ge.test(t.charAt(vr))?(r=t.charAt(vr),vr++):(r=n,0===mr&&Sr(We)),r!==n){if(i=[],o=vr,46===t.charCodeAt(vr)?(a=ue,vr++):(a=n,0===mr&&Sr(se)),a===n&&(a=null),a!==n)if((u=zr())!==n){if(s=vr,46===t.charCodeAt(vr)?(c=ue,vr++):(c=n,0===mr&&Sr(se)),c!==n){if(f=[],(h=zr())!==n)for(;h!==n;)f.push(h),h=zr();else f=n;f!==n?(dr=s,s=c=ze(r)):(vr=s,s=n)}else vr=s,s=n;s===n&&(s=null),s!==n?o=a=[a,u,s]:(vr=o,o=n)}else vr=o,o=n;else vr=o,o=n;for(;o!==n;)if(i.push(o),o=vr,46===t.charCodeAt(vr)?(a=ue,vr++):(a=n,0===mr&&Sr(se)),a===n&&(a=null),a!==n)if((u=zr())!==n){if(s=vr,46===t.charCodeAt(vr)?(c=ue,vr++):(c=n,0===mr&&Sr(se)),c!==n){if(f=[],(h=zr())!==n)for(;h!==n;)f.push(h),h=zr();else f=n;f!==n?(dr=s,s=c=ze(r)):(vr=s,s=n)}else vr=s,s=n;s===n&&(s=null),s!==n?o=a=[a,u,s]:(vr=o,o=n)}else vr=o,o=n;else vr=o,o=n;i!==n?(dr=e,e=r=Ye(r,i)):(vr=e,e=n)}else vr=e,e=n;return e}function zr(){var e;return Xe.test(t.charAt(vr))?(e=t.charAt(vr),vr++):(e=n,0===mr&&Sr(He)),e}function Yr(){var e,r;for(mr++,e=[],$e.test(t.charAt(vr))?(r=t.charAt(vr),vr++):(r=n,0===mr&&Sr(qe));r!==n;)e.push(r),$e.test(t.charAt(vr))?(r=t.charAt(vr),vr++):(r=n,0===mr&&Sr(qe));return mr--,e===n&&(r=n,0===mr&&Sr(Ke)),e}function Xr(){var e,r;for(mr++,e=[],Je.test(t.charAt(vr))?(r=t.charAt(vr),vr++):(r=n,0===mr&&Sr(Qe));r!==n;)e.push(r),Je.test(t.charAt(vr))?(r=t.charAt(vr),vr++):(r=n,0===mr&&Sr(Qe));return mr--,e===n&&(r=n,0===mr&&Sr(Ze)),e}function Hr(){var e,r,i;return mr++,e=vr,(r=Xr())!==n?(10===t.charCodeAt(vr)?(i=er,vr++):(i=n,0===mr&&Sr(rr)),i!==n?e=r=[r,i]:(vr=e,e=n)):(vr=e,e=n),e===n&&(e=vr,(r=Xr())!==n?(t.substr(vr,2)===nr?(i=nr,vr+=2):(i=n,0===mr&&Sr(ir)),i!==n?e=r=[r,i]:(vr=e,e=n)):(vr=e,e=n),e===n&&(e=vr,(r=Xr())!==n?(13===t.charCodeAt(vr)?(i=or,vr++):(i=n,0===mr&&Sr(ar)),i!==n?e=r=[r,i]:(vr=e,e=n)):(vr=e,e=n),e===n&&(e=vr,(r=Xr())!==n?(12===t.charCodeAt(vr)?(i=ur,vr++):(i=n,0===mr&&Sr(sr)),i!==n?e=r=[r,i]:(vr=e,e=n)):(vr=e,e=n)))),mr--,e===n&&(r=n,0===mr&&Sr(tr)),e}function Kr(){var e;return cr.test(t.charAt(vr))?(e=t.charAt(vr),vr++):(e=n,0===mr&&Sr(fr)),e}function $r(){var e;return hr.test(t.charAt(vr))?(e=t.charAt(vr),vr++):(e=n,0===mr&&Sr(lr)),e}var qr,Zr,Jr,Qr=e.ctx;function tn(t){return t.filter(function(t){return Boolean(t)})}function en(t,e){t.annotations||(t.annotations=[]),t.annotations.push(e)}if((r=o())!==n&&vr===t.length)return r;throw r!==n&&vr<t.length&&Sr({type:"end"}),qr=gr,Zr=yr<t.length?t.charAt(yr):null,Jr=yr<t.length?_r(yr,yr+1):_r(yr,yr),new Yf(Yf.buildMessage(qr,Zr),qr,Zr,Jr)};var Hf,Kf=function(t){for(var e=-1,r=null==t?0:t.length,n=0,i=[];++e<r;){var o=t[e];o&&(i[n++]=o)}return i},$f=function(t,e,r){if(t){var n=t.find(function(t){var r=t.type,n=t.name;return"propertyCall"===r&&n===e});return void 0!==n&&r&&r(n),n}},qf=function(t,e){return Boolean($f(t,e))},Zf=function(t,e){return da($f(t,e),"args[0]")},Jf=function(t,e,r,n){return $f(r,n||e,function(r){t[e]=da(r,"args[0]")})},Qf=function(t,e){return null==t?e:!t.args||1!==t.args.length||Boolean(t.args[0])},th=function(t,e,r){var n=$f(e,r);void 0!==n&&(t[r]=Qf(n))},eh=function(t,e,r){return t&&t.find(function(t){var n=t.name,i=t.value,o=n===e;return o&&r&&r(i),o})},rh=function(t,e,r){return eh(t,r,function(t){e[r]=t})},nh=function(t,e,r){return t&&t.find(function(t){var n=t.name===e;return n&&r&&r(t),n})},ih=function(t,e,r){return nh(e,r,function(e){var n=e.value;return Object.assign(t,Na({},r,n))})},oh=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return e.reduce(function(e,r){if("function"==typeof r){var n=r(t);return void 0!==n?n:e}return r&&t in r?r[t]:e},r)}},ah=function(t,e,r,n){return e.forEach(function(e){var i=r(e);n&&"string"==typeof i&&(i=n(i)),void 0!==i&&(t[e]=i)}),t},uh=Object.freeze({create:function(t){var e=t.declaration,r=t.ctx,n=t.options,i="instantiates"===e.verb?r.create(e.subject):void 0,o=e.voDescriptor,a=n||o.proto;return new Bu(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){Na(t,e,r[e])})}return t}({},o,{instanceOf:i,proto:"string"==typeof a?r.readOption(a):a}))},transform:function(t){var e,r={},n={},i=(e=r,function(t,r){void 0!==r&&(Array.isArray(r)?r.forEach(function(r,n){e["".concat(t).concat(n)]=r}):e[t]=r)}),o={voDescriptor:{vertexCount:Zf(t.data,"vertexCount"),attributes:Kf(t.data.filter(function(t){var e=t.type;return"data"===e||"dataBlock"===e}).map(function(t){var e=$f(t.annotations,"alias");if(e&&e.args&&"string"==typeof e.args[0])return n[t.name]=e.args[0],null;var r={name:t.name};return"data"===t.type?(r.type=t.valueType||"float32",eh(t.args,"size",function(t){r.size=t})):"dataBlock"===t.type&&(r.type=t.dataType||"float32",r.scalars=t.data.filter(function(t){return"data"===t.type}).map(function(t){var e=t.name,r=t.value;return i(e,r),e}),r.size=r.scalars.length),qf(t.annotations,"uniform")&&(r.uniform=!0),i(t.name,t.value),e?(eh(t.args,"offset",function(t){r.offset=t}),n[t.name]=r,null):r}))}};return Object.keys(n).length&&(o.voDescriptor.aliases=n),Object.keys(r).length&&(o.voNew=r),$f(t.data,"prototype",function(t){var e=t.args;o.voDescriptor.proto=e[0]}),o}}),sh=Object.freeze({create:function(t){var e=t.declaration,r=t.options;if(e.generate)return new $a(e.primitiveType,Ka.Generate(r.capacity,e.indices,e.stride,e.offset));console.warn("TODO implementation: Primitive with(out) @generate(no)")},transform:function(t){var e=t.data,r={primitiveType:Zf(e,"type")};return qf(e,"generate")&&(r.generate=!0),["stride","offset","indices"].forEach(ih.bind(null,r,e)),r}}),ch=function(t){var e={};return $f(t,"dynamic",function(t){e.usage=Qf(t,!0)?"dynamic":"static"}),th(e,t,"doubleBuffer"),th(e,t,"autotouch"),th(e,t,"textured"),Jf(e,"setSize",t),Jf(e,"setTexCoordsByTexture",t),Jf(e,"prototype",t),ih(e,t,"capacity"),ih(e,t,"maxAllocVOSize"),nh(t,"textures",function(t){if(t&&"dataBlock"===t.type){var r={};e.textureMap=r,t.data.forEach(function(t){var e=t.name,n=t.value,i=t.annotations,o=t.args,a={};r[e]={hints:a,src:n,type:qf(i,"atlas")?"atlas":"texture"},rh(o,a,"flipY"),rh(o,a,"repeatable"),rh(o,a,"premultiplyAlpha"),rh(o,a,"nearest")})}}),e},fh=Object.freeze({create:function(t){var e=t.ctx,r=t.declaration,n=t.options,i=void 0===n?{}:n,o=r.voDescriptor,a=i[o],u=r[o],s=e.readOption.bind(e),c=ah({},["autotouch","capacity","doubleBuffer","maxAllocVOSize","usage"],oh(r,u,i,a));ah(c,["setSize","setTexCoordsByTexture"],oh(r,u,i,a),oh(s,i,a)),c.primitive=function(t,e,r){switch(Ca(e)){case"string":return t.create(e,{capacity:r});default:return e}}(e,r.primitive,c.capacity),ah(c,["vertexShader","fragmentShader","shaderProgram"],oh(r,i),oh(s));var f=ah({},["prototype"],oh(u,a),oh(s,i)).prototype,h=e.create(o,f);return new rs(h,c)},transform:function(t){var e=t.data,r=Zf(e,"vertexObject"),n={voDescriptor:r,primitive:Zf(e,"primitive")};return Jf(n,"vertexShader",e),Jf(n,"fragmentShader",e),Jf(n,"shaderProgram",e),Object.assign(n,ch(e)),r&&nh(e,r,function(t){Object.assign(n,Na({},r,ch(t.data)))}),n}}),hh=(Na(Hf={},"vertexobject",uh),Na(Hf,"primitive",sh),Na(Hf,"spritegroup",fh),Hf),lh=xs.getLogger("picimo.toolkit.Context"),vh=function(t){var e=hh[t];return t||lh.error("Context: unknown declaration type:",t),e},dh=ma(["declarationType","verb","subject"]),ph=function(){function t(e){ja(this,t),this.config=Object.assign({},e),this.declaration={}}return Ma(t,[{key:"hasOption",value:function(t){return Vf(this.config,t)}},{key:"readOption",value:function(t){return da(this.config,t)}},{key:"writeOption",value:function(t,e){zf(this.config,t,e)}},{key:"configure",value:function(t){return Object.assign(this.config,t),this}},{key:"compile",value:function(t,e){var r=this;return e&&this.configure(e),Xf(t,{ctx:this}).forEach(function(t){"declaration"===t.type&&zf(r.declaration,t.name,Object.assign(function(t){var e=vh(t.declarationType);return e?e.transform(t):t}(t),dh(t)))}),this}},{key:"create",value:function(t,e){return function(t,e,r){var n=da(t.declaration,e);if(n){var i=vh(n.declarationType);return i?i.create({ctx:t,name:e,declaration:n,options:r}):null}}(this,t,e)}}]),t}(),yh=Object.freeze({compile:function(t,e){return new ph(e).compile(t)},configure:function(t){return new ph(t)},Context:ph});const gh="*",mh=1,bh=2,wh=4,Ah=Number.POSITIVE_INFINITY,xh=Number.NEGATIVE_INFINITY,Eh=(()=>(Symbol.eventize||(Symbol.eventize=Symbol("eventize")),Symbol.eventize))(),_h=(t,e,r)=>{"function"==typeof e&&e.apply(t,r)},Sh=(t,e,r)=>_h(e,e.emit,[t].concat(r)),Oh=t=>{switch(typeof t){case"function":return mh;case"string":return bh;case"object":return wh}};let Th=0;const Ph=()=>++Th;class kh{constructor(t,e,r,n=null){this.id=Ph(),this.eventName=t,this.isCatchEmAll=t===gh,this.listener=r,this.listenerObject=n,this.priority=e,this.listenerType=Oh(r),this.callAfterApply=void 0,this.isRemoved=!1}isEqual(t,e=null){return t===this||("number"==typeof t&&t===this.id||(null===e&&"string"==typeof t?t===gh||t===this.eventName:this.listener===t&&this.listenerObject===e))}apply(t,e){if(this.isRemoved)return;const{listener:r,listenerObject:n}=this;switch(this.listenerType){case mh:_h(n,r,e),this.callAfterApply&&this.callAfterApply();break;case bh:_h(n,n[r],e),this.callAfterApply&&this.callAfterApply();break;case wh:{const n=r[t];(this.isCatchEmAll||this.eventName===t)&&("function"==typeof n?n.apply(r,e):Sh(t,r,e),this.callAfterApply&&this.callAfterApply());break}}}}const Rh=(t,e)=>t.priority!==e.priority?e.priority-t.priority:t.id-e.id,Ch=t=>{if(t)return t.slice(0)},Ih=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},Lh=(t,e,r)=>{const n=t.findIndex(t=>t.isEqual(e,r));n>-1&&(t[n].isRemoved=!0,t.splice(n,1))},jh=t=>{t&&(t.forEach(t=>{t.isRemoved=!0}),t.length=0)};class Fh{constructor(){this.namedListeners=new Map,this.catchEmAllListeners=[]}add(t){if(t.isCatchEmAll)this.catchEmAllListeners.push(t),this.catchEmAllListeners.sort(Rh);else{const{eventName:e}=t;let r=this.namedListeners.get(e);r||(r=[],this.namedListeners.set(e,r)),r.push(t),r.sort(Rh)}}remove(t,e){if(null==e&&Array.isArray(t))t.forEach(this.remove.bind(this));else if(null==t||null==e&&t===gh)this.removeAllListeners();else if(null==e&&"string"==typeof t){const e=this.namedListeners.get(t);jh(e)}else t instanceof kh?(t.isRemoved=!0,this.namedListeners.forEach(e=>Ih(e,t)),Ih(this.catchEmAllListeners,t)):(this.namedListeners.forEach(r=>Lh(r,t,e)),Lh(this.catchEmAllListeners,t,e))}removeAllListeners(){this.namedListeners.forEach(t=>jh(t)),this.namedListeners.clear(),jh(this.catchEmAllListeners)}forEach(t,e){const r=Ch(this.catchEmAllListeners),n=Ch(this.namedListeners.get(t));if(t!==gh&&n&&0!==n.length)if(0===r.length)n.forEach(e);else{const t=n.length,i=r.length;let o=0,a=0;for(;o<t||a<i;){if(o<t){const t=n[o];if(a>=i||t.priority>=r[a].priority){e(t),++o;continue}}a<i&&(e(r[a]),++a)}}else r.forEach(e)}}class Mh{constructor(){this.events=new Map,this.eventNames=new Set}add(t){Array.isArray(t)?t.forEach(t=>this.eventNames.add(t)):this.eventNames.add(t)}remove(t){Array.isArray(t)?t.forEach(t=>this.remove(t)):this.eventNames.delete(t)}retain(t,e){this.eventNames.has(t)&&this.events.set(t,e)}isKnown(t){return this.eventNames.has(t)}emit(t,e){if(t===gh)this.eventNames.forEach(t=>this.emit(t,e));else{const r=this.events.get(t);r&&e.apply(t,r)}}}const Nh=(t,e,r)=>(Object.defineProperty(t,e,{value:r,configurable:!0}),t),Vh="undefined"!=typeof console,Bh=Vh?console[console.warn?"warn":"log"].bind(console,"[@spearwolf/eventize]"):()=>void 0,Uh=(t,e,r)=>{const n=r.length,i=typeof r[0];let o,a,u,s;if(n>=2&&n<=3&&"number"===i?(o=gh,[a,u,s]=r):n>=3&&n<=4&&"number"==typeof r[1]?[o,a,u,s]=r:(a=0,"string"===i||Array.isArray(r[0])?[o,u,s]=r:(o=gh,[u,s]=r)),!u&&Vh)return void Bh("called with insufficient arguments!",r);const c=r=>n=>((t,e,r,n,i,o)=>{const a=new kh(r,n,i,o);return t.add(a),e.emit(r,a),a})(t,e,n,r,u,s);return Array.isArray(o)?o.map(t=>Array.isArray(t)?c(t[1])(t[0]):c(a)(t)):c(a)(o)},Dh=t=>e=>{e.callAfterApply=(()=>t.off(e))};function Gh(t){if(t[Eh])return t;const e=new Fh,r=new Mh;return Nh(t,Eh,{keeper:r,store:e}),Object.assign(t,{on:(...t)=>Uh(e,r,t),once(...n){const i=Uh(e,r,n);return Array.isArray(i)?i.forEach(Dh(t)):Dh(t)(i),i},off(t,n){e.remove(t,n),Array.isArray(t)?r.remove(t.filter(t=>"string"==typeof t)):"string"==typeof t&&r.remove(t)},emit(t,...n){Array.isArray(t)?t.forEach(t=>{e.forEach(t,e=>e.apply(t,n)),r.retain(t,n)}):t!==gh&&(e.forEach(t,e=>e.apply(t,n)),r.retain(t,n))},retain(t){r.add(t)}}),t}function Wh(t){return Gh(t)}Wh.inject=Gh,Wh.extend=(t=>Gh(Object.create(t))),Wh.create=(t=>{const e=Gh({});return e.on(gh,0,t),e}),Wh.is=(t=>!(!t||!t[Eh])),Object.assign(Wh,{PRIO_MAX:Ah,PRIO_A:1e9,PRIO_B:1e6,PRIO_C:1e3,PRIO_DEFAULT:0,PRIO_LOW:-1e4,PRIO_MIN:xh});var zh=function(t){switch(Ca(t)){case"string":return t;case"function":switch(Ca(t.componentName)){case"function":return t.componentName();case"string":return t.componentName;default:return}default:return}},Yh=function(t){return function(e){return t.components.has(zh(e))}},Xh=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xa();ja(this,t),this.id=r,Object.defineProperties(this,{ecs:{value:e},components:{value:new Set}}),Wh(this)}return Ma(t,[{key:"destroy",value:function(){this.destroyed||(this.destroyed=!0,this.components.forEach(this.deleteComponent.bind(this)),this.ecs.destroyEntity(this.id))}},{key:"setComponent",value:function(t,e){if(this.components.has(t)){if(this[t]!==e)throw new Error("Entity.setComponent(): component already exists; name='".concat(t,"'"))}else this.components.add(t),this[t]=e,e.connectedEntity&&e.connectedEntity(this),this.emit("componentConnected:".concat(t),e,this)}},{key:"hasComponent",value:function(t){return Array.isArray(t)?t.every(Yh(this)):Yh(this)(t)}},{key:"deleteComponent",value:function(t){if(this.components.has(t)){var e=this[t];this.ecs.destroyComponent(t,e),this.components.delete(t),this.emit("destroyComponent:".concat(t),e,this),e.disconnectedEntity&&e.disconnectedEntity(this),delete this[e]}}}]),t}(),Hh=function(){function t(){ja(this,t),this.factories=new Map}return Ma(t,[{key:"registerComponent",value:function(t,e){this.factories.set(t,e)}},{key:"getComponentFactory",value:function(t){var e=zh(t),r=this.factories.get(e);if(!r)throw new Error("ComponentRegistry: unknown factory '".concat(e,"'"));return r}},{key:"createComponent",value:function(t,e,r){var n=zh(e),i=this.getComponentFactory(n).create(t,r);t.setComponent(n,i)}},{key:"updateComponent",value:function(t,e,r){var n=zh(e),i=this.getComponentFactory(n),o=t[n];i.update(o,r)}},{key:"createOrUpdateComponent",value:function(t,e,r){var n=zh(e);this[t.hasComponent(n)?"updateComponent":"createComponent"](t,n,r)}},{key:"destroyComponent",value:function(t,e){var r=this.factories.get(zh(t));r&&r.destroy&&r.destroy(e)}}]),t}(),Kh=function(t){function e(){var t;return ja(this,e),(t=Da(this,Ba(e).call(this))).entities=new Map,t}return Va(e,Hh),Ma(e,[{key:"createEntity",value:function(t,e){var r=this,n=new Xh(this,e);if(this.entities.has(n.id))throw new Error("ECS: duplicate entity.id='".concat(n.id,"' are not allowed"));return this.entities.set(n.id,n),Array.isArray(t)&&t.forEach(function(t){Array.isArray(t)?r.createComponent.apply(r,[n].concat(za(t))):r.createComponent(n,t)}),n}},{key:"getEntity",value:function(t){return this.entities.get(t)}},{key:"destroyEntity",value:function(t){var e=this.entities.get(t);e&&(this.entities.delete(t),e.destroyed||e.destroy())}},{key:"destroyAllEntities",value:function(){this.entities.forEach(function(t){return t.destroy()})}}]),e}(),$h=function(){function t(e){ja(this,t),this.componentClass=e}return Ma(t,null,[{key:"registerComponent",value:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];n.forEach(function(r){e.registerComponent(r.componentName(),new t(r))})}}]),Ma(t,[{key:"create",value:function(t,e){return new this.componentClass(t,e)}},{key:"update",value:function(t,e){t.update&&t.update(e)}},{key:"destroy",value:function(t){t.destroy&&t.destroy()}}]),t}(),qh=Object.freeze({ECS:Kh,ComponentFactory:$h});t.core=vs,t.ecs=qh,t.eventize=Wh,t.renderer=Bs,t.toolkit=yh,t.utils=Aa,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=picimo.js.map
