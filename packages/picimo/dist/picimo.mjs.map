{"version":3,"file":"picimo.mjs.map","sources":["../../../node_modules/core-js/modules/_global.js","../../../node_modules/core-js/modules/_core.js","../../../node_modules/core-js/modules/_is-object.js","../../../node_modules/core-js/modules/_an-object.js","../../../node_modules/core-js/modules/_fails.js","../../../node_modules/core-js/modules/_descriptors.js","../../../node_modules/core-js/modules/_dom-create.js","../../../node_modules/core-js/modules/_ie8-dom-define.js","../../../node_modules/core-js/modules/_to-primitive.js","../../../node_modules/core-js/modules/_object-dp.js","../../../node_modules/core-js/modules/_property-desc.js","../../../node_modules/core-js/modules/_hide.js","../../../node_modules/core-js/modules/_has.js","../../../node_modules/core-js/modules/_uid.js","../../../node_modules/core-js/modules/_redefine.js","../../../node_modules/core-js/modules/_a-function.js","../../../node_modules/core-js/modules/_ctx.js","../../../node_modules/core-js/modules/_export.js","../../../node_modules/core-js/modules/_defined.js","../../../node_modules/core-js/modules/_to-object.js","../../../node_modules/core-js/modules/_strict-method.js","../../../node_modules/core-js/modules/es6.array.sort.js","../../../node_modules/core-js/modules/es6.number.is-finite.js","../../../node_modules/core-js/modules/es6.number.is-nan.js","../../../node_modules/core-js/modules/_library.js","../../../node_modules/core-js/modules/_object-forced-pam.js","../../../node_modules/core-js/modules/es7.object.define-getter.js","../../../node_modules/core-js/modules/es7.object.define-setter.js","../../../node_modules/core-js/modules/_shared.js","../../../node_modules/core-js/modules/_shared-key.js","../../../node_modules/core-js/modules/_object-gpo.js","../../../node_modules/core-js/modules/_object-pie.js","../../../node_modules/core-js/modules/_cof.js","../../../node_modules/core-js/modules/_iobject.js","../../../node_modules/core-js/modules/_to-iobject.js","../../../node_modules/core-js/modules/_object-gopd.js","../../../node_modules/core-js/modules/es7.object.lookup-getter.js","../../../node_modules/core-js/modules/es7.object.lookup-setter.js","../../../node_modules/core-js/modules/_same-value.js","../../../node_modules/core-js/modules/es6.object.is.js","../../../node_modules/core-js/modules/_wks.js","../../../node_modules/core-js/modules/_species-constructor.js","../../../node_modules/core-js/modules/_new-promise-capability.js","../../../node_modules/core-js/modules/_promise-resolve.js","../../../node_modules/core-js/modules/es7.promise.finally.js","../../../node_modules/core-js/modules/_set-proto.js","../../../node_modules/core-js/modules/_inherit-if-required.js","../../../node_modules/core-js/modules/_to-integer.js","../../../node_modules/core-js/modules/_to-length.js","../../../node_modules/core-js/modules/_to-absolute-index.js","../../../node_modules/core-js/modules/_array-includes.js","../../../node_modules/core-js/modules/_object-keys-internal.js","../../../node_modules/core-js/modules/_enum-bug-keys.js","../../../node_modules/core-js/modules/_object-gopn.js","../../../node_modules/core-js/modules/_is-regexp.js","../../../node_modules/core-js/modules/_flags.js","../../../node_modules/core-js/modules/_set-species.js","../../../node_modules/core-js/modules/es6.regexp.constructor.js","../../../node_modules/core-js/modules/es6.regexp.flags.js","../../../node_modules/core-js/modules/_fix-re-wks.js","../../../node_modules/core-js/modules/es6.regexp.match.js","../../../node_modules/core-js/modules/es6.regexp.replace.js","../../../node_modules/core-js/modules/es6.regexp.split.js","../../../node_modules/core-js/modules/es6.regexp.search.js","../../../node_modules/core-js/modules/es6.regexp.to-string.js","../../../node_modules/core-js/modules/_meta.js","../../../node_modules/core-js/modules/_set-to-string-tag.js","../../../node_modules/core-js/modules/_wks-ext.js","../../../node_modules/core-js/modules/_wks-define.js","../../../node_modules/core-js/modules/_object-keys.js","../../../node_modules/core-js/modules/_object-gops.js","../../../node_modules/core-js/modules/_enum-keys.js","../../../node_modules/core-js/modules/_is-array.js","../../../node_modules/core-js/modules/_object-dps.js","../../../node_modules/core-js/modules/_html.js","../../../node_modules/core-js/modules/_object-create.js","../../../node_modules/core-js/modules/_object-gopn-ext.js","../../../node_modules/core-js/modules/es6.symbol.js","../../../node_modules/core-js/modules/es7.symbol.async-iterator.js","../../../node_modules/core-js/modules/_string-html.js","../../../node_modules/core-js/modules/es6.string.anchor.js","../../../node_modules/core-js/modules/es6.string.big.js","../../../node_modules/core-js/modules/es6.string.blink.js","../../../node_modules/core-js/modules/es6.string.bold.js","../../../node_modules/core-js/modules/es6.string.fixed.js","../../../node_modules/core-js/modules/es6.string.fontcolor.js","../../../node_modules/core-js/modules/es6.string.fontsize.js","../../../node_modules/core-js/modules/es6.string.italics.js","../../../node_modules/core-js/modules/es6.string.link.js","../../../node_modules/core-js/modules/es6.string.small.js","../../../node_modules/core-js/modules/es6.string.strike.js","../../../node_modules/core-js/modules/es6.string.sub.js","../../../node_modules/core-js/modules/es6.string.sup.js","../../../node_modules/core-js/modules/_user-agent.js","../../../node_modules/core-js/modules/web.timers.js","../../../node_modules/core-js/modules/_invoke.js","../../../node_modules/core-js/modules/_task.js","../../../node_modules/core-js/modules/web.immediate.js","../../../node_modules/core-js/modules/_add-to-unscopables.js","../../../node_modules/core-js/modules/_iter-step.js","../../../node_modules/core-js/modules/_iterators.js","../../../node_modules/core-js/modules/_iter-create.js","../../../node_modules/core-js/modules/_iter-define.js","../../../node_modules/core-js/modules/es6.array.iterator.js","../../../node_modules/core-js/modules/web.dom.iterable.js","../../picimo-utils/src/findNextPowerOf2.js","../../picimo-utils/src/get.js","../../picimo-utils/src/hexCol2rgb.js","../../picimo-utils/src/hexCol2rgba.js","../../picimo-utils/src/isPowerOf2.js","../../picimo-utils/src/makeCircleCoords.js","../../picimo-utils/src/maxOf.js","../../picimo-utils/src/pick.js","../../picimo-utils/src/readOption.js","../../picimo-utils/src/sample.js","../../picimo-utils/src/toFloatColors.js","../../picimo-core/src/ShaderTool.js","../../picimo-core/src/AABB2.js","../../picimo-core/src/generateUuid.js","../../picimo-core/src/DataRef.js","../../picimo-core/src/ElementIndexArray.js","../../picimo-core/src/IndexedPrimitive.js","../../../node_modules/gl-matrix/lib/gl-matrix/common.js","../../../node_modules/gl-matrix/lib/gl-matrix/mat3.js","../../../node_modules/gl-matrix/lib/gl-matrix/mat4.js","../../../node_modules/gl-matrix/lib/gl-matrix/vec3.js","../../../node_modules/gl-matrix/lib/gl-matrix/vec4.js","../../../node_modules/gl-matrix/lib/gl-matrix/quat.js","../../../node_modules/gl-matrix/lib/gl-matrix/vec2.js","../../picimo-core/src/Mat4.js","../../picimo-core/src/PowerOf2Image.js","../../picimo-core/src/Projection.js","../../picimo-core/src/ShaderVariable.js","../../picimo-core/src/ShaderUniformVariable.js","../../picimo-core/src/ProjectionUniform.js","../../picimo-core/src/VOArray.js","../../picimo-core/src/VODescriptor/typedArrayHelpers.js","../../picimo-core/src/VODescriptor/VOAttrDescriptor.js","../../picimo-core/src/VODescriptor/createAttributes.js","../../picimo-core/src/VODescriptor/createAliases.js","../../picimo-core/src/VODescriptor/createVOPrototype.js","../../picimo-core/src/VODescriptor/createTypedArrays.js","../../picimo-core/src/VODescriptor/createVO.js","../../picimo-core/src/VODescriptor/VODescriptor.js","../../picimo-core/src/ShaderSource.js","../../picimo-core/src/ResourceLibrary.js","../../picimo-core/src/ShaderAttribVariable.js","../../picimo-core/src/ShaderVariableGroup.js","../../picimo-core/src/ShaderContext.js","../../picimo-core/src/ShaderProgram.js","../../picimo-core/src/ShaderUniformGroup.js","../../picimo-core/src/ShaderAttribValue.js","../../picimo-core/src/ShaderVariableAlias.js","../../picimo-core/src/ShaderVariableBufferGroup.js","../../picimo-core/src/VOPool/createVOs.js","../../picimo-core/src/VOPool/VOPool.js","../../picimo-core/src/SpriteGroup.js","../../picimo-core/src/StackedContext.js","../../picimo-core/src/Texture.js","../../picimo-core/src/TextureAtlasJsonDef.js","../../picimo-core/src/TextureAtlas.js","../../picimo-core/src/TextureHandle.js","../../picimo-core/src/ShaderTexture2dVariable.js","../../picimo-core/src/TextureLibrary.js","../../picimo-core/src/ShaderTextureGroup.js","../../picimo-core/src/TexturedSpriteGroup.js","../../picimo-core/src/Viewport.js","../../picimo-renderer/src/BlendMode.js","../../picimo-renderer/src/WebGlContext/TextureUnitManager.js","../../picimo-renderer/src/WebGlContext/WebGlContext.js","../../picimo-renderer/src/WebGlContext/WebGl1Context.js","../../picimo-renderer/src/WebGlContext/WebGl2Context.js","../../picimo-renderer/src/WebGlContext/createWebGlContext.js","../../../node_modules/loglevel/lib/loglevel.js","../../picimo-renderer/src/WebGlBuffer.js","../../picimo-renderer/src/WebGlShader.js","../../picimo-renderer/src/WebGlProgram/WebGlUniform.js","../../picimo-renderer/src/WebGlProgram/WebGlAttribute.js","../../picimo-renderer/src/WebGlProgram/WebGlProgram.js","../../picimo-renderer/src/WebGlTexture/initTexGl.js","../../picimo-renderer/src/WebGlTexture/WebGlTexture.js","../../picimo-renderer/src/WebGlResourceLibrary.js","../../picimo-renderer/src/WebGlRenderer.js","../../../node_modules/lodash/_baseHas.js","../../../node_modules/lodash/isArray.js","../../../node_modules/lodash/_freeGlobal.js","../../../node_modules/lodash/_root.js","../../../node_modules/lodash/_Symbol.js","../../../node_modules/lodash/_getRawTag.js","../../../node_modules/lodash/_objectToString.js","../../../node_modules/lodash/_baseGetTag.js","../../../node_modules/lodash/isObjectLike.js","../../../node_modules/lodash/isSymbol.js","../../../node_modules/lodash/_isKey.js","../../../node_modules/lodash/isObject.js","../../../node_modules/lodash/isFunction.js","../../../node_modules/lodash/_coreJsData.js","../../../node_modules/lodash/_isMasked.js","../../../node_modules/lodash/_toSource.js","../../../node_modules/lodash/_baseIsNative.js","../../../node_modules/lodash/_getValue.js","../../../node_modules/lodash/_getNative.js","../../../node_modules/lodash/_nativeCreate.js","../../../node_modules/lodash/_hashClear.js","../../../node_modules/lodash/_hashDelete.js","../../../node_modules/lodash/_hashGet.js","../../../node_modules/lodash/_hashHas.js","../../../node_modules/lodash/_hashSet.js","../../../node_modules/lodash/_Hash.js","../../../node_modules/lodash/_listCacheClear.js","../../../node_modules/lodash/eq.js","../../../node_modules/lodash/_assocIndexOf.js","../../../node_modules/lodash/_listCacheDelete.js","../../../node_modules/lodash/_listCacheGet.js","../../../node_modules/lodash/_listCacheHas.js","../../../node_modules/lodash/_listCacheSet.js","../../../node_modules/lodash/_ListCache.js","../../../node_modules/lodash/_Map.js","../../../node_modules/lodash/_mapCacheClear.js","../../../node_modules/lodash/_isKeyable.js","../../../node_modules/lodash/_getMapData.js","../../../node_modules/lodash/_mapCacheDelete.js","../../../node_modules/lodash/_mapCacheGet.js","../../../node_modules/lodash/_mapCacheHas.js","../../../node_modules/lodash/_mapCacheSet.js","../../../node_modules/lodash/_MapCache.js","../../../node_modules/lodash/memoize.js","../../../node_modules/lodash/_memoizeCapped.js","../../../node_modules/lodash/_stringToPath.js","../../../node_modules/lodash/_arrayMap.js","../../../node_modules/lodash/_baseToString.js","../../../node_modules/lodash/toString.js","../../../node_modules/lodash/_castPath.js","../../../node_modules/lodash/_baseIsArguments.js","../../../node_modules/lodash/isArguments.js","../../../node_modules/lodash/_isIndex.js","../../../node_modules/lodash/isLength.js","../../../node_modules/lodash/_toKey.js","../../../node_modules/lodash/_hasPath.js","../../../node_modules/lodash/has.js","../../../node_modules/lodash/_defineProperty.js","../../../node_modules/lodash/_baseAssignValue.js","../../../node_modules/lodash/_assignValue.js","../../../node_modules/lodash/_baseSet.js","../../../node_modules/lodash/set.js","../../picimo-toolkit/src/picimoParser.js","../../../node_modules/lodash/compact.js","../../picimo-toolkit/src/constants.js","../../picimo-toolkit/src/factories/utils.js","../../picimo-toolkit/src/factories/VertexObject.js","../../picimo-toolkit/src/factories/Primitive.js","../../picimo-toolkit/src/factories/SpriteGroup.js","../../picimo-toolkit/src/Context.js","../../../node_modules/@spearwolf/eventize/src/constants.js","../../../node_modules/@spearwolf/eventize/src/EventListener.js","../../../node_modules/@spearwolf/eventize/src/EventStore.js","../../../node_modules/@spearwolf/eventize/src/EventKeeper.js","../../../node_modules/@spearwolf/eventize/src/propUtils.js","../../../node_modules/@spearwolf/eventize/src/logUtils.js","../../../node_modules/@spearwolf/eventize/src/subscribeTo.js","../../../node_modules/@spearwolf/eventize/src/inject.js","../../../node_modules/@spearwolf/eventize/src/eventize.js","../../picimo-ecs/src/getComponentName.js","../../picimo-ecs/src/Entity.js","../../picimo-ecs/src/ComponentRegistry.js","../../picimo-ecs/src/ECS.js","../../picimo-ecs/src/ComponentFactory.js"],"sourcesContent":["// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","var core = module.exports = { version: '2.5.7' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","var global = require('./_global');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar SRC = require('./_uid')('src');\nvar TO_STRING = 'toString';\nvar $toString = Function[TO_STRING];\nvar TPL = ('' + $toString).split(TO_STRING);\n\nrequire('./_core').inspectSource = function (it) {\n  return $toString.call(it);\n};\n\n(module.exports = function (O, key, val, safe) {\n  var isFunction = typeof val == 'function';\n  if (isFunction) has(val, 'name') || hide(val, 'name', key);\n  if (O[key] === val) return;\n  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if (O === global) {\n    O[key] = val;\n  } else if (!safe) {\n    delete O[key];\n    hide(O, key, val);\n  } else if (O[key]) {\n    O[key] = val;\n  } else {\n    hide(O, key, val);\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString() {\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar hide = require('./_hide');\nvar redefine = require('./_redefine');\nvar ctx = require('./_ctx');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE];\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});\n  var key, own, out, exp;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if (target) redefine(target, key, out, type & $export.U);\n    // export\n    if (exports[key] != out) hide(exports, key, exp);\n    if (IS_PROTO && expProto[key] != out) expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n","'use strict';\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar fails = require('./_fails');\nvar $sort = [].sort;\nvar test = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function () {\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function () {\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !require('./_strict-method')($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","// 20.1.2.2 Number.isFinite(number)\nvar $export = require('./_export');\nvar _isFinite = require('./_global').isFinite;\n\n$export($export.S, 'Number', {\n  isFinite: function isFinite(it) {\n    return typeof it == 'number' && _isFinite(it);\n  }\n});\n","// 20.1.2.4 Number.isNaN(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', {\n  isNaN: function isNaN(number) {\n    // eslint-disable-next-line no-self-compare\n    return number != number;\n  }\n});\n","module.exports = false;\n","'use strict';\n// Forced replacement prototype accessors methods\nmodule.exports = require('./_library') || !require('./_fails')(function () {\n  var K = Math.random();\n  // In FF throws only define methods\n  // eslint-disable-next-line no-undef, no-useless-call\n  __defineSetter__.call(null, K, function () { /* empty */ });\n  delete require('./_global')[K];\n});\n","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar aFunction = require('./_a-function');\nvar $defineProperty = require('./_object-dp');\n\n// B.2.2.2 Object.prototype.__defineGetter__(P, getter)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __defineGetter__: function __defineGetter__(P, getter) {\n    $defineProperty.f(toObject(this), P, { get: aFunction(getter), enumerable: true, configurable: true });\n  }\n});\n","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar aFunction = require('./_a-function');\nvar $defineProperty = require('./_object-dp');\n\n// B.2.2.3 Object.prototype.__defineSetter__(P, setter)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __defineSetter__: function __defineSetter__(P, setter) {\n    $defineProperty.f(toObject(this), P, { set: aFunction(setter), enumerable: true, configurable: true });\n  }\n});\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2018 Denis Pushkarev (zloirock.ru)'\n});\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n","exports.f = {}.propertyIsEnumerable;\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\nvar getPrototypeOf = require('./_object-gpo');\nvar getOwnPropertyDescriptor = require('./_object-gopd').f;\n\n// B.2.2.4 Object.prototype.__lookupGetter__(P)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __lookupGetter__: function __lookupGetter__(P) {\n    var O = toObject(this);\n    var K = toPrimitive(P, true);\n    var D;\n    do {\n      if (D = getOwnPropertyDescriptor(O, K)) return D.get;\n    } while (O = getPrototypeOf(O));\n  }\n});\n","'use strict';\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar toPrimitive = require('./_to-primitive');\nvar getPrototypeOf = require('./_object-gpo');\nvar getOwnPropertyDescriptor = require('./_object-gopd').f;\n\n// B.2.2.5 Object.prototype.__lookupSetter__(P)\nrequire('./_descriptors') && $export($export.P + require('./_object-forced-pam'), 'Object', {\n  __lookupSetter__: function __lookupSetter__(P) {\n    var O = toObject(this);\n    var K = toPrimitive(P, true);\n    var D;\n    do {\n      if (D = getOwnPropertyDescriptor(O, K)) return D.set;\n    } while (O = getPrototypeOf(O));\n  }\n});\n","// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","// 19.1.3.10 Object.is(value1, value2)\nvar $export = require('./_export');\n$export($export.S, 'Object', { is: require('./_same-value') });\n","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n","var isObject = require('./_is-object');\nvar setPrototypeOf = require('./_set-proto').set;\nmodule.exports = function (that, target, C) {\n  var S = target.constructor;\n  var P;\n  if (S !== C && typeof S == 'function' && (P = S.prototype) !== C.prototype && isObject(P) && setPrototypeOf) {\n    setPrototypeOf(that, P);\n  } return that;\n};\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n","// 7.2.8 IsRegExp(argument)\nvar isObject = require('./_is-object');\nvar cof = require('./_cof');\nvar MATCH = require('./_wks')('match');\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};\n","'use strict';\n// 21.2.5.3 get RegExp.prototype.flags\nvar anObject = require('./_an-object');\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","'use strict';\nvar global = require('./_global');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n","var global = require('./_global');\nvar inheritIfRequired = require('./_inherit-if-required');\nvar dP = require('./_object-dp').f;\nvar gOPN = require('./_object-gopn').f;\nvar isRegExp = require('./_is-regexp');\nvar $flags = require('./_flags');\nvar $RegExp = global.RegExp;\nvar Base = $RegExp;\nvar proto = $RegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n// \"new\" creates a new object, old webkit buggy here\nvar CORRECT_NEW = new $RegExp(re1) !== re1;\n\nif (require('./_descriptors') && (!CORRECT_NEW || require('./_fails')(function () {\n  re2[require('./_wks')('match')] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return $RegExp(re1) != re1 || $RegExp(re2) == re2 || $RegExp(re1, 'i') != '/a/i';\n}))) {\n  $RegExp = function RegExp(p, f) {\n    var tiRE = this instanceof $RegExp;\n    var piRE = isRegExp(p);\n    var fiU = f === undefined;\n    return !tiRE && piRE && p.constructor === $RegExp && fiU ? p\n      : inheritIfRequired(CORRECT_NEW\n        ? new Base(piRE && !fiU ? p.source : p, f)\n        : Base((piRE = p instanceof $RegExp) ? p.source : p, piRE && fiU ? $flags.call(p) : f)\n      , tiRE ? this : proto, $RegExp);\n  };\n  var proxy = function (key) {\n    key in $RegExp || dP($RegExp, key, {\n      configurable: true,\n      get: function () { return Base[key]; },\n      set: function (it) { Base[key] = it; }\n    });\n  };\n  for (var keys = gOPN(Base), i = 0; keys.length > i;) proxy(keys[i++]);\n  proto.constructor = $RegExp;\n  $RegExp.prototype = proto;\n  require('./_redefine')(global, 'RegExp', $RegExp);\n}\n\nrequire('./_set-species')('RegExp');\n","// 21.2.5.3 get RegExp.prototype.flags()\nif (require('./_descriptors') && /./g.flags != 'g') require('./_object-dp').f(RegExp.prototype, 'flags', {\n  configurable: true,\n  get: require('./_flags')\n});\n","'use strict';\nvar hide = require('./_hide');\nvar redefine = require('./_redefine');\nvar fails = require('./_fails');\nvar defined = require('./_defined');\nvar wks = require('./_wks');\n\nmodule.exports = function (KEY, length, exec) {\n  var SYMBOL = wks(KEY);\n  var fns = exec(defined, SYMBOL, ''[KEY]);\n  var strfn = fns[0];\n  var rxfn = fns[1];\n  if (fails(function () {\n    var O = {};\n    O[SYMBOL] = function () { return 7; };\n    return ''[KEY](O) != 7;\n  })) {\n    redefine(String.prototype, KEY, strfn);\n    hide(RegExp.prototype, SYMBOL, length == 2\n      // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)\n      // 21.2.5.11 RegExp.prototype[@@split](string, limit)\n      ? function (string, arg) { return rxfn.call(string, this, arg); }\n      // 21.2.5.6 RegExp.prototype[@@match](string)\n      // 21.2.5.9 RegExp.prototype[@@search](string)\n      : function (string) { return rxfn.call(string, this); }\n    );\n  }\n};\n","// @@match logic\nrequire('./_fix-re-wks')('match', 1, function (defined, MATCH, $match) {\n  // 21.1.3.11 String.prototype.match(regexp)\n  return [function match(regexp) {\n    'use strict';\n    var O = defined(this);\n    var fn = regexp == undefined ? undefined : regexp[MATCH];\n    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));\n  }, $match];\n});\n","// @@replace logic\nrequire('./_fix-re-wks')('replace', 2, function (defined, REPLACE, $replace) {\n  // 21.1.3.14 String.prototype.replace(searchValue, replaceValue)\n  return [function replace(searchValue, replaceValue) {\n    'use strict';\n    var O = defined(this);\n    var fn = searchValue == undefined ? undefined : searchValue[REPLACE];\n    return fn !== undefined\n      ? fn.call(searchValue, O, replaceValue)\n      : $replace.call(String(O), searchValue, replaceValue);\n  }, $replace];\n});\n","// @@split logic\nrequire('./_fix-re-wks')('split', 2, function (defined, SPLIT, $split) {\n  'use strict';\n  var isRegExp = require('./_is-regexp');\n  var _split = $split;\n  var $push = [].push;\n  var $SPLIT = 'split';\n  var LENGTH = 'length';\n  var LAST_INDEX = 'lastIndex';\n  if (\n    'abbc'[$SPLIT](/(b)*/)[1] == 'c' ||\n    'test'[$SPLIT](/(?:)/, -1)[LENGTH] != 4 ||\n    'ab'[$SPLIT](/(?:ab)*/)[LENGTH] != 2 ||\n    '.'[$SPLIT](/(.?)(.?)/)[LENGTH] != 4 ||\n    '.'[$SPLIT](/()()/)[LENGTH] > 1 ||\n    ''[$SPLIT](/.?/)[LENGTH]\n  ) {\n    var NPCG = /()??/.exec('')[1] === undefined; // nonparticipating capturing group\n    // based on es5-shim implementation, need to rework it\n    $split = function (separator, limit) {\n      var string = String(this);\n      if (separator === undefined && limit === 0) return [];\n      // If `separator` is not a regex, use native split\n      if (!isRegExp(separator)) return _split.call(string, separator, limit);\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      var splitLimit = limit === undefined ? 4294967295 : limit >>> 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var separator2, match, lastIndex, lastLength, i;\n      // Doesn't need flags gy, but they don't hurt\n      if (!NPCG) separator2 = new RegExp('^' + separatorCopy.source + '$(?!\\\\s)', flags);\n      while (match = separatorCopy.exec(string)) {\n        // `separatorCopy.lastIndex` is not reliable cross-browser\n        lastIndex = match.index + match[0][LENGTH];\n        if (lastIndex > lastLastIndex) {\n          output.push(string.slice(lastLastIndex, match.index));\n          // Fix browsers whose `exec` methods don't consistently return `undefined` for NPCG\n          // eslint-disable-next-line no-loop-func\n          if (!NPCG && match[LENGTH] > 1) match[0].replace(separator2, function () {\n            for (i = 1; i < arguments[LENGTH] - 2; i++) if (arguments[i] === undefined) match[i] = undefined;\n          });\n          if (match[LENGTH] > 1 && match.index < string[LENGTH]) $push.apply(output, match.slice(1));\n          lastLength = match[0][LENGTH];\n          lastLastIndex = lastIndex;\n          if (output[LENGTH] >= splitLimit) break;\n        }\n        if (separatorCopy[LAST_INDEX] === match.index) separatorCopy[LAST_INDEX]++; // Avoid an infinite loop\n      }\n      if (lastLastIndex === string[LENGTH]) {\n        if (lastLength || !separatorCopy.test('')) output.push('');\n      } else output.push(string.slice(lastLastIndex));\n      return output[LENGTH] > splitLimit ? output.slice(0, splitLimit) : output;\n    };\n  // Chakra, V8\n  } else if ('0'[$SPLIT](undefined, 0)[LENGTH]) {\n    $split = function (separator, limit) {\n      return separator === undefined && limit === 0 ? [] : _split.call(this, separator, limit);\n    };\n  }\n  // 21.1.3.17 String.prototype.split(separator, limit)\n  return [function split(separator, limit) {\n    var O = defined(this);\n    var fn = separator == undefined ? undefined : separator[SPLIT];\n    return fn !== undefined ? fn.call(separator, O, limit) : $split.call(String(O), separator, limit);\n  }, $split];\n});\n","// @@search logic\nrequire('./_fix-re-wks')('search', 1, function (defined, SEARCH, $search) {\n  // 21.1.3.15 String.prototype.search(regexp)\n  return [function search(regexp) {\n    'use strict';\n    var O = defined(this);\n    var fn = regexp == undefined ? undefined : regexp[SEARCH];\n    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n  }, $search];\n});\n","'use strict';\nrequire('./es6.regexp.flags');\nvar anObject = require('./_an-object');\nvar $flags = require('./_flags');\nvar DESCRIPTORS = require('./_descriptors');\nvar TO_STRING = 'toString';\nvar $toString = /./[TO_STRING];\n\nvar define = function (fn) {\n  require('./_redefine')(RegExp.prototype, TO_STRING, fn, true);\n};\n\n// 21.2.5.14 RegExp.prototype.toString()\nif (require('./_fails')(function () { return $toString.call({ source: 'a', flags: 'b' }) != '/a/b'; })) {\n  define(function toString() {\n    var R = anObject(this);\n    return '/'.concat(R.source, '/',\n      'flags' in R ? R.flags : !DESCRIPTORS && R instanceof RegExp ? $flags.call(R) : undefined);\n  });\n// FF44- RegExp#toString has a wrong name\n} else if ($toString.name != TO_STRING) {\n  define(function toString() {\n    return $toString.call(this);\n  });\n}\n","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n","exports.f = require('./_wks');\n","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n","require('./_wks-define')('asyncIterator');\n","var $export = require('./_export');\nvar fails = require('./_fails');\nvar defined = require('./_defined');\nvar quot = /\"/g;\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\nvar createHTML = function (string, tag, attribute, value) {\n  var S = String(defined(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\nmodule.exports = function (NAME, exec) {\n  var O = {};\n  O[NAME] = exec(createHTML);\n  $export($export.P + $export.F * fails(function () {\n    var test = ''[NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  }), 'String', O);\n};\n","'use strict';\n// B.2.3.2 String.prototype.anchor(name)\nrequire('./_string-html')('anchor', function (createHTML) {\n  return function anchor(name) {\n    return createHTML(this, 'a', 'name', name);\n  };\n});\n","'use strict';\n// B.2.3.3 String.prototype.big()\nrequire('./_string-html')('big', function (createHTML) {\n  return function big() {\n    return createHTML(this, 'big', '', '');\n  };\n});\n","'use strict';\n// B.2.3.4 String.prototype.blink()\nrequire('./_string-html')('blink', function (createHTML) {\n  return function blink() {\n    return createHTML(this, 'blink', '', '');\n  };\n});\n","'use strict';\n// B.2.3.5 String.prototype.bold()\nrequire('./_string-html')('bold', function (createHTML) {\n  return function bold() {\n    return createHTML(this, 'b', '', '');\n  };\n});\n","'use strict';\n// B.2.3.6 String.prototype.fixed()\nrequire('./_string-html')('fixed', function (createHTML) {\n  return function fixed() {\n    return createHTML(this, 'tt', '', '');\n  };\n});\n","'use strict';\n// B.2.3.7 String.prototype.fontcolor(color)\nrequire('./_string-html')('fontcolor', function (createHTML) {\n  return function fontcolor(color) {\n    return createHTML(this, 'font', 'color', color);\n  };\n});\n","'use strict';\n// B.2.3.8 String.prototype.fontsize(size)\nrequire('./_string-html')('fontsize', function (createHTML) {\n  return function fontsize(size) {\n    return createHTML(this, 'font', 'size', size);\n  };\n});\n","'use strict';\n// B.2.3.9 String.prototype.italics()\nrequire('./_string-html')('italics', function (createHTML) {\n  return function italics() {\n    return createHTML(this, 'i', '', '');\n  };\n});\n","'use strict';\n// B.2.3.10 String.prototype.link(url)\nrequire('./_string-html')('link', function (createHTML) {\n  return function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  };\n});\n","'use strict';\n// B.2.3.11 String.prototype.small()\nrequire('./_string-html')('small', function (createHTML) {\n  return function small() {\n    return createHTML(this, 'small', '', '');\n  };\n});\n","'use strict';\n// B.2.3.12 String.prototype.strike()\nrequire('./_string-html')('strike', function (createHTML) {\n  return function strike() {\n    return createHTML(this, 'strike', '', '');\n  };\n});\n","'use strict';\n// B.2.3.13 String.prototype.sub()\nrequire('./_string-html')('sub', function (createHTML) {\n  return function sub() {\n    return createHTML(this, 'sub', '', '');\n  };\n});\n","'use strict';\n// B.2.3.14 String.prototype.sup()\nrequire('./_string-html')('sup', function (createHTML) {\n  return function sup() {\n    return createHTML(this, 'sup', '', '');\n  };\n});\n","var global = require('./_global');\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n","// ie9- setTimeout & setInterval additional parameters fix\nvar global = require('./_global');\nvar $export = require('./_export');\nvar userAgent = require('./_user-agent');\nvar slice = [].slice;\nvar MSIE = /MSIE .\\./.test(userAgent); // <- dirty ie9- check\nvar wrap = function (set) {\n  return function (fn, time /* , ...args */) {\n    var boundArgs = arguments.length > 2;\n    var args = boundArgs ? slice.call(arguments, 2) : false;\n    return set(boundArgs ? function () {\n      // eslint-disable-next-line no-new-func\n      (typeof fn == 'function' ? fn : Function(fn)).apply(this, args);\n    } : fn, time);\n  };\n};\n$export($export.G + $export.B + $export.F * MSIE, {\n  setTimeout: wrap(global.setTimeout),\n  setInterval: wrap(global.setInterval)\n});\n","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n","var $export = require('./_export');\nvar $task = require('./_task');\n$export($export.G + $export.B, {\n  setImmediate: $task.set,\n  clearImmediate: $task.clear\n});\n","// 22.1.3.31 Array.prototype[@@unscopables]\nvar UNSCOPABLES = require('./_wks')('unscopables');\nvar ArrayProto = Array.prototype;\nif (ArrayProto[UNSCOPABLES] == undefined) require('./_hide')(ArrayProto, UNSCOPABLES, {});\nmodule.exports = function (key) {\n  ArrayProto[UNSCOPABLES][key] = true;\n};\n","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n","module.exports = {};\n","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","var $iterators = require('./es6.array.iterator');\nvar getKeys = require('./_object-keys');\nvar redefine = require('./_redefine');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar wks = require('./_wks');\nvar ITERATOR = wks('iterator');\nvar TO_STRING_TAG = wks('toStringTag');\nvar ArrayValues = Iterators.Array;\n\nvar DOMIterables = {\n  CSSRuleList: true, // TODO: Not spec compliant, should be false.\n  CSSStyleDeclaration: false,\n  CSSValueList: false,\n  ClientRectList: false,\n  DOMRectList: false,\n  DOMStringList: false,\n  DOMTokenList: true,\n  DataTransferItemList: false,\n  FileList: false,\n  HTMLAllCollection: false,\n  HTMLCollection: false,\n  HTMLFormElement: false,\n  HTMLSelectElement: false,\n  MediaList: true, // TODO: Not spec compliant, should be false.\n  MimeTypeArray: false,\n  NamedNodeMap: false,\n  NodeList: true,\n  PaintRequestList: false,\n  Plugin: false,\n  PluginArray: false,\n  SVGLengthList: false,\n  SVGNumberList: false,\n  SVGPathSegList: false,\n  SVGPointList: false,\n  SVGStringList: false,\n  SVGTransformList: false,\n  SourceBufferList: false,\n  StyleSheetList: true, // TODO: Not spec compliant, should be false.\n  TextTrackCueList: false,\n  TextTrackList: false,\n  TouchList: false\n};\n\nfor (var collections = getKeys(DOMIterables), i = 0; i < collections.length; i++) {\n  var NAME = collections[i];\n  var explicit = DOMIterables[NAME];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  var key;\n  if (proto) {\n    if (!proto[ITERATOR]) hide(proto, ITERATOR, ArrayValues);\n    if (!proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n    Iterators[NAME] = ArrayValues;\n    if (explicit) for (key in $iterators) if (!proto[key]) redefine(proto, key, $iterators[key], true);\n  }\n}\n","\n/**\n * @param {number} x\n * @return {number}\n */\nfunction findNextPowerOf2(x) {\n  let p = 1;\n  while (x > p) p <<= 1;\n  return p;\n}\n\nexport default findNextPowerOf2;\n","\n/** @private */\nconst arrayAccessor = new RegExp(/(.+)\\[(\\d+)\\]$/);\n\n/** @private */\nconst getProp = (obj, prop) => {\n  const aa = arrayAccessor.exec(prop);\n  if (aa) {\n    const val = obj[aa[1]];\n    if (val != null) {\n      return val[parseInt(aa[2], 10)];\n    }\n    return;\n  }\n  return obj[prop];\n};\n\n/**\n * A rough and unpolished version of lodash's `get()`\n * @param {Object} obj\n * @param {string} path - The property path. Supports `.` (dots) and `[1]` (array access) syntax.\n */\nconst get = (obj, path) => {\n  if (obj != null) {\n    if (path in obj) {\n      return obj[path];\n    }\n    const items = path.split(/[.]/);\n    const val = getProp(obj, items.shift());\n    if (val != null && items.length) {\n      return get(val, items.join('.'));\n    }\n    return val;\n  }\n};\n\nexport default get;\n","\n/**\n * Returns an array containing 3x values: *red*, *green*, *blue* with each color value in range of [0..255]\n * @param hexColor - css color hex string (with or without leading '#')\n */\nexport default (hexColor) => {\n  const offset = hexColor.startsWith('#') ? 1 : 0;\n  const red = parseInt(hexColor.substring(offset, offset + 2), 16);\n  const green = parseInt(hexColor.substring(offset + 2, offset + 4), 16);\n  const blue = parseInt(hexColor.substring(offset + 4, offset + 6), 16);\n  return [red, green, blue];\n};\n","\n/**\n * Returns an array containing 3x values: *red*, *green*, *blue*, *alpha* with each color value in range of [0..255]\n * @param hexColor - css color hex string (with or without leading '#')\n * @param [alpha=255] - alpha value in range [0..255]\n */\nexport default (hexColor, alpha = 255) => {\n  const offset = hexColor.startsWith('#') ? 1 : 0;\n  const red = parseInt(hexColor.substring(offset, offset + 2), 16);\n  const green = parseInt(hexColor.substring(offset + 2, offset + 4), 16);\n  const blue = parseInt(hexColor.substring(offset + 4, offset + 6), 16);\n  return [red, green, blue, alpha];\n};\n","\n/**\n * @param {number} n\n * @return {boolean}\n */\nconst isPowerOf2 = n => n !== 0 && (n & (n - 1)) === 0;\n\nexport default isPowerOf2;\n","\nconst DEG2RAD = Math.PI / 180.0;\n\nexport default (steps, radius = 1) => {\n  const halfRadius = 0.5 * radius;\n  const delta = 360.0 / steps;\n  const arr = [];\n\n  for (let i = 0, deg = 0; i < steps; i++) {\n    arr.push([\n      halfRadius * Math.sin(deg * DEG2RAD),\n      halfRadius * Math.cos(deg * DEG2RAD),\n    ]);\n    deg += delta;\n  }\n\n  return arr;\n};\n","\n/**\n * @param {number} a\n * @param {number} b\n * @return {number}\n */\nconst maxOf = (a, b) => (a > b ? a : b);\n\nexport default maxOf;\n","\nexport default names => (obj) => {\n  const newObj = {};\n  if (obj) {\n    names.forEach((key) => {\n      const val = obj[key];\n      if (val !== undefined) {\n        newObj[key] = val;\n      }\n    });\n  }\n  return newObj;\n};\n","\n/**\n * @private\n */\nexport default (options, propName, defValue, funcArgs) => {\n  if (options) {\n    const val = options[propName];\n    if (val !== undefined) return val;\n  }\n  if (typeof defValue === 'function') {\n    return defValue.call(null, funcArgs);\n  }\n  return defValue;\n};\n","\nexport default arr => arr[(Math.random() * arr.length) | 0];\n","\n/**\n * Converts an array containing (3-4)x color values [0..255] to float values [0..1].\n * Returns a new array, the old one will be untouched.\n */\nexport default colors => colors.map(col => col / 255);\n","\nconst isNumber = x => typeof x === 'number';\n\nexport const add = (a, b) => {\n  if (isNumber(a) && isNumber(b)) {\n    return a + b;\n  } else if (isNumber(a)) {\n    switch (a) {\n      case 0:\n        return b;\n      default:\n        return `${a} + ${b}`;\n    }\n  } else if (isNumber(b)) {\n    switch (b) {\n      case 0:\n        return a;\n      default:\n        return `${a} + ${b}`;\n    }\n  } else {\n    return `${a} + ${b}`;\n  }\n};\n\nexport const sub = (a, b) => {\n  if (isNumber(a) && isNumber(b)) {\n    return a - b;\n  } else if (isNumber(a)) {\n    switch (a) {\n      case 0:\n        return `-${b}`;\n      default:\n        return `${a} - ${b}`;\n    }\n  } else if (isNumber(b)) {\n    switch (b) {\n      case 0:\n        return a;\n      default:\n        return `${a} - ${b}`;\n    }\n  } else {\n    return `${a} - ${b}`;\n  }\n};\n\nexport const mul = (a, b) => {\n  if (isNumber(b) && isNumber(a)) {\n    return a * b;\n  } else if (isNumber(a)) {\n    switch (a) {\n      case 0:\n        return 0;\n      case 1:\n        return b;\n      default:\n        return `${a} * ${b}`;\n    }\n  } else if (isNumber(b)) {\n    switch (b) {\n      case 0:\n        return 0;\n      case 1:\n        return a;\n      default:\n        return `${a} * ${b}`;\n    }\n  } else {\n    return `${a} * ${b}`;\n  }\n};\n\nexport const asFloat = (number) => {\n  const str = `${number}`.trim();\n  if (str.match(/^[0-9]+$/)) {\n    return `${str}.0`;\n  }\n  return str;\n};\n\nexport const ret = res => `return ${res};`;\n\nexport const mat4 = (m00 = 0, m01 = 0, m02 = 0, m03 = 0, m10 = 0, m11 = 0, m12 = 0, m13 = 0, m20 = 0, m21 = 0, m22 = 0, m23 = 0, m30 = 0, m31 = 0, m32 = 0, m33 = 1, as = asFloat) => {\n  const toStr = as || (x => `${x}`);\n  return `mat4(${toStr(m00)}, ${toStr(m01)}, ${toStr(m02)}, ${toStr(m03)}, ${toStr(m10)}, ${toStr(m11)}, ${toStr(m12)}, ${toStr(m13)}, ${toStr(m20)}, ${toStr(m21)}, ${toStr(m22)}, ${toStr(m23)}, ${toStr(m30)}, ${toStr(m31)}, ${toStr(m32)}, ${toStr(m33)})`;\n};\n\nexport const rotate = (funcName = 'rotate', x = 0.0, y = 0.0, z = 1.0) => `\nmat4 ${funcName}(float angle) {\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n  ${ret(mat4(\n    add(mul('oc', x * x), 'c'), sub(mul('oc', x * y), mul(z, 's')), add(mul('oc', z * x), mul(y, 's')), 0,\n    add(mul('oc', x * y), mul(z, 's')), add(mul('oc', y * y), 'c'), sub(mul('oc', y * z), mul(x, 's')), 0,\n    sub(mul('oc', z * x), mul(y, 's')), add(mul('oc', y * z), mul(x, 's')), add(mul('oc', z * z), 'c'),\n  ))}\n}`;\n\nexport const rotateZ = (funcName = 'rotateZ') => rotate(funcName, 0, 0, 1);\n","/**\n * Represents a 2d axis aligned boundary box.\n *\n * @class AABB2\n * @param {number} [x0=0] - x0\n * @param {number} [x1=0] - x1\n * @param {number} [y0=0] - y0\n * @param {number} [y1=0] - y1\n */\n\nexport default class AABB2 {\n  constructor(x0 = 0, x1 = 0, y0 = 0, y1 = 0) {\n    if (x0 < x1) {\n      this.minX = x0;\n      this.maxX = x1;\n    } else {\n      this.minX = x1;\n      this.maxX = x0;\n    }\n\n    if (y0 < y1) {\n      this.minY = y0;\n      this.maxY = y1;\n    } else {\n      this.minY = y1;\n      this.maxY = y0;\n    }\n  }\n\n  get width() {\n    return this.maxX - this.minX;\n  }\n\n  get height() {\n    return this.maxY - this.minY;\n  }\n\n  /**\n   * @param {number} y\n   */\n  set width(w) {\n    this.maxX = this.minX + w;\n  }\n\n  /**\n   * @param {number} y\n   */\n  set height(h) {\n    this.maxY = this.minY + h;\n  }\n\n  get centerX() {\n    return this.minX + ((this.maxX - this.minX) / 2);\n  }\n\n  /**\n   * @type {number}\n   */\n  get centerY() {\n    return this.minY + ((this.maxY - this.minY) / 2);\n  }\n\n  /**\n   * Extend the boundary box.\n   *\n   * @param {number} x - x\n   * @param {number} y - y\n   */\n  addPoint(x, y) {\n    if (x < this.minX) {\n      this.minX = x;\n    } else if (x > this.maxX) {\n      this.maxX = x;\n    }\n\n    if (y < this.minY) {\n      this.minY = y;\n    } else if (y > this.maxY) {\n      this.maxY = y;\n    }\n  }\n\n  /**\n   * Determinates wether or the 2d point is inside this AABB.\n   *\n   * @param {number} x - x\n   * @param {number} y - y\n   * @return {boolean} return true when point is inside the aabb\n   */\n  isInside(x, y) {\n    return x >= this.minX && x < this.maxX && y >= this.minY && y < this.maxY;\n  }\n\n  /**\n   * Determinates wether or not this AABB intersects *aabb*.\n   *\n   * @param {AABB2} aabb - aabb\n   * @return {boolean} return true when there is some intersection between both\n   */\n  isIntersection(aabb) {\n    return !(\n      aabb.maxX <= this.minX ||\n      aabb.minX >= this.maxX ||\n      aabb.maxY <= this.minY ||\n      aabb.minY >= this.maxY\n    );\n  }\n}\n","/** @private */\n\n// https://gist.github.com/jed/982883\nconst uuid = ()=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,a=>(a^Math.random()*16>>a/4).toString(16)); // eslint-disable-line\n\nexport default uuid;\n","import generateUuid from './generateUuid';\n\n/**\n * @desc\n * Generic data reference with a *type* and *serial number*.\n *\n * Each time you are setting the `data` property to a new value, the serial number will be increased.\n * Use `.touch()` if you want to increase the serial number without changing the value.\n *\n */\nclass DataRef {\n  constructor(type, data, hints = null) {\n    this.type = type;\n    this.data_ = data;\n    this.id = (hints && hints.id) ? String(hints.id) : generateUuid();\n    this.serial = (hints && typeof hints.serial === 'number') ? hints.serial : 1;\n    this.hints = hints;\n  }\n\n  get data() {\n    return this.data_;\n  }\n\n  set data(next) {\n    const current = this.data_;\n\n    if (next !== current) {\n      this.data_ = next;\n      this.touch();\n    }\n  }\n\n  touch() {\n    this.serial++;\n  }\n\n  /**\n   * @param {DataRef} otherRef\n   * @returns {boolean} Returns `true` if *serial* is greater than 0 and equals to *serial* from `otherRef`\n   */\n  isSynced(otherRef) {\n    const { serial } = this;\n    return serial > 0 && serial === otherRef.serial;\n  }\n\n  /**\n   * @param {DataRef} otherRef\n   * @returns {boolean} - Returns the opposite of `isSynced()`\n   */\n  needSync(otherRef) {\n    return !this.isSynced(otherRef);\n  }\n\n  /**\n   * @param {DataRef} otherRef\n   * @param {function} callback\n   */\n  sync(otherRef, callback) {\n    if (this.needSync(otherRef)) {\n      callback(this.data);\n      this.serial = otherRef.serial;\n    }\n  }\n\n  /**\n   * Returns `true` if a hint exists and the hint value is as expected.\n   * If you leave out the expected value (call the method with just one argument)\n   * the methods just ckecks if the hint exists (regardless ofthe value).\n   *\n   * @param {string} hintKey\n   * @param {*} expectedValue\n   * @returns {boolean}\n   */\n  hasHint(hintKey, expectedValue) {\n    if (arguments.length === 1) {\n      return Boolean(this.hints && hintKey in this.hints);\n    }\n    return Boolean(this.hints && hintKey in this.hints && this.hints[hintKey] === expectedValue);\n  }\n\n  /**\n   * Returns a hint value.\n   *\n   * @param {string} hintKey\n   * @returns {*}\n   */\n  hint(hintKey) {\n    return this.hints && this.hints[hintKey];\n  }\n}\n\nexport default DataRef;\n","import DataRef from './DataRef';\n\nexport default class ElementIndexArray {\n  constructor(objectCount, itemCount, usage = 'static') {\n    this.objectCount = objectCount;\n    this.itemCount = itemCount;\n    this.length = objectCount * itemCount;\n    this.array = new Uint16Array(this.length);\n    this.ref = new DataRef('ElementIndexArray', this, {\n      usage,\n      target: 'ELEMENT_ARRAY_BUFFER',\n      typedArray: this.array,\n    });\n  }\n\n  /**\n   * @param {number} objectCount\n   * @param {number[]} indices\n   * @param {number} stride\n   * @param {number} [objectOffset=0]\n   * @param {string} [usage='static']\n   * @return {ElementIndexArray}\n   * @example\n   * // Create a ElementIndexArray for 10 quads where each quad made up of 2x triangles (4x vertices and 6x indices)\n   * const quadIndices = ElementIndexArray.Generate(10, [0, 1, 2, 0, 2, 3], 4)\n   * quadIndices.length        // => 60\n   * quadIndices.itemCount     // => 6\n   */\n  static Generate(objectCount, indices, stride, objectOffset = 0, usage = 'static') {\n    const arr = new ElementIndexArray(objectCount, indices.length, usage);\n\n    for (let i = 0; i < objectCount; ++i) {\n      for (let j = 0; j < indices.length; ++j) {\n        arr.array[(i * arr.itemCount) + j] = indices[j] + ((i + objectOffset) * stride);\n      }\n    }\n    return arr;\n  }\n}\n","import ElementIndexArray from './ElementIndexArray';\n\nexport default class IndexedPrimitive {\n  constructor(primitiveType, elementIndexArray) {\n    this.primitiveType = primitiveType;\n    this.elementIndexArray = elementIndexArray;\n  }\n\n  static createQuads(capacity) {\n    return new IndexedPrimitive(\n      'TRIANGLES',\n      ElementIndexArray.Generate(capacity, [0, 1, 2, 0, 2, 3], 4),\n    );\n  }\n}\n","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\r\n\r\n// Configuration Constants\r\nexport var EPSILON = 0.000001;\r\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\r\nexport var RANDOM = Math.random;\r\n\r\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Type} type Array type, such as Float32Array or Array\r\n */\r\nexport function setMatrixArrayType(type) {\r\n  ARRAY_TYPE = type;\r\n}\r\n\r\nvar degree = Math.PI / 180;\r\n\r\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\r\nexport function toRadian(a) {\r\n  return a * degree;\r\n}\r\n\r\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\r\nexport function equals(a, b) {\r\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\r\n}","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 3x3 Matrix\r\n * @module mat3\r\n */\r\n\r\n/**\r\n * Creates a new identity mat3\r\n *\r\n * @returns {mat3} a new 3x3 matrix\r\n */\r\nexport function create() {\r\n  var out = new glMatrix.ARRAY_TYPE(9);\r\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[3] = 0;\r\n    out[5] = 0;\r\n    out[6] = 0;\r\n    out[7] = 0;\r\n  }\r\n  out[0] = 1;\r\n  out[4] = 1;\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copies the upper-left 3x3 values into the given mat3.\r\n *\r\n * @param {mat3} out the receiving 3x3 matrix\r\n * @param {mat4} a   the source 4x4 matrix\r\n * @returns {mat3} out\r\n */\r\nexport function fromMat4(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[4];\r\n  out[4] = a[5];\r\n  out[5] = a[6];\r\n  out[6] = a[8];\r\n  out[7] = a[9];\r\n  out[8] = a[10];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new mat3 initialized with values from an existing matrix\r\n *\r\n * @param {mat3} a matrix to clone\r\n * @returns {mat3} a new 3x3 matrix\r\n */\r\nexport function clone(a) {\r\n  var out = new glMatrix.ARRAY_TYPE(9);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  out[6] = a[6];\r\n  out[7] = a[7];\r\n  out[8] = a[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one mat3 to another\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\r\nexport function copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  out[6] = a[6];\r\n  out[7] = a[7];\r\n  out[8] = a[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Create a new mat3 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} A new mat3\r\n */\r\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\r\n  var out = new glMatrix.ARRAY_TYPE(9);\r\n  out[0] = m00;\r\n  out[1] = m01;\r\n  out[2] = m02;\r\n  out[3] = m10;\r\n  out[4] = m11;\r\n  out[5] = m12;\r\n  out[6] = m20;\r\n  out[7] = m21;\r\n  out[8] = m22;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a mat3 to the given values\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\r\n * @returns {mat3} out\r\n */\r\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\r\n  out[0] = m00;\r\n  out[1] = m01;\r\n  out[2] = m02;\r\n  out[3] = m10;\r\n  out[4] = m11;\r\n  out[5] = m12;\r\n  out[6] = m20;\r\n  out[7] = m21;\r\n  out[8] = m22;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set a mat3 to the identity matrix\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @returns {mat3} out\r\n */\r\nexport function identity(out) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 1;\r\n  out[5] = 0;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transpose the values of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\r\nexport function transpose(out, a) {\r\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\r\n  if (out === a) {\r\n    var a01 = a[1],\r\n        a02 = a[2],\r\n        a12 = a[5];\r\n    out[1] = a[3];\r\n    out[2] = a[6];\r\n    out[3] = a01;\r\n    out[5] = a[7];\r\n    out[6] = a02;\r\n    out[7] = a12;\r\n  } else {\r\n    out[0] = a[0];\r\n    out[1] = a[3];\r\n    out[2] = a[6];\r\n    out[3] = a[1];\r\n    out[4] = a[4];\r\n    out[5] = a[7];\r\n    out[6] = a[2];\r\n    out[7] = a[5];\r\n    out[8] = a[8];\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Inverts a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\r\nexport function invert(out, a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2];\r\n  var a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5];\r\n  var a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8];\r\n\r\n  var b01 = a22 * a11 - a12 * a21;\r\n  var b11 = -a22 * a10 + a12 * a20;\r\n  var b21 = a21 * a10 - a11 * a20;\r\n\r\n  // Calculate the determinant\r\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\r\n\r\n  if (!det) {\r\n    return null;\r\n  }\r\n  det = 1.0 / det;\r\n\r\n  out[0] = b01 * det;\r\n  out[1] = (-a22 * a01 + a02 * a21) * det;\r\n  out[2] = (a12 * a01 - a02 * a11) * det;\r\n  out[3] = b11 * det;\r\n  out[4] = (a22 * a00 - a02 * a20) * det;\r\n  out[5] = (-a12 * a00 + a02 * a10) * det;\r\n  out[6] = b21 * det;\r\n  out[7] = (-a21 * a00 + a01 * a20) * det;\r\n  out[8] = (a11 * a00 - a01 * a10) * det;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the adjugate of a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the source matrix\r\n * @returns {mat3} out\r\n */\r\nexport function adjoint(out, a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2];\r\n  var a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5];\r\n  var a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8];\r\n\r\n  out[0] = a11 * a22 - a12 * a21;\r\n  out[1] = a02 * a21 - a01 * a22;\r\n  out[2] = a01 * a12 - a02 * a11;\r\n  out[3] = a12 * a20 - a10 * a22;\r\n  out[4] = a00 * a22 - a02 * a20;\r\n  out[5] = a02 * a10 - a00 * a12;\r\n  out[6] = a10 * a21 - a11 * a20;\r\n  out[7] = a01 * a20 - a00 * a21;\r\n  out[8] = a00 * a11 - a01 * a10;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the determinant of a mat3\r\n *\r\n * @param {mat3} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\r\nexport function determinant(a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2];\r\n  var a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5];\r\n  var a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8];\r\n\r\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\r\n}\r\n\r\n/**\r\n * Multiplies two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\r\nexport function multiply(out, a, b) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2];\r\n  var a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5];\r\n  var a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8];\r\n\r\n  var b00 = b[0],\r\n      b01 = b[1],\r\n      b02 = b[2];\r\n  var b10 = b[3],\r\n      b11 = b[4],\r\n      b12 = b[5];\r\n  var b20 = b[6],\r\n      b21 = b[7],\r\n      b22 = b[8];\r\n\r\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\r\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\r\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\r\n\r\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\r\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\r\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\r\n\r\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\r\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\r\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Translate a mat3 by the given vector\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to translate\r\n * @param {vec2} v vector to translate by\r\n * @returns {mat3} out\r\n */\r\nexport function translate(out, a, v) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5],\r\n      a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8],\r\n      x = v[0],\r\n      y = v[1];\r\n\r\n  out[0] = a00;\r\n  out[1] = a01;\r\n  out[2] = a02;\r\n\r\n  out[3] = a10;\r\n  out[4] = a11;\r\n  out[5] = a12;\r\n\r\n  out[6] = x * a00 + y * a10 + a20;\r\n  out[7] = x * a01 + y * a11 + a21;\r\n  out[8] = x * a02 + y * a12 + a22;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a mat3 by the given angle\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\r\nexport function rotate(out, a, rad) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a10 = a[3],\r\n      a11 = a[4],\r\n      a12 = a[5],\r\n      a20 = a[6],\r\n      a21 = a[7],\r\n      a22 = a[8],\r\n      s = Math.sin(rad),\r\n      c = Math.cos(rad);\r\n\r\n  out[0] = c * a00 + s * a10;\r\n  out[1] = c * a01 + s * a11;\r\n  out[2] = c * a02 + s * a12;\r\n\r\n  out[3] = c * a10 - s * a00;\r\n  out[4] = c * a11 - s * a01;\r\n  out[5] = c * a12 - s * a02;\r\n\r\n  out[6] = a20;\r\n  out[7] = a21;\r\n  out[8] = a22;\r\n  return out;\r\n};\r\n\r\n/**\r\n * Scales the mat3 by the dimensions in the given vec2\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to rotate\r\n * @param {vec2} v the vec2 to scale the matrix by\r\n * @returns {mat3} out\r\n **/\r\nexport function scale(out, a, v) {\r\n  var x = v[0],\r\n      y = v[1];\r\n\r\n  out[0] = x * a[0];\r\n  out[1] = x * a[1];\r\n  out[2] = x * a[2];\r\n\r\n  out[3] = y * a[3];\r\n  out[4] = y * a[4];\r\n  out[5] = y * a[5];\r\n\r\n  out[6] = a[6];\r\n  out[7] = a[7];\r\n  out[8] = a[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.translate(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Translation vector\r\n * @returns {mat3} out\r\n */\r\nexport function fromTranslation(out, v) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 1;\r\n  out[5] = 0;\r\n  out[6] = v[0];\r\n  out[7] = v[1];\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a given angle\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.rotate(dest, dest, rad);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat3} out\r\n */\r\nexport function fromRotation(out, rad) {\r\n  var s = Math.sin(rad),\r\n      c = Math.cos(rad);\r\n\r\n  out[0] = c;\r\n  out[1] = s;\r\n  out[2] = 0;\r\n\r\n  out[3] = -s;\r\n  out[4] = c;\r\n  out[5] = 0;\r\n\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat3.identity(dest);\r\n *     mat3.scale(dest, dest, vec);\r\n *\r\n * @param {mat3} out mat3 receiving operation result\r\n * @param {vec2} v Scaling vector\r\n * @returns {mat3} out\r\n */\r\nexport function fromScaling(out, v) {\r\n  out[0] = v[0];\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n\r\n  out[3] = 0;\r\n  out[4] = v[1];\r\n  out[5] = 0;\r\n\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copies the values from a mat2d into a mat3\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat2d} a the matrix to copy\r\n * @returns {mat3} out\r\n **/\r\nexport function fromMat2d(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = 0;\r\n\r\n  out[3] = a[2];\r\n  out[4] = a[3];\r\n  out[5] = 0;\r\n\r\n  out[6] = a[4];\r\n  out[7] = a[5];\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n* Calculates a 3x3 matrix from the given quaternion\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {quat} q Quaternion to create matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\r\nexport function fromQuat(out, q) {\r\n  var x = q[0],\r\n      y = q[1],\r\n      z = q[2],\r\n      w = q[3];\r\n  var x2 = x + x;\r\n  var y2 = y + y;\r\n  var z2 = z + z;\r\n\r\n  var xx = x * x2;\r\n  var yx = y * x2;\r\n  var yy = y * y2;\r\n  var zx = z * x2;\r\n  var zy = z * y2;\r\n  var zz = z * z2;\r\n  var wx = w * x2;\r\n  var wy = w * y2;\r\n  var wz = w * z2;\r\n\r\n  out[0] = 1 - yy - zz;\r\n  out[3] = yx - wz;\r\n  out[6] = zx + wy;\r\n\r\n  out[1] = yx + wz;\r\n  out[4] = 1 - xx - zz;\r\n  out[7] = zy - wx;\r\n\r\n  out[2] = zx - wy;\r\n  out[5] = zy + wx;\r\n  out[8] = 1 - xx - yy;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\r\n*\r\n* @param {mat3} out mat3 receiving operation result\r\n* @param {mat4} a Mat4 to derive the normal matrix from\r\n*\r\n* @returns {mat3} out\r\n*/\r\nexport function normalFromMat4(out, a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a03 = a[3];\r\n  var a10 = a[4],\r\n      a11 = a[5],\r\n      a12 = a[6],\r\n      a13 = a[7];\r\n  var a20 = a[8],\r\n      a21 = a[9],\r\n      a22 = a[10],\r\n      a23 = a[11];\r\n  var a30 = a[12],\r\n      a31 = a[13],\r\n      a32 = a[14],\r\n      a33 = a[15];\r\n\r\n  var b00 = a00 * a11 - a01 * a10;\r\n  var b01 = a00 * a12 - a02 * a10;\r\n  var b02 = a00 * a13 - a03 * a10;\r\n  var b03 = a01 * a12 - a02 * a11;\r\n  var b04 = a01 * a13 - a03 * a11;\r\n  var b05 = a02 * a13 - a03 * a12;\r\n  var b06 = a20 * a31 - a21 * a30;\r\n  var b07 = a20 * a32 - a22 * a30;\r\n  var b08 = a20 * a33 - a23 * a30;\r\n  var b09 = a21 * a32 - a22 * a31;\r\n  var b10 = a21 * a33 - a23 * a31;\r\n  var b11 = a22 * a33 - a23 * a32;\r\n\r\n  // Calculate the determinant\r\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n\r\n  if (!det) {\r\n    return null;\r\n  }\r\n  det = 1.0 / det;\r\n\r\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\r\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\r\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\r\n\r\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\r\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\r\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\r\n\r\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\r\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\r\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a 2D projection matrix with the given bounds\r\n *\r\n * @param {mat3} out mat3 frustum matrix will be written into\r\n * @param {number} width Width of your gl context\r\n * @param {number} height Height of gl context\r\n * @returns {mat3} out\r\n */\r\nexport function projection(out, width, height) {\r\n  out[0] = 2 / width;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = -2 / height;\r\n  out[5] = 0;\r\n  out[6] = -1;\r\n  out[7] = 1;\r\n  out[8] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a mat3\r\n *\r\n * @param {mat3} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\r\nexport function str(a) {\r\n  return 'mat3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ')';\r\n}\r\n\r\n/**\r\n * Returns Frobenius norm of a mat3\r\n *\r\n * @param {mat3} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\r\nexport function frob(a) {\r\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2));\r\n}\r\n\r\n/**\r\n * Adds two mat3's\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\r\nexport function add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  out[3] = a[3] + b[3];\r\n  out[4] = a[4] + b[4];\r\n  out[5] = a[5] + b[5];\r\n  out[6] = a[6] + b[6];\r\n  out[7] = a[7] + b[7];\r\n  out[8] = a[8] + b[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @returns {mat3} out\r\n */\r\nexport function subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  out[2] = a[2] - b[2];\r\n  out[3] = a[3] - b[3];\r\n  out[4] = a[4] - b[4];\r\n  out[5] = a[5] - b[5];\r\n  out[6] = a[6] - b[6];\r\n  out[7] = a[7] - b[7];\r\n  out[8] = a[8] - b[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat3} out the receiving matrix\r\n * @param {mat3} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat3} out\r\n */\r\nexport function multiplyScalar(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  out[3] = a[3] * b;\r\n  out[4] = a[4] * b;\r\n  out[5] = a[5] * b;\r\n  out[6] = a[6] * b;\r\n  out[7] = a[7] * b;\r\n  out[8] = a[8] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat3} out the receiving vector\r\n * @param {mat3} a the first operand\r\n * @param {mat3} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat3} out\r\n */\r\nexport function multiplyScalarAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  out[2] = a[2] + b[2] * scale;\r\n  out[3] = a[3] + b[3] * scale;\r\n  out[4] = a[4] + b[4] * scale;\r\n  out[5] = a[5] + b[5] * scale;\r\n  out[6] = a[6] + b[6] * scale;\r\n  out[7] = a[7] + b[7] * scale;\r\n  out[8] = a[8] + b[8] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nexport function exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat3} a The first matrix.\r\n * @param {mat3} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nexport function equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3],\r\n      a4 = a[4],\r\n      a5 = a[5],\r\n      a6 = a[6],\r\n      a7 = a[7],\r\n      a8 = a[8];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3],\r\n      b4 = b[4],\r\n      b5 = b[5],\r\n      b6 = b[6],\r\n      b7 = b[7],\r\n      b8 = b[8];\r\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\r\n}\r\n\r\n/**\r\n * Alias for {@link mat3.multiply}\r\n * @function\r\n */\r\nexport var mul = multiply;\r\n\r\n/**\r\n * Alias for {@link mat3.subtract}\r\n * @function\r\n */\r\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\r\n\r\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\r\nexport function create() {\r\n  var out = new glMatrix.ARRAY_TYPE(16);\r\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[3] = 0;\r\n    out[4] = 0;\r\n    out[6] = 0;\r\n    out[7] = 0;\r\n    out[8] = 0;\r\n    out[9] = 0;\r\n    out[11] = 0;\r\n    out[12] = 0;\r\n    out[13] = 0;\r\n    out[14] = 0;\r\n  }\r\n  out[0] = 1;\r\n  out[5] = 1;\r\n  out[10] = 1;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {mat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\r\nexport function clone(a) {\r\n  var out = new glMatrix.ARRAY_TYPE(16);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  out[6] = a[6];\r\n  out[7] = a[7];\r\n  out[8] = a[8];\r\n  out[9] = a[9];\r\n  out[10] = a[10];\r\n  out[11] = a[11];\r\n  out[12] = a[12];\r\n  out[13] = a[13];\r\n  out[14] = a[14];\r\n  out[15] = a[15];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nexport function copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  out[4] = a[4];\r\n  out[5] = a[5];\r\n  out[6] = a[6];\r\n  out[7] = a[7];\r\n  out[8] = a[8];\r\n  out[9] = a[9];\r\n  out[10] = a[10];\r\n  out[11] = a[11];\r\n  out[12] = a[12];\r\n  out[13] = a[13];\r\n  out[14] = a[14];\r\n  out[15] = a[15];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\r\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\r\n  var out = new glMatrix.ARRAY_TYPE(16);\r\n  out[0] = m00;\r\n  out[1] = m01;\r\n  out[2] = m02;\r\n  out[3] = m03;\r\n  out[4] = m10;\r\n  out[5] = m11;\r\n  out[6] = m12;\r\n  out[7] = m13;\r\n  out[8] = m20;\r\n  out[9] = m21;\r\n  out[10] = m22;\r\n  out[11] = m23;\r\n  out[12] = m30;\r\n  out[13] = m31;\r\n  out[14] = m32;\r\n  out[15] = m33;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\r\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\r\n  out[0] = m00;\r\n  out[1] = m01;\r\n  out[2] = m02;\r\n  out[3] = m03;\r\n  out[4] = m10;\r\n  out[5] = m11;\r\n  out[6] = m12;\r\n  out[7] = m13;\r\n  out[8] = m20;\r\n  out[9] = m21;\r\n  out[10] = m22;\r\n  out[11] = m23;\r\n  out[12] = m30;\r\n  out[13] = m31;\r\n  out[14] = m32;\r\n  out[15] = m33;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\r\nexport function identity(out) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = 1;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[10] = 1;\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nexport function transpose(out, a) {\r\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\r\n  if (out === a) {\r\n    var a01 = a[1],\r\n        a02 = a[2],\r\n        a03 = a[3];\r\n    var a12 = a[6],\r\n        a13 = a[7];\r\n    var a23 = a[11];\r\n\r\n    out[1] = a[4];\r\n    out[2] = a[8];\r\n    out[3] = a[12];\r\n    out[4] = a01;\r\n    out[6] = a[9];\r\n    out[7] = a[13];\r\n    out[8] = a02;\r\n    out[9] = a12;\r\n    out[11] = a[14];\r\n    out[12] = a03;\r\n    out[13] = a13;\r\n    out[14] = a23;\r\n  } else {\r\n    out[0] = a[0];\r\n    out[1] = a[4];\r\n    out[2] = a[8];\r\n    out[3] = a[12];\r\n    out[4] = a[1];\r\n    out[5] = a[5];\r\n    out[6] = a[9];\r\n    out[7] = a[13];\r\n    out[8] = a[2];\r\n    out[9] = a[6];\r\n    out[10] = a[10];\r\n    out[11] = a[14];\r\n    out[12] = a[3];\r\n    out[13] = a[7];\r\n    out[14] = a[11];\r\n    out[15] = a[15];\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nexport function invert(out, a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a03 = a[3];\r\n  var a10 = a[4],\r\n      a11 = a[5],\r\n      a12 = a[6],\r\n      a13 = a[7];\r\n  var a20 = a[8],\r\n      a21 = a[9],\r\n      a22 = a[10],\r\n      a23 = a[11];\r\n  var a30 = a[12],\r\n      a31 = a[13],\r\n      a32 = a[14],\r\n      a33 = a[15];\r\n\r\n  var b00 = a00 * a11 - a01 * a10;\r\n  var b01 = a00 * a12 - a02 * a10;\r\n  var b02 = a00 * a13 - a03 * a10;\r\n  var b03 = a01 * a12 - a02 * a11;\r\n  var b04 = a01 * a13 - a03 * a11;\r\n  var b05 = a02 * a13 - a03 * a12;\r\n  var b06 = a20 * a31 - a21 * a30;\r\n  var b07 = a20 * a32 - a22 * a30;\r\n  var b08 = a20 * a33 - a23 * a30;\r\n  var b09 = a21 * a32 - a22 * a31;\r\n  var b10 = a21 * a33 - a23 * a31;\r\n  var b11 = a22 * a33 - a23 * a32;\r\n\r\n  // Calculate the determinant\r\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n\r\n  if (!det) {\r\n    return null;\r\n  }\r\n  det = 1.0 / det;\r\n\r\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\r\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\r\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\r\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\r\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\r\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\r\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\r\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\r\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\r\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\r\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\r\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\r\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\r\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\r\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\r\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\r\nexport function adjoint(out, a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a03 = a[3];\r\n  var a10 = a[4],\r\n      a11 = a[5],\r\n      a12 = a[6],\r\n      a13 = a[7];\r\n  var a20 = a[8],\r\n      a21 = a[9],\r\n      a22 = a[10],\r\n      a23 = a[11];\r\n  var a30 = a[12],\r\n      a31 = a[13],\r\n      a32 = a[14],\r\n      a33 = a[15];\r\n\r\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\r\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\r\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\r\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\r\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\r\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\r\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\r\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\r\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\r\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\r\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\r\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\r\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\r\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\r\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\r\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {mat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\r\nexport function determinant(a) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a03 = a[3];\r\n  var a10 = a[4],\r\n      a11 = a[5],\r\n      a12 = a[6],\r\n      a13 = a[7];\r\n  var a20 = a[8],\r\n      a21 = a[9],\r\n      a22 = a[10],\r\n      a23 = a[11];\r\n  var a30 = a[12],\r\n      a31 = a[13],\r\n      a32 = a[14],\r\n      a33 = a[15];\r\n\r\n  var b00 = a00 * a11 - a01 * a10;\r\n  var b01 = a00 * a12 - a02 * a10;\r\n  var b02 = a00 * a13 - a03 * a10;\r\n  var b03 = a01 * a12 - a02 * a11;\r\n  var b04 = a01 * a13 - a03 * a11;\r\n  var b05 = a02 * a13 - a03 * a12;\r\n  var b06 = a20 * a31 - a21 * a30;\r\n  var b07 = a20 * a32 - a22 * a30;\r\n  var b08 = a20 * a33 - a23 * a30;\r\n  var b09 = a21 * a32 - a22 * a31;\r\n  var b10 = a21 * a33 - a23 * a31;\r\n  var b11 = a22 * a33 - a23 * a32;\r\n\r\n  // Calculate the determinant\r\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\r\n}\r\n\r\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\r\nexport function multiply(out, a, b) {\r\n  var a00 = a[0],\r\n      a01 = a[1],\r\n      a02 = a[2],\r\n      a03 = a[3];\r\n  var a10 = a[4],\r\n      a11 = a[5],\r\n      a12 = a[6],\r\n      a13 = a[7];\r\n  var a20 = a[8],\r\n      a21 = a[9],\r\n      a22 = a[10],\r\n      a23 = a[11];\r\n  var a30 = a[12],\r\n      a31 = a[13],\r\n      a32 = a[14],\r\n      a33 = a[15];\r\n\r\n  // Cache only the current line of the second matrix\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3];\r\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n\r\n  b0 = b[4];b1 = b[5];b2 = b[6];b3 = b[7];\r\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n\r\n  b0 = b[8];b1 = b[9];b2 = b[10];b3 = b[11];\r\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n\r\n  b0 = b[12];b1 = b[13];b2 = b[14];b3 = b[15];\r\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\r\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\r\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\r\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\r\nexport function translate(out, a, v) {\r\n  var x = v[0],\r\n      y = v[1],\r\n      z = v[2];\r\n  var a00 = void 0,\r\n      a01 = void 0,\r\n      a02 = void 0,\r\n      a03 = void 0;\r\n  var a10 = void 0,\r\n      a11 = void 0,\r\n      a12 = void 0,\r\n      a13 = void 0;\r\n  var a20 = void 0,\r\n      a21 = void 0,\r\n      a22 = void 0,\r\n      a23 = void 0;\r\n\r\n  if (a === out) {\r\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\r\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\r\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\r\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\r\n  } else {\r\n    a00 = a[0];a01 = a[1];a02 = a[2];a03 = a[3];\r\n    a10 = a[4];a11 = a[5];a12 = a[6];a13 = a[7];\r\n    a20 = a[8];a21 = a[9];a22 = a[10];a23 = a[11];\r\n\r\n    out[0] = a00;out[1] = a01;out[2] = a02;out[3] = a03;\r\n    out[4] = a10;out[5] = a11;out[6] = a12;out[7] = a13;\r\n    out[8] = a20;out[9] = a21;out[10] = a22;out[11] = a23;\r\n\r\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\r\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\r\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\r\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\r\nexport function scale(out, a, v) {\r\n  var x = v[0],\r\n      y = v[1],\r\n      z = v[2];\r\n\r\n  out[0] = a[0] * x;\r\n  out[1] = a[1] * x;\r\n  out[2] = a[2] * x;\r\n  out[3] = a[3] * x;\r\n  out[4] = a[4] * y;\r\n  out[5] = a[5] * y;\r\n  out[6] = a[6] * y;\r\n  out[7] = a[7] * y;\r\n  out[8] = a[8] * z;\r\n  out[9] = a[9] * z;\r\n  out[10] = a[10] * z;\r\n  out[11] = a[11] * z;\r\n  out[12] = a[12];\r\n  out[13] = a[13];\r\n  out[14] = a[14];\r\n  out[15] = a[15];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\r\nexport function rotate(out, a, rad, axis) {\r\n  var x = axis[0],\r\n      y = axis[1],\r\n      z = axis[2];\r\n  var len = Math.sqrt(x * x + y * y + z * z);\r\n  var s = void 0,\r\n      c = void 0,\r\n      t = void 0;\r\n  var a00 = void 0,\r\n      a01 = void 0,\r\n      a02 = void 0,\r\n      a03 = void 0;\r\n  var a10 = void 0,\r\n      a11 = void 0,\r\n      a12 = void 0,\r\n      a13 = void 0;\r\n  var a20 = void 0,\r\n      a21 = void 0,\r\n      a22 = void 0,\r\n      a23 = void 0;\r\n  var b00 = void 0,\r\n      b01 = void 0,\r\n      b02 = void 0;\r\n  var b10 = void 0,\r\n      b11 = void 0,\r\n      b12 = void 0;\r\n  var b20 = void 0,\r\n      b21 = void 0,\r\n      b22 = void 0;\r\n\r\n  if (len < glMatrix.EPSILON) {\r\n    return null;\r\n  }\r\n\r\n  len = 1 / len;\r\n  x *= len;\r\n  y *= len;\r\n  z *= len;\r\n\r\n  s = Math.sin(rad);\r\n  c = Math.cos(rad);\r\n  t = 1 - c;\r\n\r\n  a00 = a[0];a01 = a[1];a02 = a[2];a03 = a[3];\r\n  a10 = a[4];a11 = a[5];a12 = a[6];a13 = a[7];\r\n  a20 = a[8];a21 = a[9];a22 = a[10];a23 = a[11];\r\n\r\n  // Construct the elements of the rotation matrix\r\n  b00 = x * x * t + c;b01 = y * x * t + z * s;b02 = z * x * t - y * s;\r\n  b10 = x * y * t - z * s;b11 = y * y * t + c;b12 = z * y * t + x * s;\r\n  b20 = x * z * t + y * s;b21 = y * z * t - x * s;b22 = z * z * t + c;\r\n\r\n  // Perform rotation-specific matrix multiplication\r\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\r\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\r\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\r\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\r\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\r\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\r\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\r\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\r\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\r\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\r\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\r\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\r\n\r\n  if (a !== out) {\r\n    // If the source and destination differ, copy the unchanged last row\r\n    out[12] = a[12];\r\n    out[13] = a[13];\r\n    out[14] = a[14];\r\n    out[15] = a[15];\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nexport function rotateX(out, a, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n  var a10 = a[4];\r\n  var a11 = a[5];\r\n  var a12 = a[6];\r\n  var a13 = a[7];\r\n  var a20 = a[8];\r\n  var a21 = a[9];\r\n  var a22 = a[10];\r\n  var a23 = a[11];\r\n\r\n  if (a !== out) {\r\n    // If the source and destination differ, copy the unchanged rows\r\n    out[0] = a[0];\r\n    out[1] = a[1];\r\n    out[2] = a[2];\r\n    out[3] = a[3];\r\n    out[12] = a[12];\r\n    out[13] = a[13];\r\n    out[14] = a[14];\r\n    out[15] = a[15];\r\n  }\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[4] = a10 * c + a20 * s;\r\n  out[5] = a11 * c + a21 * s;\r\n  out[6] = a12 * c + a22 * s;\r\n  out[7] = a13 * c + a23 * s;\r\n  out[8] = a20 * c - a10 * s;\r\n  out[9] = a21 * c - a11 * s;\r\n  out[10] = a22 * c - a12 * s;\r\n  out[11] = a23 * c - a13 * s;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nexport function rotateY(out, a, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n  var a00 = a[0];\r\n  var a01 = a[1];\r\n  var a02 = a[2];\r\n  var a03 = a[3];\r\n  var a20 = a[8];\r\n  var a21 = a[9];\r\n  var a22 = a[10];\r\n  var a23 = a[11];\r\n\r\n  if (a !== out) {\r\n    // If the source and destination differ, copy the unchanged rows\r\n    out[4] = a[4];\r\n    out[5] = a[5];\r\n    out[6] = a[6];\r\n    out[7] = a[7];\r\n    out[12] = a[12];\r\n    out[13] = a[13];\r\n    out[14] = a[14];\r\n    out[15] = a[15];\r\n  }\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[0] = a00 * c - a20 * s;\r\n  out[1] = a01 * c - a21 * s;\r\n  out[2] = a02 * c - a22 * s;\r\n  out[3] = a03 * c - a23 * s;\r\n  out[8] = a00 * s + a20 * c;\r\n  out[9] = a01 * s + a21 * c;\r\n  out[10] = a02 * s + a22 * c;\r\n  out[11] = a03 * s + a23 * c;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nexport function rotateZ(out, a, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n  var a00 = a[0];\r\n  var a01 = a[1];\r\n  var a02 = a[2];\r\n  var a03 = a[3];\r\n  var a10 = a[4];\r\n  var a11 = a[5];\r\n  var a12 = a[6];\r\n  var a13 = a[7];\r\n\r\n  if (a !== out) {\r\n    // If the source and destination differ, copy the unchanged last row\r\n    out[8] = a[8];\r\n    out[9] = a[9];\r\n    out[10] = a[10];\r\n    out[11] = a[11];\r\n    out[12] = a[12];\r\n    out[13] = a[13];\r\n    out[14] = a[14];\r\n    out[15] = a[15];\r\n  }\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[0] = a00 * c + a10 * s;\r\n  out[1] = a01 * c + a11 * s;\r\n  out[2] = a02 * c + a12 * s;\r\n  out[3] = a03 * c + a13 * s;\r\n  out[4] = a10 * c - a00 * s;\r\n  out[5] = a11 * c - a01 * s;\r\n  out[6] = a12 * c - a02 * s;\r\n  out[7] = a13 * c - a03 * s;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\r\nexport function fromTranslation(out, v) {\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = 1;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[10] = 1;\r\n  out[11] = 0;\r\n  out[12] = v[0];\r\n  out[13] = v[1];\r\n  out[14] = v[2];\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\r\nexport function fromScaling(out, v) {\r\n  out[0] = v[0];\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = v[1];\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[10] = v[2];\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\r\nexport function fromRotation(out, rad, axis) {\r\n  var x = axis[0],\r\n      y = axis[1],\r\n      z = axis[2];\r\n  var len = Math.sqrt(x * x + y * y + z * z);\r\n  var s = void 0,\r\n      c = void 0,\r\n      t = void 0;\r\n\r\n  if (len < glMatrix.EPSILON) {\r\n    return null;\r\n  }\r\n\r\n  len = 1 / len;\r\n  x *= len;\r\n  y *= len;\r\n  z *= len;\r\n\r\n  s = Math.sin(rad);\r\n  c = Math.cos(rad);\r\n  t = 1 - c;\r\n\r\n  // Perform rotation-specific matrix multiplication\r\n  out[0] = x * x * t + c;\r\n  out[1] = y * x * t + z * s;\r\n  out[2] = z * x * t - y * s;\r\n  out[3] = 0;\r\n  out[4] = x * y * t - z * s;\r\n  out[5] = y * y * t + c;\r\n  out[6] = z * y * t + x * s;\r\n  out[7] = 0;\r\n  out[8] = x * z * t + y * s;\r\n  out[9] = y * z * t - x * s;\r\n  out[10] = z * z * t + c;\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nexport function fromXRotation(out, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[0] = 1;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = c;\r\n  out[6] = s;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = -s;\r\n  out[10] = c;\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nexport function fromYRotation(out, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[0] = c;\r\n  out[1] = 0;\r\n  out[2] = -s;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = 1;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = s;\r\n  out[9] = 0;\r\n  out[10] = c;\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\r\nexport function fromZRotation(out, rad) {\r\n  var s = Math.sin(rad);\r\n  var c = Math.cos(rad);\r\n\r\n  // Perform axis-specific matrix multiplication\r\n  out[0] = c;\r\n  out[1] = s;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = -s;\r\n  out[5] = c;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[10] = 1;\r\n  out[11] = 0;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\r\nexport function fromRotationTranslation(out, q, v) {\r\n  // Quaternion math\r\n  var x = q[0],\r\n      y = q[1],\r\n      z = q[2],\r\n      w = q[3];\r\n  var x2 = x + x;\r\n  var y2 = y + y;\r\n  var z2 = z + z;\r\n\r\n  var xx = x * x2;\r\n  var xy = x * y2;\r\n  var xz = x * z2;\r\n  var yy = y * y2;\r\n  var yz = y * z2;\r\n  var zz = z * z2;\r\n  var wx = w * x2;\r\n  var wy = w * y2;\r\n  var wz = w * z2;\r\n\r\n  out[0] = 1 - (yy + zz);\r\n  out[1] = xy + wz;\r\n  out[2] = xz - wy;\r\n  out[3] = 0;\r\n  out[4] = xy - wz;\r\n  out[5] = 1 - (xx + zz);\r\n  out[6] = yz + wx;\r\n  out[7] = 0;\r\n  out[8] = xz + wy;\r\n  out[9] = yz - wx;\r\n  out[10] = 1 - (xx + yy);\r\n  out[11] = 0;\r\n  out[12] = v[0];\r\n  out[13] = v[1];\r\n  out[14] = v[2];\r\n  out[15] = 1;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {quat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\r\nexport function fromQuat2(out, a) {\r\n  var translation = new glMatrix.ARRAY_TYPE(3);\r\n  var bx = -a[0],\r\n      by = -a[1],\r\n      bz = -a[2],\r\n      bw = a[3],\r\n      ax = a[4],\r\n      ay = a[5],\r\n      az = a[6],\r\n      aw = a[7];\r\n\r\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw;\r\n  //Only scale if it makes sense\r\n  if (magnitude > 0) {\r\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\r\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\r\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\r\n  } else {\r\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\r\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\r\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\r\n  }\r\n  fromRotationTranslation(out, a, translation);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\r\nexport function getTranslation(out, mat) {\r\n  out[0] = mat[12];\r\n  out[1] = mat[13];\r\n  out[2] = mat[14];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\r\nexport function getScaling(out, mat) {\r\n  var m11 = mat[0];\r\n  var m12 = mat[1];\r\n  var m13 = mat[2];\r\n  var m21 = mat[4];\r\n  var m22 = mat[5];\r\n  var m23 = mat[6];\r\n  var m31 = mat[8];\r\n  var m32 = mat[9];\r\n  var m33 = mat[10];\r\n\r\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\r\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\r\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {mat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\r\nexport function getRotation(out, mat) {\r\n  // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n  var trace = mat[0] + mat[5] + mat[10];\r\n  var S = 0;\r\n\r\n  if (trace > 0) {\r\n    S = Math.sqrt(trace + 1.0) * 2;\r\n    out[3] = 0.25 * S;\r\n    out[0] = (mat[6] - mat[9]) / S;\r\n    out[1] = (mat[8] - mat[2]) / S;\r\n    out[2] = (mat[1] - mat[4]) / S;\r\n  } else if (mat[0] > mat[5] && mat[0] > mat[10]) {\r\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\r\n    out[3] = (mat[6] - mat[9]) / S;\r\n    out[0] = 0.25 * S;\r\n    out[1] = (mat[1] + mat[4]) / S;\r\n    out[2] = (mat[8] + mat[2]) / S;\r\n  } else if (mat[5] > mat[10]) {\r\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\r\n    out[3] = (mat[8] - mat[2]) / S;\r\n    out[0] = (mat[1] + mat[4]) / S;\r\n    out[1] = 0.25 * S;\r\n    out[2] = (mat[6] + mat[9]) / S;\r\n  } else {\r\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\r\n    out[3] = (mat[1] - mat[4]) / S;\r\n    out[0] = (mat[8] + mat[2]) / S;\r\n    out[1] = (mat[6] + mat[9]) / S;\r\n    out[2] = 0.25 * S;\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\r\nexport function fromRotationTranslationScale(out, q, v, s) {\r\n  // Quaternion math\r\n  var x = q[0],\r\n      y = q[1],\r\n      z = q[2],\r\n      w = q[3];\r\n  var x2 = x + x;\r\n  var y2 = y + y;\r\n  var z2 = z + z;\r\n\r\n  var xx = x * x2;\r\n  var xy = x * y2;\r\n  var xz = x * z2;\r\n  var yy = y * y2;\r\n  var yz = y * z2;\r\n  var zz = z * z2;\r\n  var wx = w * x2;\r\n  var wy = w * y2;\r\n  var wz = w * z2;\r\n  var sx = s[0];\r\n  var sy = s[1];\r\n  var sz = s[2];\r\n\r\n  out[0] = (1 - (yy + zz)) * sx;\r\n  out[1] = (xy + wz) * sx;\r\n  out[2] = (xz - wy) * sx;\r\n  out[3] = 0;\r\n  out[4] = (xy - wz) * sy;\r\n  out[5] = (1 - (xx + zz)) * sy;\r\n  out[6] = (yz + wx) * sy;\r\n  out[7] = 0;\r\n  out[8] = (xz + wy) * sz;\r\n  out[9] = (yz - wx) * sz;\r\n  out[10] = (1 - (xx + yy)) * sz;\r\n  out[11] = 0;\r\n  out[12] = v[0];\r\n  out[13] = v[1];\r\n  out[14] = v[2];\r\n  out[15] = 1;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @param {vec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\r\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\r\n  // Quaternion math\r\n  var x = q[0],\r\n      y = q[1],\r\n      z = q[2],\r\n      w = q[3];\r\n  var x2 = x + x;\r\n  var y2 = y + y;\r\n  var z2 = z + z;\r\n\r\n  var xx = x * x2;\r\n  var xy = x * y2;\r\n  var xz = x * z2;\r\n  var yy = y * y2;\r\n  var yz = y * z2;\r\n  var zz = z * z2;\r\n  var wx = w * x2;\r\n  var wy = w * y2;\r\n  var wz = w * z2;\r\n\r\n  var sx = s[0];\r\n  var sy = s[1];\r\n  var sz = s[2];\r\n\r\n  var ox = o[0];\r\n  var oy = o[1];\r\n  var oz = o[2];\r\n\r\n  var out0 = (1 - (yy + zz)) * sx;\r\n  var out1 = (xy + wz) * sx;\r\n  var out2 = (xz - wy) * sx;\r\n  var out4 = (xy - wz) * sy;\r\n  var out5 = (1 - (xx + zz)) * sy;\r\n  var out6 = (yz + wx) * sy;\r\n  var out8 = (xz + wy) * sz;\r\n  var out9 = (yz - wx) * sz;\r\n  var out10 = (1 - (xx + yy)) * sz;\r\n\r\n  out[0] = out0;\r\n  out[1] = out1;\r\n  out[2] = out2;\r\n  out[3] = 0;\r\n  out[4] = out4;\r\n  out[5] = out5;\r\n  out[6] = out6;\r\n  out[7] = 0;\r\n  out[8] = out8;\r\n  out[9] = out9;\r\n  out[10] = out10;\r\n  out[11] = 0;\r\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\r\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\r\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\r\n  out[15] = 1;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\r\nexport function fromQuat(out, q) {\r\n  var x = q[0],\r\n      y = q[1],\r\n      z = q[2],\r\n      w = q[3];\r\n  var x2 = x + x;\r\n  var y2 = y + y;\r\n  var z2 = z + z;\r\n\r\n  var xx = x * x2;\r\n  var yx = y * x2;\r\n  var yy = y * y2;\r\n  var zx = z * x2;\r\n  var zy = z * y2;\r\n  var zz = z * z2;\r\n  var wx = w * x2;\r\n  var wy = w * y2;\r\n  var wz = w * z2;\r\n\r\n  out[0] = 1 - yy - zz;\r\n  out[1] = yx + wz;\r\n  out[2] = zx - wy;\r\n  out[3] = 0;\r\n\r\n  out[4] = yx - wz;\r\n  out[5] = 1 - xx - zz;\r\n  out[6] = zy + wx;\r\n  out[7] = 0;\r\n\r\n  out[8] = zx + wy;\r\n  out[9] = zy - wx;\r\n  out[10] = 1 - xx - yy;\r\n  out[11] = 0;\r\n\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = 0;\r\n  out[15] = 1;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\r\nexport function frustum(out, left, right, bottom, top, near, far) {\r\n  var rl = 1 / (right - left);\r\n  var tb = 1 / (top - bottom);\r\n  var nf = 1 / (near - far);\r\n  out[0] = near * 2 * rl;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = near * 2 * tb;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = (right + left) * rl;\r\n  out[9] = (top + bottom) * tb;\r\n  out[10] = (far + near) * nf;\r\n  out[11] = -1;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[14] = far * near * 2 * nf;\r\n  out[15] = 0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\r\nexport function perspective(out, fovy, aspect, near, far) {\r\n  var f = 1.0 / Math.tan(fovy / 2),\r\n      nf = void 0;\r\n  out[0] = f / aspect;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = f;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[11] = -1;\r\n  out[12] = 0;\r\n  out[13] = 0;\r\n  out[15] = 0;\r\n  if (far != null && far !== Infinity) {\r\n    nf = 1 / (near - far);\r\n    out[10] = (far + near) * nf;\r\n    out[14] = 2 * far * near * nf;\r\n  } else {\r\n    out[10] = -1;\r\n    out[14] = -2 * near;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\r\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\r\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\r\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\r\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\r\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\r\n  var xScale = 2.0 / (leftTan + rightTan);\r\n  var yScale = 2.0 / (upTan + downTan);\r\n\r\n  out[0] = xScale;\r\n  out[1] = 0.0;\r\n  out[2] = 0.0;\r\n  out[3] = 0.0;\r\n  out[4] = 0.0;\r\n  out[5] = yScale;\r\n  out[6] = 0.0;\r\n  out[7] = 0.0;\r\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\r\n  out[9] = (upTan - downTan) * yScale * 0.5;\r\n  out[10] = far / (near - far);\r\n  out[11] = -1.0;\r\n  out[12] = 0.0;\r\n  out[13] = 0.0;\r\n  out[14] = far * near / (near - far);\r\n  out[15] = 0.0;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\r\nexport function ortho(out, left, right, bottom, top, near, far) {\r\n  var lr = 1 / (left - right);\r\n  var bt = 1 / (bottom - top);\r\n  var nf = 1 / (near - far);\r\n  out[0] = -2 * lr;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 0;\r\n  out[4] = 0;\r\n  out[5] = -2 * bt;\r\n  out[6] = 0;\r\n  out[7] = 0;\r\n  out[8] = 0;\r\n  out[9] = 0;\r\n  out[10] = 2 * nf;\r\n  out[11] = 0;\r\n  out[12] = (left + right) * lr;\r\n  out[13] = (top + bottom) * bt;\r\n  out[14] = (far + near) * nf;\r\n  out[15] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\r\nexport function lookAt(out, eye, center, up) {\r\n  var x0 = void 0,\r\n      x1 = void 0,\r\n      x2 = void 0,\r\n      y0 = void 0,\r\n      y1 = void 0,\r\n      y2 = void 0,\r\n      z0 = void 0,\r\n      z1 = void 0,\r\n      z2 = void 0,\r\n      len = void 0;\r\n  var eyex = eye[0];\r\n  var eyey = eye[1];\r\n  var eyez = eye[2];\r\n  var upx = up[0];\r\n  var upy = up[1];\r\n  var upz = up[2];\r\n  var centerx = center[0];\r\n  var centery = center[1];\r\n  var centerz = center[2];\r\n\r\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\r\n    return identity(out);\r\n  }\r\n\r\n  z0 = eyex - centerx;\r\n  z1 = eyey - centery;\r\n  z2 = eyez - centerz;\r\n\r\n  len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\r\n  z0 *= len;\r\n  z1 *= len;\r\n  z2 *= len;\r\n\r\n  x0 = upy * z2 - upz * z1;\r\n  x1 = upz * z0 - upx * z2;\r\n  x2 = upx * z1 - upy * z0;\r\n  len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\r\n  if (!len) {\r\n    x0 = 0;\r\n    x1 = 0;\r\n    x2 = 0;\r\n  } else {\r\n    len = 1 / len;\r\n    x0 *= len;\r\n    x1 *= len;\r\n    x2 *= len;\r\n  }\r\n\r\n  y0 = z1 * x2 - z2 * x1;\r\n  y1 = z2 * x0 - z0 * x2;\r\n  y2 = z0 * x1 - z1 * x0;\r\n\r\n  len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\r\n  if (!len) {\r\n    y0 = 0;\r\n    y1 = 0;\r\n    y2 = 0;\r\n  } else {\r\n    len = 1 / len;\r\n    y0 *= len;\r\n    y1 *= len;\r\n    y2 *= len;\r\n  }\r\n\r\n  out[0] = x0;\r\n  out[1] = y0;\r\n  out[2] = z0;\r\n  out[3] = 0;\r\n  out[4] = x1;\r\n  out[5] = y1;\r\n  out[6] = z1;\r\n  out[7] = 0;\r\n  out[8] = x2;\r\n  out[9] = y2;\r\n  out[10] = z2;\r\n  out[11] = 0;\r\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\r\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\r\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\r\n  out[15] = 1;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\r\nexport function targetTo(out, eye, target, up) {\r\n  var eyex = eye[0],\r\n      eyey = eye[1],\r\n      eyez = eye[2],\r\n      upx = up[0],\r\n      upy = up[1],\r\n      upz = up[2];\r\n\r\n  var z0 = eyex - target[0],\r\n      z1 = eyey - target[1],\r\n      z2 = eyez - target[2];\r\n\r\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\r\n  if (len > 0) {\r\n    len = 1 / Math.sqrt(len);\r\n    z0 *= len;\r\n    z1 *= len;\r\n    z2 *= len;\r\n  }\r\n\r\n  var x0 = upy * z2 - upz * z1,\r\n      x1 = upz * z0 - upx * z2,\r\n      x2 = upx * z1 - upy * z0;\r\n\r\n  len = x0 * x0 + x1 * x1 + x2 * x2;\r\n  if (len > 0) {\r\n    len = 1 / Math.sqrt(len);\r\n    x0 *= len;\r\n    x1 *= len;\r\n    x2 *= len;\r\n  }\r\n\r\n  out[0] = x0;\r\n  out[1] = x1;\r\n  out[2] = x2;\r\n  out[3] = 0;\r\n  out[4] = z1 * x2 - z2 * x1;\r\n  out[5] = z2 * x0 - z0 * x2;\r\n  out[6] = z0 * x1 - z1 * x0;\r\n  out[7] = 0;\r\n  out[8] = z0;\r\n  out[9] = z1;\r\n  out[10] = z2;\r\n  out[11] = 0;\r\n  out[12] = eyex;\r\n  out[13] = eyey;\r\n  out[14] = eyez;\r\n  out[15] = 1;\r\n  return out;\r\n};\r\n\r\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {mat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\r\nexport function str(a) {\r\n  return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\r\n}\r\n\r\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {mat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\r\nexport function frob(a) {\r\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2));\r\n}\r\n\r\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\r\nexport function add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  out[3] = a[3] + b[3];\r\n  out[4] = a[4] + b[4];\r\n  out[5] = a[5] + b[5];\r\n  out[6] = a[6] + b[6];\r\n  out[7] = a[7] + b[7];\r\n  out[8] = a[8] + b[8];\r\n  out[9] = a[9] + b[9];\r\n  out[10] = a[10] + b[10];\r\n  out[11] = a[11] + b[11];\r\n  out[12] = a[12] + b[12];\r\n  out[13] = a[13] + b[13];\r\n  out[14] = a[14] + b[14];\r\n  out[15] = a[15] + b[15];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\r\nexport function subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  out[2] = a[2] - b[2];\r\n  out[3] = a[3] - b[3];\r\n  out[4] = a[4] - b[4];\r\n  out[5] = a[5] - b[5];\r\n  out[6] = a[6] - b[6];\r\n  out[7] = a[7] - b[7];\r\n  out[8] = a[8] - b[8];\r\n  out[9] = a[9] - b[9];\r\n  out[10] = a[10] - b[10];\r\n  out[11] = a[11] - b[11];\r\n  out[12] = a[12] - b[12];\r\n  out[13] = a[13] - b[13];\r\n  out[14] = a[14] - b[14];\r\n  out[15] = a[15] - b[15];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\r\nexport function multiplyScalar(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  out[3] = a[3] * b;\r\n  out[4] = a[4] * b;\r\n  out[5] = a[5] * b;\r\n  out[6] = a[6] * b;\r\n  out[7] = a[7] * b;\r\n  out[8] = a[8] * b;\r\n  out[9] = a[9] * b;\r\n  out[10] = a[10] * b;\r\n  out[11] = a[11] * b;\r\n  out[12] = a[12] * b;\r\n  out[13] = a[13] * b;\r\n  out[14] = a[14] * b;\r\n  out[15] = a[15] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\r\nexport function multiplyScalarAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  out[2] = a[2] + b[2] * scale;\r\n  out[3] = a[3] + b[3] * scale;\r\n  out[4] = a[4] + b[4] * scale;\r\n  out[5] = a[5] + b[5] * scale;\r\n  out[6] = a[6] + b[6] * scale;\r\n  out[7] = a[7] + b[7] * scale;\r\n  out[8] = a[8] + b[8] * scale;\r\n  out[9] = a[9] + b[9] * scale;\r\n  out[10] = a[10] + b[10] * scale;\r\n  out[11] = a[11] + b[11] * scale;\r\n  out[12] = a[12] + b[12] * scale;\r\n  out[13] = a[13] + b[13] * scale;\r\n  out[14] = a[14] + b[14] * scale;\r\n  out[15] = a[15] + b[15] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nexport function exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\r\n}\r\n\r\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\r\nexport function equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n  var a4 = a[4],\r\n      a5 = a[5],\r\n      a6 = a[6],\r\n      a7 = a[7];\r\n  var a8 = a[8],\r\n      a9 = a[9],\r\n      a10 = a[10],\r\n      a11 = a[11];\r\n  var a12 = a[12],\r\n      a13 = a[13],\r\n      a14 = a[14],\r\n      a15 = a[15];\r\n\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3];\r\n  var b4 = b[4],\r\n      b5 = b[5],\r\n      b6 = b[6],\r\n      b7 = b[7];\r\n  var b8 = b[8],\r\n      b9 = b[9],\r\n      b10 = b[10],\r\n      b11 = b[11];\r\n  var b12 = b[12],\r\n      b13 = b[13],\r\n      b14 = b[14],\r\n      b15 = b[15];\r\n\r\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\r\n}\r\n\r\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\r\nexport var mul = multiply;\r\n\r\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\r\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\r\n\r\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\r\nexport function create() {\r\n  var out = new glMatrix.ARRAY_TYPE(3);\r\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\r\n    out[0] = 0;\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {vec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\r\nexport function clone(a) {\r\n  var out = new glMatrix.ARRAY_TYPE(3);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\r\nexport function length(a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  return Math.sqrt(x * x + y * y + z * z);\r\n}\r\n\r\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\r\nexport function fromValues(x, y, z) {\r\n  var out = new glMatrix.ARRAY_TYPE(3);\r\n  out[0] = x;\r\n  out[1] = y;\r\n  out[2] = z;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the source vector\r\n * @returns {vec3} out\r\n */\r\nexport function copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\r\nexport function set(out, x, y, z) {\r\n  out[0] = x;\r\n  out[1] = y;\r\n  out[2] = z;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nexport function add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nexport function subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  out[2] = a[2] - b[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nexport function multiply(out, a, b) {\r\n  out[0] = a[0] * b[0];\r\n  out[1] = a[1] * b[1];\r\n  out[2] = a[2] * b[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nexport function divide(out, a, b) {\r\n  out[0] = a[0] / b[0];\r\n  out[1] = a[1] / b[1];\r\n  out[2] = a[2] / b[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\r\nexport function ceil(out, a) {\r\n  out[0] = Math.ceil(a[0]);\r\n  out[1] = Math.ceil(a[1]);\r\n  out[2] = Math.ceil(a[2]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to floor\r\n * @returns {vec3} out\r\n */\r\nexport function floor(out, a) {\r\n  out[0] = Math.floor(a[0]);\r\n  out[1] = Math.floor(a[1]);\r\n  out[2] = Math.floor(a[2]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nexport function min(out, a, b) {\r\n  out[0] = Math.min(a[0], b[0]);\r\n  out[1] = Math.min(a[1], b[1]);\r\n  out[2] = Math.min(a[2], b[2]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nexport function max(out, a, b) {\r\n  out[0] = Math.max(a[0], b[0]);\r\n  out[1] = Math.max(a[1], b[1]);\r\n  out[2] = Math.max(a[2], b[2]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to round\r\n * @returns {vec3} out\r\n */\r\nexport function round(out, a) {\r\n  out[0] = Math.round(a[0]);\r\n  out[1] = Math.round(a[1]);\r\n  out[2] = Math.round(a[2]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\r\nexport function scale(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\r\nexport function scaleAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  out[2] = a[2] + b[2] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\r\nexport function distance(a, b) {\r\n  var x = b[0] - a[0];\r\n  var y = b[1] - a[1];\r\n  var z = b[2] - a[2];\r\n  return Math.sqrt(x * x + y * y + z * z);\r\n}\r\n\r\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\r\nexport function squaredDistance(a, b) {\r\n  var x = b[0] - a[0];\r\n  var y = b[1] - a[1];\r\n  var z = b[2] - a[2];\r\n  return x * x + y * y + z * z;\r\n}\r\n\r\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\r\nexport function squaredLength(a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  return x * x + y * y + z * z;\r\n}\r\n\r\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to negate\r\n * @returns {vec3} out\r\n */\r\nexport function negate(out, a) {\r\n  out[0] = -a[0];\r\n  out[1] = -a[1];\r\n  out[2] = -a[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to invert\r\n * @returns {vec3} out\r\n */\r\nexport function inverse(out, a) {\r\n  out[0] = 1.0 / a[0];\r\n  out[1] = 1.0 / a[1];\r\n  out[2] = 1.0 / a[2];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\r\nexport function normalize(out, a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  var len = x * x + y * y + z * z;\r\n  if (len > 0) {\r\n    //TODO: evaluate use of glm_invsqrt here?\r\n    len = 1 / Math.sqrt(len);\r\n    out[0] = a[0] * len;\r\n    out[1] = a[1] * len;\r\n    out[2] = a[2] * len;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\r\nexport function dot(a, b) {\r\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\r\n}\r\n\r\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\r\nexport function cross(out, a, b) {\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2];\r\n  var bx = b[0],\r\n      by = b[1],\r\n      bz = b[2];\r\n\r\n  out[0] = ay * bz - az * by;\r\n  out[1] = az * bx - ax * bz;\r\n  out[2] = ax * by - ay * bx;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\r\nexport function lerp(out, a, b, t) {\r\n  var ax = a[0];\r\n  var ay = a[1];\r\n  var az = a[2];\r\n  out[0] = ax + t * (b[0] - ax);\r\n  out[1] = ay + t * (b[1] - ay);\r\n  out[2] = az + t * (b[2] - az);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\r\nexport function hermite(out, a, b, c, d, t) {\r\n  var factorTimes2 = t * t;\r\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\r\n  var factor2 = factorTimes2 * (t - 2) + t;\r\n  var factor3 = factorTimes2 * (t - 1);\r\n  var factor4 = factorTimes2 * (3 - 2 * t);\r\n\r\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\r\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\r\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\r\nexport function bezier(out, a, b, c, d, t) {\r\n  var inverseFactor = 1 - t;\r\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\r\n  var factorTimes2 = t * t;\r\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\r\n  var factor2 = 3 * t * inverseFactorTimesTwo;\r\n  var factor3 = 3 * factorTimes2 * inverseFactor;\r\n  var factor4 = factorTimes2 * t;\r\n\r\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\r\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\r\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\r\nexport function random(out, scale) {\r\n  scale = scale || 1.0;\r\n\r\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\r\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\r\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\r\n\r\n  out[0] = Math.cos(r) * zScale;\r\n  out[1] = Math.sin(r) * zScale;\r\n  out[2] = z * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\r\nexport function transformMat4(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2];\r\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\r\n  w = w || 1.0;\r\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\r\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\r\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\r\nexport function transformMat3(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2];\r\n  out[0] = x * m[0] + y * m[3] + z * m[6];\r\n  out[1] = x * m[1] + y * m[4] + z * m[7];\r\n  out[2] = x * m[2] + y * m[5] + z * m[8];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\r\nexport function transformQuat(out, a, q) {\r\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\r\n  var qx = q[0],\r\n      qy = q[1],\r\n      qz = q[2],\r\n      qw = q[3];\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2];\r\n  // var qvec = [qx, qy, qz];\r\n  // var uv = vec3.cross([], qvec, a);\r\n  var uvx = qy * z - qz * y,\r\n      uvy = qz * x - qx * z,\r\n      uvz = qx * y - qy * x;\r\n  // var uuv = vec3.cross([], qvec, uv);\r\n  var uuvx = qy * uvz - qz * uvy,\r\n      uuvy = qz * uvx - qx * uvz,\r\n      uuvz = qx * uvy - qy * uvx;\r\n  // vec3.scale(uv, uv, 2 * w);\r\n  var w2 = qw * 2;\r\n  uvx *= w2;\r\n  uvy *= w2;\r\n  uvz *= w2;\r\n  // vec3.scale(uuv, uuv, 2);\r\n  uuvx *= 2;\r\n  uuvy *= 2;\r\n  uuvz *= 2;\r\n  // return vec3.add(out, a, vec3.add(out, uv, uuv));\r\n  out[0] = x + uvx + uuvx;\r\n  out[1] = y + uvy + uuvy;\r\n  out[2] = z + uvz + uuvz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\r\nexport function rotateX(out, a, b, c) {\r\n  var p = [],\r\n      r = [];\r\n  //Translate point to the origin\r\n  p[0] = a[0] - b[0];\r\n  p[1] = a[1] - b[1];\r\n  p[2] = a[2] - b[2];\r\n\r\n  //perform rotation\r\n  r[0] = p[0];\r\n  r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\r\n  r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c);\r\n\r\n  //translate to correct position\r\n  out[0] = r[0] + b[0];\r\n  out[1] = r[1] + b[1];\r\n  out[2] = r[2] + b[2];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\r\nexport function rotateY(out, a, b, c) {\r\n  var p = [],\r\n      r = [];\r\n  //Translate point to the origin\r\n  p[0] = a[0] - b[0];\r\n  p[1] = a[1] - b[1];\r\n  p[2] = a[2] - b[2];\r\n\r\n  //perform rotation\r\n  r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\r\n  r[1] = p[1];\r\n  r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c);\r\n\r\n  //translate to correct position\r\n  out[0] = r[0] + b[0];\r\n  out[1] = r[1] + b[1];\r\n  out[2] = r[2] + b[2];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\r\nexport function rotateZ(out, a, b, c) {\r\n  var p = [],\r\n      r = [];\r\n  //Translate point to the origin\r\n  p[0] = a[0] - b[0];\r\n  p[1] = a[1] - b[1];\r\n  p[2] = a[2] - b[2];\r\n\r\n  //perform rotation\r\n  r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\r\n  r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\r\n  r[2] = p[2];\r\n\r\n  //translate to correct position\r\n  out[0] = r[0] + b[0];\r\n  out[1] = r[1] + b[1];\r\n  out[2] = r[2] + b[2];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {vec3} a The first operand\r\n * @param {vec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\r\nexport function angle(a, b) {\r\n  var tempA = fromValues(a[0], a[1], a[2]);\r\n  var tempB = fromValues(b[0], b[1], b[2]);\r\n\r\n  normalize(tempA, tempA);\r\n  normalize(tempB, tempB);\r\n\r\n  var cosine = dot(tempA, tempB);\r\n\r\n  if (cosine > 1.0) {\r\n    return 0;\r\n  } else if (cosine < -1.0) {\r\n    return Math.PI;\r\n  } else {\r\n    return Math.acos(cosine);\r\n  }\r\n}\r\n\r\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\r\nexport function str(a) {\r\n  return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nexport function exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nexport function equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2];\r\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\r\n}\r\n\r\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\r\nexport var sub = subtract;\r\n\r\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\r\nexport var mul = multiply;\r\n\r\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\r\nexport var div = divide;\r\n\r\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\r\nexport var dist = distance;\r\n\r\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\r\nexport var sqrDist = squaredDistance;\r\n\r\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\r\nexport var len = length;\r\n\r\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\r\nexport var sqrLen = squaredLength;\r\n\r\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\r\nexport var forEach = function () {\r\n  var vec = create();\r\n\r\n  return function (a, stride, offset, count, fn, arg) {\r\n    var i = void 0,\r\n        l = void 0;\r\n    if (!stride) {\r\n      stride = 3;\r\n    }\r\n\r\n    if (!offset) {\r\n      offset = 0;\r\n    }\r\n\r\n    if (count) {\r\n      l = Math.min(count * stride + offset, a.length);\r\n    } else {\r\n      l = a.length;\r\n    }\r\n\r\n    for (i = offset; i < l; i += stride) {\r\n      vec[0] = a[i];vec[1] = a[i + 1];vec[2] = a[i + 2];\r\n      fn(vec, vec, arg);\r\n      a[i] = vec[0];a[i + 1] = vec[1];a[i + 2] = vec[2];\r\n    }\r\n\r\n    return a;\r\n  };\r\n}();","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 4 Dimensional Vector\r\n * @module vec4\r\n */\r\n\r\n/**\r\n * Creates a new, empty vec4\r\n *\r\n * @returns {vec4} a new 4D vector\r\n */\r\nexport function create() {\r\n  var out = new glMatrix.ARRAY_TYPE(4);\r\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\r\n    out[0] = 0;\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n    out[3] = 0;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new vec4 initialized with values from an existing vector\r\n *\r\n * @param {vec4} a vector to clone\r\n * @returns {vec4} a new 4D vector\r\n */\r\nexport function clone(a) {\r\n  var out = new glMatrix.ARRAY_TYPE(4);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new vec4 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} a new 4D vector\r\n */\r\nexport function fromValues(x, y, z, w) {\r\n  var out = new glMatrix.ARRAY_TYPE(4);\r\n  out[0] = x;\r\n  out[1] = y;\r\n  out[2] = z;\r\n  out[3] = w;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one vec4 to another\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the source vector\r\n * @returns {vec4} out\r\n */\r\nexport function copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  out[2] = a[2];\r\n  out[3] = a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a vec4 to the given values\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {vec4} out\r\n */\r\nexport function set(out, x, y, z, w) {\r\n  out[0] = x;\r\n  out[1] = y;\r\n  out[2] = z;\r\n  out[3] = w;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nexport function add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  out[2] = a[2] + b[2];\r\n  out[3] = a[3] + b[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nexport function subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  out[2] = a[2] - b[2];\r\n  out[3] = a[3] - b[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiplies two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nexport function multiply(out, a, b) {\r\n  out[0] = a[0] * b[0];\r\n  out[1] = a[1] * b[1];\r\n  out[2] = a[2] * b[2];\r\n  out[3] = a[3] * b[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Divides two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nexport function divide(out, a, b) {\r\n  out[0] = a[0] / b[0];\r\n  out[1] = a[1] / b[1];\r\n  out[2] = a[2] / b[2];\r\n  out[3] = a[3] / b[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.ceil the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to ceil\r\n * @returns {vec4} out\r\n */\r\nexport function ceil(out, a) {\r\n  out[0] = Math.ceil(a[0]);\r\n  out[1] = Math.ceil(a[1]);\r\n  out[2] = Math.ceil(a[2]);\r\n  out[3] = Math.ceil(a[3]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.floor the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to floor\r\n * @returns {vec4} out\r\n */\r\nexport function floor(out, a) {\r\n  out[0] = Math.floor(a[0]);\r\n  out[1] = Math.floor(a[1]);\r\n  out[2] = Math.floor(a[2]);\r\n  out[3] = Math.floor(a[3]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the minimum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nexport function min(out, a, b) {\r\n  out[0] = Math.min(a[0], b[0]);\r\n  out[1] = Math.min(a[1], b[1]);\r\n  out[2] = Math.min(a[2], b[2]);\r\n  out[3] = Math.min(a[3], b[3]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the maximum of two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {vec4} out\r\n */\r\nexport function max(out, a, b) {\r\n  out[0] = Math.max(a[0], b[0]);\r\n  out[1] = Math.max(a[1], b[1]);\r\n  out[2] = Math.max(a[2], b[2]);\r\n  out[3] = Math.max(a[3], b[3]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.round the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to round\r\n * @returns {vec4} out\r\n */\r\nexport function round(out, a) {\r\n  out[0] = Math.round(a[0]);\r\n  out[1] = Math.round(a[1]);\r\n  out[2] = Math.round(a[2]);\r\n  out[3] = Math.round(a[3]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Scales a vec4 by a scalar number\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec4} out\r\n */\r\nexport function scale(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  out[2] = a[2] * b;\r\n  out[3] = a[3] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec4's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec4} out\r\n */\r\nexport function scaleAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  out[2] = a[2] + b[2] * scale;\r\n  out[3] = a[3] + b[3] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\r\nexport function distance(a, b) {\r\n  var x = b[0] - a[0];\r\n  var y = b[1] - a[1];\r\n  var z = b[2] - a[2];\r\n  var w = b[3] - a[3];\r\n  return Math.sqrt(x * x + y * y + z * z + w * w);\r\n}\r\n\r\n/**\r\n * Calculates the squared euclidian distance between two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\r\nexport function squaredDistance(a, b) {\r\n  var x = b[0] - a[0];\r\n  var y = b[1] - a[1];\r\n  var z = b[2] - a[2];\r\n  var w = b[3] - a[3];\r\n  return x * x + y * y + z * z + w * w;\r\n}\r\n\r\n/**\r\n * Calculates the length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\r\nexport function length(a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  var w = a[3];\r\n  return Math.sqrt(x * x + y * y + z * z + w * w);\r\n}\r\n\r\n/**\r\n * Calculates the squared length of a vec4\r\n *\r\n * @param {vec4} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\r\nexport function squaredLength(a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  var w = a[3];\r\n  return x * x + y * y + z * z + w * w;\r\n}\r\n\r\n/**\r\n * Negates the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to negate\r\n * @returns {vec4} out\r\n */\r\nexport function negate(out, a) {\r\n  out[0] = -a[0];\r\n  out[1] = -a[1];\r\n  out[2] = -a[2];\r\n  out[3] = -a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the inverse of the components of a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to invert\r\n * @returns {vec4} out\r\n */\r\nexport function inverse(out, a) {\r\n  out[0] = 1.0 / a[0];\r\n  out[1] = 1.0 / a[1];\r\n  out[2] = 1.0 / a[2];\r\n  out[3] = 1.0 / a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Normalize a vec4\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a vector to normalize\r\n * @returns {vec4} out\r\n */\r\nexport function normalize(out, a) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  var z = a[2];\r\n  var w = a[3];\r\n  var len = x * x + y * y + z * z + w * w;\r\n  if (len > 0) {\r\n    len = 1 / Math.sqrt(len);\r\n    out[0] = x * len;\r\n    out[1] = y * len;\r\n    out[2] = z * len;\r\n    out[3] = w * len;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the dot product of two vec4's\r\n *\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\r\nexport function dot(a, b) {\r\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\r\n}\r\n\r\n/**\r\n * Performs a linear interpolation between two vec4's\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the first operand\r\n * @param {vec4} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec4} out\r\n */\r\nexport function lerp(out, a, b, t) {\r\n  var ax = a[0];\r\n  var ay = a[1];\r\n  var az = a[2];\r\n  var aw = a[3];\r\n  out[0] = ax + t * (b[0] - ax);\r\n  out[1] = ay + t * (b[1] - ay);\r\n  out[2] = az + t * (b[2] - az);\r\n  out[3] = aw + t * (b[3] - aw);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec4} out\r\n */\r\nexport function random(out, scale) {\r\n  scale = scale || 1.0;\r\n\r\n  // Marsaglia, George. Choosing a Point from the Surface of a\r\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\r\n  // http://projecteuclid.org/euclid.aoms/1177692644;\r\n  var v1, v2, v3, v4;\r\n  var s1, s2;\r\n  do {\r\n    v1 = glMatrix.RANDOM() * 2 - 1;\r\n    v2 = glMatrix.RANDOM() * 2 - 1;\r\n    s1 = v1 * v1 + v2 * v2;\r\n  } while (s1 >= 1);\r\n  do {\r\n    v3 = glMatrix.RANDOM() * 2 - 1;\r\n    v4 = glMatrix.RANDOM() * 2 - 1;\r\n    s2 = v3 * v3 + v4 * v4;\r\n  } while (s2 >= 1);\r\n\r\n  var d = Math.sqrt((1 - s1) / s2);\r\n  out[0] = scale * v1;\r\n  out[1] = scale * v2;\r\n  out[2] = scale * v3 * d;\r\n  out[3] = scale * v4 * d;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec4 with a mat4.\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec4} out\r\n */\r\nexport function transformMat4(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2],\r\n      w = a[3];\r\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\r\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\r\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\r\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec4 with a quat\r\n *\r\n * @param {vec4} out the receiving vector\r\n * @param {vec4} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec4} out\r\n */\r\nexport function transformQuat(out, a, q) {\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2];\r\n  var qx = q[0],\r\n      qy = q[1],\r\n      qz = q[2],\r\n      qw = q[3];\r\n\r\n  // calculate quat * vec\r\n  var ix = qw * x + qy * z - qz * y;\r\n  var iy = qw * y + qz * x - qx * z;\r\n  var iz = qw * z + qx * y - qy * x;\r\n  var iw = -qx * x - qy * y - qz * z;\r\n\r\n  // calculate result * inverse quat\r\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\r\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\r\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\r\n  out[3] = a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec4} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\r\nexport function str(a) {\r\n  return 'vec4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nexport function exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec4} a The first vector.\r\n * @param {vec4} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nexport function equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n  var b0 = b[0],\r\n      b1 = b[1],\r\n      b2 = b[2],\r\n      b3 = b[3];\r\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\r\n}\r\n\r\n/**\r\n * Alias for {@link vec4.subtract}\r\n * @function\r\n */\r\nexport var sub = subtract;\r\n\r\n/**\r\n * Alias for {@link vec4.multiply}\r\n * @function\r\n */\r\nexport var mul = multiply;\r\n\r\n/**\r\n * Alias for {@link vec4.divide}\r\n * @function\r\n */\r\nexport var div = divide;\r\n\r\n/**\r\n * Alias for {@link vec4.distance}\r\n * @function\r\n */\r\nexport var dist = distance;\r\n\r\n/**\r\n * Alias for {@link vec4.squaredDistance}\r\n * @function\r\n */\r\nexport var sqrDist = squaredDistance;\r\n\r\n/**\r\n * Alias for {@link vec4.length}\r\n * @function\r\n */\r\nexport var len = length;\r\n\r\n/**\r\n * Alias for {@link vec4.squaredLength}\r\n * @function\r\n */\r\nexport var sqrLen = squaredLength;\r\n\r\n/**\r\n * Perform some operation over an array of vec4s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\r\nexport var forEach = function () {\r\n  var vec = create();\r\n\r\n  return function (a, stride, offset, count, fn, arg) {\r\n    var i = void 0,\r\n        l = void 0;\r\n    if (!stride) {\r\n      stride = 4;\r\n    }\r\n\r\n    if (!offset) {\r\n      offset = 0;\r\n    }\r\n\r\n    if (count) {\r\n      l = Math.min(count * stride + offset, a.length);\r\n    } else {\r\n      l = a.length;\r\n    }\r\n\r\n    for (i = offset; i < l; i += stride) {\r\n      vec[0] = a[i];vec[1] = a[i + 1];vec[2] = a[i + 2];vec[3] = a[i + 3];\r\n      fn(vec, vec, arg);\r\n      a[i] = vec[0];a[i + 1] = vec[1];a[i + 2] = vec[2];a[i + 3] = vec[3];\r\n    }\r\n\r\n    return a;\r\n  };\r\n}();","import * as glMatrix from \"./common.js\";\r\nimport * as mat3 from \"./mat3.js\";\r\nimport * as vec3 from \"./vec3.js\";\r\nimport * as vec4 from \"./vec4.js\";\r\n\r\n/**\r\n * Quaternion\r\n * @module quat\r\n */\r\n\r\n/**\r\n * Creates a new identity quat\r\n *\r\n * @returns {quat} a new quaternion\r\n */\r\nexport function create() {\r\n  var out = new glMatrix.ARRAY_TYPE(4);\r\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\r\n    out[0] = 0;\r\n    out[1] = 0;\r\n    out[2] = 0;\r\n  }\r\n  out[3] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set a quat to the identity quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\r\nexport function identity(out) {\r\n  out[0] = 0;\r\n  out[1] = 0;\r\n  out[2] = 0;\r\n  out[3] = 1;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Sets a quat from the given angle and rotation axis,\r\n * then returns it.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {vec3} axis the axis around which to rotate\r\n * @param {Number} rad the angle in radians\r\n * @returns {quat} out\r\n **/\r\nexport function setAxisAngle(out, axis, rad) {\r\n  rad = rad * 0.5;\r\n  var s = Math.sin(rad);\r\n  out[0] = s * axis[0];\r\n  out[1] = s * axis[1];\r\n  out[2] = s * axis[2];\r\n  out[3] = Math.cos(rad);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Gets the rotation axis and angle for a given\r\n *  quaternion. If a quaternion is created with\r\n *  setAxisAngle, this method will return the same\r\n *  values as providied in the original parameter list\r\n *  OR functionally equivalent values.\r\n * Example: The quaternion formed by axis [0, 0, 1] and\r\n *  angle -90 is the same as the quaternion formed by\r\n *  [0, 0, 1] and 270. This method favors the latter.\r\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\r\n * @param  {quat} q     Quaternion to be decomposed\r\n * @return {Number}     Angle, in radians, of the rotation\r\n */\r\nexport function getAxisAngle(out_axis, q) {\r\n  var rad = Math.acos(q[3]) * 2.0;\r\n  var s = Math.sin(rad / 2.0);\r\n  if (s > glMatrix.EPSILON) {\r\n    out_axis[0] = q[0] / s;\r\n    out_axis[1] = q[1] / s;\r\n    out_axis[2] = q[2] / s;\r\n  } else {\r\n    // If s is zero, return any axis (no rotation - axis does not matter)\r\n    out_axis[0] = 1;\r\n    out_axis[1] = 0;\r\n    out_axis[2] = 0;\r\n  }\r\n  return rad;\r\n}\r\n\r\n/**\r\n * Multiplies two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n */\r\nexport function multiply(out, a, b) {\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2],\r\n      aw = a[3];\r\n  var bx = b[0],\r\n      by = b[1],\r\n      bz = b[2],\r\n      bw = b[3];\r\n\r\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\r\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\r\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\r\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a quaternion by the given angle about the X axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\r\nexport function rotateX(out, a, rad) {\r\n  rad *= 0.5;\r\n\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2],\r\n      aw = a[3];\r\n  var bx = Math.sin(rad),\r\n      bw = Math.cos(rad);\r\n\r\n  out[0] = ax * bw + aw * bx;\r\n  out[1] = ay * bw + az * bx;\r\n  out[2] = az * bw - ay * bx;\r\n  out[3] = aw * bw - ax * bx;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a quaternion by the given angle about the Y axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\r\nexport function rotateY(out, a, rad) {\r\n  rad *= 0.5;\r\n\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2],\r\n      aw = a[3];\r\n  var by = Math.sin(rad),\r\n      bw = Math.cos(rad);\r\n\r\n  out[0] = ax * bw - az * by;\r\n  out[1] = ay * bw + aw * by;\r\n  out[2] = az * bw + ax * by;\r\n  out[3] = aw * bw - ay * by;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotates a quaternion by the given angle about the Z axis\r\n *\r\n * @param {quat} out quat receiving operation result\r\n * @param {quat} a quat to rotate\r\n * @param {number} rad angle (in radians) to rotate\r\n * @returns {quat} out\r\n */\r\nexport function rotateZ(out, a, rad) {\r\n  rad *= 0.5;\r\n\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2],\r\n      aw = a[3];\r\n  var bz = Math.sin(rad),\r\n      bw = Math.cos(rad);\r\n\r\n  out[0] = ax * bw + ay * bz;\r\n  out[1] = ay * bw - ax * bz;\r\n  out[2] = az * bw + aw * bz;\r\n  out[3] = aw * bw - az * bz;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the W component of a quat from the X, Y, and Z components.\r\n * Assumes that quaternion is 1 unit in length.\r\n * Any existing W component will be ignored.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate W component of\r\n * @returns {quat} out\r\n */\r\nexport function calculateW(out, a) {\r\n  var x = a[0],\r\n      y = a[1],\r\n      z = a[2];\r\n\r\n  out[0] = x;\r\n  out[1] = y;\r\n  out[2] = z;\r\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\r\n  return out;\r\n}\r\n\r\n/**\r\n * Performs a spherical linear interpolation between two quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\r\nexport function slerp(out, a, b, t) {\r\n  // benchmarks:\r\n  //    http://jsperf.com/quaternion-slerp-implementations\r\n  var ax = a[0],\r\n      ay = a[1],\r\n      az = a[2],\r\n      aw = a[3];\r\n  var bx = b[0],\r\n      by = b[1],\r\n      bz = b[2],\r\n      bw = b[3];\r\n\r\n  var omega = void 0,\r\n      cosom = void 0,\r\n      sinom = void 0,\r\n      scale0 = void 0,\r\n      scale1 = void 0;\r\n\r\n  // calc cosine\r\n  cosom = ax * bx + ay * by + az * bz + aw * bw;\r\n  // adjust signs (if necessary)\r\n  if (cosom < 0.0) {\r\n    cosom = -cosom;\r\n    bx = -bx;\r\n    by = -by;\r\n    bz = -bz;\r\n    bw = -bw;\r\n  }\r\n  // calculate coefficients\r\n  if (1.0 - cosom > glMatrix.EPSILON) {\r\n    // standard case (slerp)\r\n    omega = Math.acos(cosom);\r\n    sinom = Math.sin(omega);\r\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\r\n    scale1 = Math.sin(t * omega) / sinom;\r\n  } else {\r\n    // \"from\" and \"to\" quaternions are very close\r\n    //  ... so we can do a linear interpolation\r\n    scale0 = 1.0 - t;\r\n    scale1 = t;\r\n  }\r\n  // calculate final values\r\n  out[0] = scale0 * ax + scale1 * bx;\r\n  out[1] = scale0 * ay + scale1 * by;\r\n  out[2] = scale0 * az + scale1 * bz;\r\n  out[3] = scale0 * aw + scale1 * bw;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a random quaternion\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @returns {quat} out\r\n */\r\nexport function random(out) {\r\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\r\n  // TODO: Calling random 3 times is probably not the fastest solution\r\n  var u1 = glMatrix.RANDOM();\r\n  var u2 = glMatrix.RANDOM();\r\n  var u3 = glMatrix.RANDOM();\r\n\r\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\r\n  var sqrtU1 = Math.sqrt(u1);\r\n\r\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\r\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\r\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\r\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the inverse of a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate inverse of\r\n * @returns {quat} out\r\n */\r\nexport function invert(out, a) {\r\n  var a0 = a[0],\r\n      a1 = a[1],\r\n      a2 = a[2],\r\n      a3 = a[3];\r\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\r\n  var invDot = dot ? 1.0 / dot : 0;\r\n\r\n  // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\r\n\r\n  out[0] = -a0 * invDot;\r\n  out[1] = -a1 * invDot;\r\n  out[2] = -a2 * invDot;\r\n  out[3] = a3 * invDot;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the conjugate of a quat\r\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quat to calculate conjugate of\r\n * @returns {quat} out\r\n */\r\nexport function conjugate(out, a) {\r\n  out[0] = -a[0];\r\n  out[1] = -a[1];\r\n  out[2] = -a[2];\r\n  out[3] = a[3];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a quaternion from the given 3x3 rotation matrix.\r\n *\r\n * NOTE: The resultant quaternion is not normalized, so you should be sure\r\n * to renormalize the quaternion yourself where necessary.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {mat3} m rotation matrix\r\n * @returns {quat} out\r\n * @function\r\n */\r\nexport function fromMat3(out, m) {\r\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\r\n  // article \"Quaternion Calculus and Fast Animation\".\r\n  var fTrace = m[0] + m[4] + m[8];\r\n  var fRoot = void 0;\r\n\r\n  if (fTrace > 0.0) {\r\n    // |w| > 1/2, may as well choose w > 1/2\r\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\r\n    out[3] = 0.5 * fRoot;\r\n    fRoot = 0.5 / fRoot; // 1/(4w)\r\n    out[0] = (m[5] - m[7]) * fRoot;\r\n    out[1] = (m[6] - m[2]) * fRoot;\r\n    out[2] = (m[1] - m[3]) * fRoot;\r\n  } else {\r\n    // |w| <= 1/2\r\n    var i = 0;\r\n    if (m[4] > m[0]) i = 1;\r\n    if (m[8] > m[i * 3 + i]) i = 2;\r\n    var j = (i + 1) % 3;\r\n    var k = (i + 2) % 3;\r\n\r\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\r\n    out[i] = 0.5 * fRoot;\r\n    fRoot = 0.5 / fRoot;\r\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\r\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\r\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\r\n  }\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a quaternion from the given euler angle x, y, z.\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {x} Angle to rotate around X axis in degrees.\r\n * @param {y} Angle to rotate around Y axis in degrees.\r\n * @param {z} Angle to rotate around Z axis in degrees.\r\n * @returns {quat} out\r\n * @function\r\n */\r\nexport function fromEuler(out, x, y, z) {\r\n  var halfToRad = 0.5 * Math.PI / 180.0;\r\n  x *= halfToRad;\r\n  y *= halfToRad;\r\n  z *= halfToRad;\r\n\r\n  var sx = Math.sin(x);\r\n  var cx = Math.cos(x);\r\n  var sy = Math.sin(y);\r\n  var cy = Math.cos(y);\r\n  var sz = Math.sin(z);\r\n  var cz = Math.cos(z);\r\n\r\n  out[0] = sx * cy * cz - cx * sy * sz;\r\n  out[1] = cx * sy * cz + sx * cy * sz;\r\n  out[2] = cx * cy * sz - sx * sy * cz;\r\n  out[3] = cx * cy * cz + sx * sy * sz;\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns a string representation of a quatenion\r\n *\r\n * @param {quat} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\r\nexport function str(a) {\r\n  return 'quat(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ')';\r\n}\r\n\r\n/**\r\n * Creates a new quat initialized with values from an existing quaternion\r\n *\r\n * @param {quat} a quaternion to clone\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\r\nexport var clone = vec4.clone;\r\n\r\n/**\r\n * Creates a new quat initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} a new quaternion\r\n * @function\r\n */\r\nexport var fromValues = vec4.fromValues;\r\n\r\n/**\r\n * Copy the values from one quat to another\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the source quaternion\r\n * @returns {quat} out\r\n * @function\r\n */\r\nexport var copy = vec4.copy;\r\n\r\n/**\r\n * Set the components of a quat to the given values\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @param {Number} w W component\r\n * @returns {quat} out\r\n * @function\r\n */\r\nexport var set = vec4.set;\r\n\r\n/**\r\n * Adds two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {quat} out\r\n * @function\r\n */\r\nexport var add = vec4.add;\r\n\r\n/**\r\n * Alias for {@link quat.multiply}\r\n * @function\r\n */\r\nexport var mul = multiply;\r\n\r\n/**\r\n * Scales a quat by a scalar number\r\n *\r\n * @param {quat} out the receiving vector\r\n * @param {quat} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {quat} out\r\n * @function\r\n */\r\nexport var scale = vec4.scale;\r\n\r\n/**\r\n * Calculates the dot product of two quat's\r\n *\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @returns {Number} dot product of a and b\r\n * @function\r\n */\r\nexport var dot = vec4.dot;\r\n\r\n/**\r\n * Performs a linear interpolation between two quat's\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n * @function\r\n */\r\nexport var lerp = vec4.lerp;\r\n\r\n/**\r\n * Calculates the length of a quat\r\n *\r\n * @param {quat} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\r\nexport var length = vec4.length;\r\n\r\n/**\r\n * Alias for {@link quat.length}\r\n * @function\r\n */\r\nexport var len = length;\r\n\r\n/**\r\n * Calculates the squared length of a quat\r\n *\r\n * @param {quat} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n * @function\r\n */\r\nexport var squaredLength = vec4.squaredLength;\r\n\r\n/**\r\n * Alias for {@link quat.squaredLength}\r\n * @function\r\n */\r\nexport var sqrLen = squaredLength;\r\n\r\n/**\r\n * Normalize a quat\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a quaternion to normalize\r\n * @returns {quat} out\r\n * @function\r\n */\r\nexport var normalize = vec4.normalize;\r\n\r\n/**\r\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {quat} a The first quaternion.\r\n * @param {quat} b The second quaternion.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nexport var exactEquals = vec4.exactEquals;\r\n\r\n/**\r\n * Returns whether or not the quaternions have approximately the same elements in the same position.\r\n *\r\n * @param {quat} a The first vector.\r\n * @param {quat} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nexport var equals = vec4.equals;\r\n\r\n/**\r\n * Sets a quaternion to represent the shortest rotation from one\r\n * vector to another.\r\n *\r\n * Both vectors are assumed to be unit length.\r\n *\r\n * @param {quat} out the receiving quaternion.\r\n * @param {vec3} a the initial vector\r\n * @param {vec3} b the destination vector\r\n * @returns {quat} out\r\n */\r\nexport var rotationTo = function () {\r\n  var tmpvec3 = vec3.create();\r\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\r\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\r\n\r\n  return function (out, a, b) {\r\n    var dot = vec3.dot(a, b);\r\n    if (dot < -0.999999) {\r\n      vec3.cross(tmpvec3, xUnitVec3, a);\r\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\r\n      vec3.normalize(tmpvec3, tmpvec3);\r\n      setAxisAngle(out, tmpvec3, Math.PI);\r\n      return out;\r\n    } else if (dot > 0.999999) {\r\n      out[0] = 0;\r\n      out[1] = 0;\r\n      out[2] = 0;\r\n      out[3] = 1;\r\n      return out;\r\n    } else {\r\n      vec3.cross(tmpvec3, a, b);\r\n      out[0] = tmpvec3[0];\r\n      out[1] = tmpvec3[1];\r\n      out[2] = tmpvec3[2];\r\n      out[3] = 1 + dot;\r\n      return normalize(out, out);\r\n    }\r\n  };\r\n}();\r\n\r\n/**\r\n * Performs a spherical linear interpolation with two control points\r\n *\r\n * @param {quat} out the receiving quaternion\r\n * @param {quat} a the first operand\r\n * @param {quat} b the second operand\r\n * @param {quat} c the third operand\r\n * @param {quat} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {quat} out\r\n */\r\nexport var sqlerp = function () {\r\n  var temp1 = create();\r\n  var temp2 = create();\r\n\r\n  return function (out, a, b, c, d, t) {\r\n    slerp(temp1, a, d, t);\r\n    slerp(temp2, b, c, t);\r\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\r\n\r\n    return out;\r\n  };\r\n}();\r\n\r\n/**\r\n * Sets the specified quaternion with values corresponding to the given\r\n * axes. Each axis is a vec3 and is expected to be unit length and\r\n * perpendicular to all other specified axes.\r\n *\r\n * @param {vec3} view  the vector representing the viewing direction\r\n * @param {vec3} right the vector representing the local \"right\" direction\r\n * @param {vec3} up    the vector representing the local \"up\" direction\r\n * @returns {quat} out\r\n */\r\nexport var setAxes = function () {\r\n  var matr = mat3.create();\r\n\r\n  return function (out, view, right, up) {\r\n    matr[0] = right[0];\r\n    matr[3] = right[1];\r\n    matr[6] = right[2];\r\n\r\n    matr[1] = up[0];\r\n    matr[4] = up[1];\r\n    matr[7] = up[2];\r\n\r\n    matr[2] = -view[0];\r\n    matr[5] = -view[1];\r\n    matr[8] = -view[2];\r\n\r\n    return normalize(out, fromMat3(out, matr));\r\n  };\r\n}();","import * as glMatrix from \"./common.js\";\r\n\r\n/**\r\n * 2 Dimensional Vector\r\n * @module vec2\r\n */\r\n\r\n/**\r\n * Creates a new, empty vec2\r\n *\r\n * @returns {vec2} a new 2D vector\r\n */\r\nexport function create() {\r\n  var out = new glMatrix.ARRAY_TYPE(2);\r\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\r\n    out[0] = 0;\r\n    out[1] = 0;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new vec2 initialized with values from an existing vector\r\n *\r\n * @param {vec2} a vector to clone\r\n * @returns {vec2} a new 2D vector\r\n */\r\nexport function clone(a) {\r\n  var out = new glMatrix.ARRAY_TYPE(2);\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Creates a new vec2 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} a new 2D vector\r\n */\r\nexport function fromValues(x, y) {\r\n  var out = new glMatrix.ARRAY_TYPE(2);\r\n  out[0] = x;\r\n  out[1] = y;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Copy the values from one vec2 to another\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the source vector\r\n * @returns {vec2} out\r\n */\r\nexport function copy(out, a) {\r\n  out[0] = a[0];\r\n  out[1] = a[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Set the components of a vec2 to the given values\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @returns {vec2} out\r\n */\r\nexport function set(out, x, y) {\r\n  out[0] = x;\r\n  out[1] = y;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nexport function add(out, a, b) {\r\n  out[0] = a[0] + b[0];\r\n  out[1] = a[1] + b[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nexport function subtract(out, a, b) {\r\n  out[0] = a[0] - b[0];\r\n  out[1] = a[1] - b[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Multiplies two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nexport function multiply(out, a, b) {\r\n  out[0] = a[0] * b[0];\r\n  out[1] = a[1] * b[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Divides two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nexport function divide(out, a, b) {\r\n  out[0] = a[0] / b[0];\r\n  out[1] = a[1] / b[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.ceil the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to ceil\r\n * @returns {vec2} out\r\n */\r\nexport function ceil(out, a) {\r\n  out[0] = Math.ceil(a[0]);\r\n  out[1] = Math.ceil(a[1]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.floor the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to floor\r\n * @returns {vec2} out\r\n */\r\nexport function floor(out, a) {\r\n  out[0] = Math.floor(a[0]);\r\n  out[1] = Math.floor(a[1]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the minimum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nexport function min(out, a, b) {\r\n  out[0] = Math.min(a[0], b[0]);\r\n  out[1] = Math.min(a[1], b[1]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the maximum of two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec2} out\r\n */\r\nexport function max(out, a, b) {\r\n  out[0] = Math.max(a[0], b[0]);\r\n  out[1] = Math.max(a[1], b[1]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Math.round the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to round\r\n * @returns {vec2} out\r\n */\r\nexport function round(out, a) {\r\n  out[0] = Math.round(a[0]);\r\n  out[1] = Math.round(a[1]);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Scales a vec2 by a scalar number\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec2} out\r\n */\r\nexport function scale(out, a, b) {\r\n  out[0] = a[0] * b;\r\n  out[1] = a[1] * b;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Adds two vec2's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec2} out\r\n */\r\nexport function scaleAndAdd(out, a, b, scale) {\r\n  out[0] = a[0] + b[0] * scale;\r\n  out[1] = a[1] + b[1] * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\r\nexport function distance(a, b) {\r\n  var x = b[0] - a[0],\r\n      y = b[1] - a[1];\r\n  return Math.sqrt(x * x + y * y);\r\n}\r\n\r\n/**\r\n * Calculates the squared euclidian distance between two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\r\nexport function squaredDistance(a, b) {\r\n  var x = b[0] - a[0],\r\n      y = b[1] - a[1];\r\n  return x * x + y * y;\r\n}\r\n\r\n/**\r\n * Calculates the length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\r\nexport function length(a) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  return Math.sqrt(x * x + y * y);\r\n}\r\n\r\n/**\r\n * Calculates the squared length of a vec2\r\n *\r\n * @param {vec2} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\r\nexport function squaredLength(a) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  return x * x + y * y;\r\n}\r\n\r\n/**\r\n * Negates the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to negate\r\n * @returns {vec2} out\r\n */\r\nexport function negate(out, a) {\r\n  out[0] = -a[0];\r\n  out[1] = -a[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Returns the inverse of the components of a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to invert\r\n * @returns {vec2} out\r\n */\r\nexport function inverse(out, a) {\r\n  out[0] = 1.0 / a[0];\r\n  out[1] = 1.0 / a[1];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Normalize a vec2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a vector to normalize\r\n * @returns {vec2} out\r\n */\r\nexport function normalize(out, a) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  var len = x * x + y * y;\r\n  if (len > 0) {\r\n    //TODO: evaluate use of glm_invsqrt here?\r\n    len = 1 / Math.sqrt(len);\r\n    out[0] = a[0] * len;\r\n    out[1] = a[1] * len;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * Calculates the dot product of two vec2's\r\n *\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\r\nexport function dot(a, b) {\r\n  return a[0] * b[0] + a[1] * b[1];\r\n}\r\n\r\n/**\r\n * Computes the cross product of two vec2's\r\n * Note that the cross product must by definition produce a 3D vector\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @returns {vec3} out\r\n */\r\nexport function cross(out, a, b) {\r\n  var z = a[0] * b[1] - a[1] * b[0];\r\n  out[0] = out[1] = 0;\r\n  out[2] = z;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Performs a linear interpolation between two vec2's\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the first operand\r\n * @param {vec2} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec2} out\r\n */\r\nexport function lerp(out, a, b, t) {\r\n  var ax = a[0],\r\n      ay = a[1];\r\n  out[0] = ax + t * (b[0] - ax);\r\n  out[1] = ay + t * (b[1] - ay);\r\n  return out;\r\n}\r\n\r\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec2} out\r\n */\r\nexport function random(out, scale) {\r\n  scale = scale || 1.0;\r\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\r\n  out[0] = Math.cos(r) * scale;\r\n  out[1] = Math.sin(r) * scale;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec2 with a mat2\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2} m matrix to transform with\r\n * @returns {vec2} out\r\n */\r\nexport function transformMat2(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  out[0] = m[0] * x + m[2] * y;\r\n  out[1] = m[1] * x + m[3] * y;\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec2 with a mat2d\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat2d} m matrix to transform with\r\n * @returns {vec2} out\r\n */\r\nexport function transformMat2d(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  out[0] = m[0] * x + m[2] * y + m[4];\r\n  out[1] = m[1] * x + m[3] * y + m[5];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec2 with a mat3\r\n * 3rd vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat3} m matrix to transform with\r\n * @returns {vec2} out\r\n */\r\nexport function transformMat3(out, a, m) {\r\n  var x = a[0],\r\n      y = a[1];\r\n  out[0] = m[0] * x + m[3] * y + m[6];\r\n  out[1] = m[1] * x + m[4] * y + m[7];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Transforms the vec2 with a mat4\r\n * 3rd vector component is implicitly '0'\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec2} out the receiving vector\r\n * @param {vec2} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec2} out\r\n */\r\nexport function transformMat4(out, a, m) {\r\n  var x = a[0];\r\n  var y = a[1];\r\n  out[0] = m[0] * x + m[4] * y + m[12];\r\n  out[1] = m[1] * x + m[5] * y + m[13];\r\n  return out;\r\n}\r\n\r\n/**\r\n * Rotate a 2D vector\r\n * @param {vec2} out The receiving vec2\r\n * @param {vec2} a The vec2 point to rotate\r\n * @param {vec2} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec2} out\r\n */\r\nexport function rotate(out, a, b, c) {\r\n  //Translate point to the origin\r\n  var p0 = a[0] - b[0],\r\n      p1 = a[1] - b[1],\r\n      sinC = Math.sin(c),\r\n      cosC = Math.cos(c);\r\n\r\n  //perform rotation and translate to correct position\r\n  out[0] = p0 * cosC - p1 * sinC + b[0];\r\n  out[1] = p0 * sinC + p1 * cosC + b[1];\r\n\r\n  return out;\r\n}\r\n\r\n/**\r\n * Get the angle between two 2D vectors\r\n * @param {vec2} a The first operand\r\n * @param {vec2} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\r\nexport function angle(a, b) {\r\n  var x1 = a[0],\r\n      y1 = a[1],\r\n      x2 = b[0],\r\n      y2 = b[1];\r\n\r\n  var len1 = x1 * x1 + y1 * y1;\r\n  if (len1 > 0) {\r\n    //TODO: evaluate use of glm_invsqrt here?\r\n    len1 = 1 / Math.sqrt(len1);\r\n  }\r\n\r\n  var len2 = x2 * x2 + y2 * y2;\r\n  if (len2 > 0) {\r\n    //TODO: evaluate use of glm_invsqrt here?\r\n    len2 = 1 / Math.sqrt(len2);\r\n  }\r\n\r\n  var cosine = (x1 * x2 + y1 * y2) * len1 * len2;\r\n\r\n  if (cosine > 1.0) {\r\n    return 0;\r\n  } else if (cosine < -1.0) {\r\n    return Math.PI;\r\n  } else {\r\n    return Math.acos(cosine);\r\n  }\r\n}\r\n\r\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec2} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\r\nexport function str(a) {\r\n  return 'vec2(' + a[0] + ', ' + a[1] + ')';\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nexport function exactEquals(a, b) {\r\n  return a[0] === b[0] && a[1] === b[1];\r\n}\r\n\r\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec2} a The first vector.\r\n * @param {vec2} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\r\nexport function equals(a, b) {\r\n  var a0 = a[0],\r\n      a1 = a[1];\r\n  var b0 = b[0],\r\n      b1 = b[1];\r\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\r\n}\r\n\r\n/**\r\n * Alias for {@link vec2.length}\r\n * @function\r\n */\r\nexport var len = length;\r\n\r\n/**\r\n * Alias for {@link vec2.subtract}\r\n * @function\r\n */\r\nexport var sub = subtract;\r\n\r\n/**\r\n * Alias for {@link vec2.multiply}\r\n * @function\r\n */\r\nexport var mul = multiply;\r\n\r\n/**\r\n * Alias for {@link vec2.divide}\r\n * @function\r\n */\r\nexport var div = divide;\r\n\r\n/**\r\n * Alias for {@link vec2.distance}\r\n * @function\r\n */\r\nexport var dist = distance;\r\n\r\n/**\r\n * Alias for {@link vec2.squaredDistance}\r\n * @function\r\n */\r\nexport var sqrDist = squaredDistance;\r\n\r\n/**\r\n * Alias for {@link vec2.squaredLength}\r\n * @function\r\n */\r\nexport var sqrLen = squaredLength;\r\n\r\n/**\r\n * Perform some operation over an array of vec2s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\r\nexport var forEach = function () {\r\n  var vec = create();\r\n\r\n  return function (a, stride, offset, count, fn, arg) {\r\n    var i = void 0,\r\n        l = void 0;\r\n    if (!stride) {\r\n      stride = 2;\r\n    }\r\n\r\n    if (!offset) {\r\n      offset = 0;\r\n    }\r\n\r\n    if (count) {\r\n      l = Math.min(count * stride + offset, a.length);\r\n    } else {\r\n      l = a.length;\r\n    }\r\n\r\n    for (i = offset; i < l; i += stride) {\r\n      vec[0] = a[i];vec[1] = a[i + 1];\r\n      fn(vec, vec, arg);\r\n      a[i] = vec[0];a[i + 1] = vec[1];\r\n    }\r\n\r\n    return a;\r\n  };\r\n}();","import { mat4 } from 'gl-matrix';\n\nconst DEG2RAD = Math.PI / 180.0;\n\nexport default class Mat4 {\n  constructor() {\n    this.mat4 = mat4.create();\n  }\n\n  identity() {\n    mat4.identity(this.mat4);\n  }\n\n  ortho(width, height, zRange = 2 ** 16) {\n    const hw = width >> 1;\n    const hh = height >> 1;\n    const hz = zRange >> 1;\n    mat4.ortho(this.mat4, -hw, hw, -hh, hh, -hz, hz);\n  }\n\n  perspective(width, height, distance = 100) {\n    // https://webglfundamentals.org/webgl/lessons/webgl-3d-perspective.html\n    // https://stackoverflow.com/questions/6653080/in-opengl-how-can-i-determine-the-bounds-of-the-view-at-a-given-depth\n    // http://glmatrix.net/docs/module-mat4.html\n    const aspect = width / height;\n    const near = 0;\n    const far = 2000;\n    const halfHeight = height / 2.0;\n    const fovy = 2 * Math.atan(halfHeight / distance);\n    mat4.perspective(this.mat4, fovy, aspect, near, far);\n    mat4.translate(this.mat4, this.mat4, [0, 0, -distance]);\n  }\n\n  translate(x, y, z = 0) {\n    mat4.translate(this.mat4, this.mat4, [x, y, z]);\n  }\n\n  scale(x, y, z = 1) {\n    mat4.scale(this.mat4, this.mat4, [x, y, z]);\n  }\n\n  rotateX(deg) {\n    mat4.rotateX(this.mat4, this.mat4, deg * DEG2RAD);\n  }\n\n  rotateY(deg) {\n    mat4.rotateY(this.mat4, this.mat4, deg * DEG2RAD);\n  }\n\n  rotateZ(deg) {\n    mat4.rotateZ(this.mat4, this.mat4, deg * DEG2RAD);\n  }\n\n  multiply(a, b) {\n    mat4.multiply(this.mat4, a.mat4, b.mat4);\n  }\n\n  copy(src) {\n    mat4.copy(this.mat4, src.mat4);\n  }\n\n  clone() {\n    const dolly = new Mat4();\n    dolly.copy(this);\n    return dolly;\n  }\n\n  get x() {\n    return this.mat4[12];\n  }\n\n  set x(val) {\n    this.mat4[12] = val;\n  }\n\n  get y() {\n    return this.mat4[13];\n  }\n\n  set y(val) {\n    this.mat4[13] = val;\n  }\n\n  get z() {\n    return this.mat4[14];\n  }\n\n  set z(val) {\n    this.mat4[14] = val;\n  }\n\n  get sx() {\n    return this.mat4[0];\n  }\n\n  set sx(val) {\n    this.mat4[0] = val;\n  }\n\n  get sy() {\n    return this.mat4[5];\n  }\n\n  set sy(val) {\n    this.mat4[5] = val;\n  }\n\n  get sz() {\n    return this.mat4[10];\n  }\n\n  set sz(val) {\n    this.mat4[10] = val;\n  }\n}\n","/* eslint-env browser */\n/* eslint no-param-reassign: 0 */\nimport {\n  isPowerOf2,\n  findNextPowerOf2,\n} from '@picimo/utils'; // eslint-disable-line\n\n/** @private */\nfunction convertToPowerOf2(image) {\n  const w = findNextPowerOf2(image.width);\n  const h = findNextPowerOf2(image.height);\n\n  const canvas = document.createElement('canvas');\n  canvas.width = w;\n  canvas.height = h;\n  canvas.getContext('2d').drawImage(image, 0, 0);\n\n  return canvas;\n}\n\n/** @private */\nfunction setPowerOf2ImgEl(p2img, imgEl) {\n  p2img.imgEl = isPowerOf2(imgEl.width) && isPowerOf2(imgEl.height) ? imgEl : convertToPowerOf2(imgEl);\n  p2img.origWidth = imgEl.width;\n  p2img.origHeight = imgEl.height;\n}\n\n/**\n * Represents a `<img>` or `<canvas>` element which sizes (width and height) are\n * always power of 2.\n */\nexport default class PowerOf2Image {\n  /**\n   * If image dimension is NOT power of 2 then create a new `<canvas>`\n   * (with power of 2 dimension) and copy the original image content onto it.\n   * Since fetching imge data from server is a *async* operation the `imgEl` property\n   * can be `null` right after object construction and will be set later after\n   * image is loaded (and possible converted).\n   *\n   * @param {string|HTMLImageElement|HTMLCanvasElement} from - url or html *image* element\n   */\n  constructor(from) {\n    let imgEl;\n    if (typeof from === 'string') {\n      imgEl = new window.Image();\n      imgEl.src = from;\n    } else {\n      imgEl = from;\n    }\n    if (imgEl.onLoaded === false || (imgEl.width === 0 && imgEl.height === 0)) {\n      /**\n       * @type {HTMLImageElement|HTMLCanvasElement}\n       */\n      this.imgEl = null;\n      /**\n       * @type {Promise<PowerOf2Image>}\n       */\n      this.onLoaded = new Promise((resolve) => {\n        const origOnLoad = imgEl.onload;\n        imgEl.onload = () => {\n          if (origOnLoad) origOnLoad.call(imgEl);\n          setPowerOf2ImgEl(this, imgEl);\n          resolve(this);\n        };\n      });\n    } else {\n      setPowerOf2ImgEl(this, imgEl);\n      /**\n       * @type {Promise<PowerOf2Image>}\n       */\n      this.onLoaded = Promise.resolve(this);\n    }\n  }\n\n  /**\n   * A boolean that is `true` if the image has loaded and possible converted.\n   * @type {boolean}\n   */\n  get isComplete() {\n    return this.imgEl != null;\n  }\n\n  /**\n   * Returns image width or `0` if image loading is not finished.\n   * @type {number}\n   */\n  get width() {\n    return (this.imgEl && this.imgEl.width) || 0;\n  }\n\n  /**\n   * Returns image height or `0` if image loading is not finished.\n   * @type {number}\n   */\n  get height() {\n    return (this.imgEl && this.imgEl.height) || 0;\n  }\n}\n\n","/* eslint-env browser */\nimport Mat4 from './Mat4';\n\nexport const COVER = 'cover';\nexport const CONTAIN = 'contain';\nexport const FILL = 'fill';\n\n/**\n * @param {object} options\n * @param {number} [options.pixelRatio] - generate width & height by a pixel ratio\n * @param {number} [options.devicePixelRatio] - force set `devicePixelRatio` to a fixed value (default is read out from `window.devicePixelRatio`)\n * @param {number} [options.width=0] - desired width\n * @param {number} [options.height=0] - desired height\n * @param {number} [options.perspective=0] - perspective distance (0 means no perspective)\n * @param {string} [options.fit] - `cover`, `contain` or `fill`\n */\nexport default class Projection {\n  constructor({\n    devicePixelRatio,\n    fit,\n    height,\n    perspective,\n    pixelRatio,\n    width,\n  }) {\n    this.desiredWidth = width || 0;\n    this.desiredHeight = height || 0;\n    this.desiredPixelRatio = pixelRatio;\n    this.customDevicePixelRatio = devicePixelRatio;\n    this.fit = fit;\n    this.perspective = perspective;\n    this.lastPerspective = undefined;\n    this.width = 0;\n    this.height = 0;\n    this.pixelRatio = 0;\n    this.rawWidth = 0;\n    this.rawHeight = 0;\n    this.mat4 = new Mat4();\n  }\n\n  get devicePixelRatio() {\n    return this.customDevicePixelRatio || window.devicePixelRatio || 1;\n  }\n\n  set perspective(distance) {\n    this._perspective = typeof distance === 'number' ? Math.abs(distance) : 0;\n  }\n\n  get perspective() {\n    return this._perspective;\n  }\n\n  /**\n   * @return {bool} returns `true` if projection `mat4` updated, returns `false` if unchanged\n   */\n  updateOrtho(width, height) {\n    const { perspective } = this;\n    if (width !== this.width || height !== this.height || perspective !== this.lastPerspective) {\n      this.width = width;\n      this.height = height;\n      this.lastPerspective = perspective;\n      if (perspective > 0) {\n        this.mat4.perspective(width, height, perspective);\n      } else {\n        this.mat4.ortho(width, height);\n      }\n      this.pixelRatio = this.rawHeight / height;\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @return {bool} returns `true` if projection `mat4` updated, returns `false` if unchanged\n   */\n  update(currentWidth, currentHeight) {\n    this.rawWidth = currentWidth;\n    this.rawHeight = currentHeight;\n    const { desiredPixelRatio } = this;\n    if (typeof desiredPixelRatio === 'number' && desiredPixelRatio > 0) {\n      // pixelRatio\n      // ----------\n      const r = this.devicePixelRatio * desiredPixelRatio;\n      const width = currentWidth / r;\n      const height = currentHeight / r;\n      return this.updateOrtho(width, height);\n    } else if (this.fit === FILL && this.desiredWidth > 0 && this.desiredHeight > 0) {\n      // FILL\n      // ----\n      return this.updateOrtho(this.desiredWidth, this.desiredHeight);\n    } else if ((this.fit === COVER || this.fit === CONTAIN) &&\n      // COVER|CONTAIN\n      // -------------\n      this.desiredWidth >= 0 && this.desiredHeight >= 0) {\n      const currentRatio = currentHeight / currentWidth; // <1 : landscape, >1 : portrait\n      const desiredRatio = this.desiredHeight / this.desiredWidth;\n      const isCover = this.fit === COVER;\n\n      let width = this.desiredWidth;\n      let height = this.desiredHeight;\n\n      if ((this.desiredWidth === 0 && this.desiredHeight) || currentRatio < desiredRatio || (currentRatio === 1 && desiredRatio > 1)) {\n        width = (this.desiredHeight / currentHeight) * currentWidth;\n        if (isCover) {\n          const factor = this.desiredWidth / width;\n          width *= factor;\n          height *= factor;\n        }\n      } else if ((this.desiredWidth && this.desiredHeight === 0) || currentRatio > desiredRatio || (currentRatio === 1 && desiredRatio < 1)) {\n        height = (this.desiredWidth / currentWidth) * currentHeight;\n        if (isCover) {\n          const factor = this.desiredHeight / height;\n          width *= factor;\n          height *= factor;\n        }\n      }\n      return this.updateOrtho(width, height);\n    }\n    return false;\n  }\n}\n","import DataRef from './DataRef';\n\n/**\n * @desc\n * Generic container for *shader variables*.\n *\n * @private\n *\n * A shader variable can be an *uniform*, *vertex attributes* or *textures* ..\n * A shader variable is a `DataRef` but has an additional `name`.\n */\nexport default class ShaderVariable extends DataRef {\n  /**\n   * @param {string} name\n   * @param {string} type\n   * @param {number|Object} value\n   * @param {Object} [hints]\n   */\n  constructor(name, type, value, hints) {\n    super(type, value, Object.assign({ serial: 0 }, hints));\n\n    this.name = name;\n  }\n}\n\nShaderVariable.UNIFORM = 'uniform';\nShaderVariable.ATTRIB = 'attrib';\nShaderVariable.TEXTURE_2D = 'tex2d';\n","import ShaderVariable from './ShaderVariable';\n\n/**\n * Shader uniform variable.\n */\nexport default class ShaderUniformVariable extends ShaderVariable {\n  /**\n   * @param {string} name\n   * @param {number|Object} value\n   * @param {Object} [hints]\n   */\n  constructor(name, value, hints) {\n    super(name, ShaderVariable.UNIFORM, value, hints);\n  }\n}\n","import ShaderUniformVariable from './ShaderUniformVariable';\n\nconst PROJECTION_UNIFORM_NAME = 'projection';\n\nexport default class ProjectionUniform extends ShaderUniformVariable {\n  constructor(projection, name = PROJECTION_UNIFORM_NAME) {\n    super(name, projection.mat4, { projection });\n  }\n\n  get projection() {\n    return this.hint('projection');\n  }\n\n  update(width, height) {\n    if (this.projection.update(width, height)) {\n      this.touch();\n    }\n  }\n}\n","import DataRef from './DataRef';\n\n// === private === {{{\n\n/** @private */\nconst TYPED_ARRAY = {\n  float32: Float32Array,\n  int16: Int16Array,\n  int32: Int32Array,\n  int8: Int8Array,\n  uint16: Uint16Array,\n  uint32: Uint32Array,\n  uint8: Uint8Array,\n};\n\n/** @private */\nconst createBufferView = (capacity, bytesPerVO, data) => {\n  const byteLength = capacity * bytesPerVO;\n\n  if (data instanceof ArrayBuffer) {\n    if (byteLength > data.byteLength) {\n      throw new TypeError(`VOArray: [data] buffer is too small! needs ${byteLength} bytes (capacity=${capacity} bytesPerVO=${bytesPerVO}) but has ${data.byteLength} bytes!`);\n    }\n    return new DataView(data, 0, byteLength);\n  }\n\n  if (ArrayBuffer.isView(data)) {\n    const { byteOffset, byteLength: dataByteLength } = data;\n    if (byteLength > dataByteLength) {\n      throw new TypeError(`VOArray: [data] buffer is too small! needs ${byteLength} bytes (capacity=${capacity} bytesPerVO=${bytesPerVO}) but has ${dataByteLength} (byteOffset=${byteOffset}) bytes!`);\n    }\n    return new DataView(data.buffer, byteOffset, byteLength);\n  }\n\n  throw new TypeError('VOArray: [data] must be instanceof ArrayBuffer, DataView or TypedArray!');\n};\n\n/** @private */\nconst typedArrayProp = type => `${type}Array`;\n\n/** @private */\nconst createLinkedTypedArrays = (buffer, bufferByteOffset, bufferByteLength, arrayTypes) => {\n  const typedArrays = {};\n\n  arrayTypes.forEach((type) => {\n    const TypedArray = TYPED_ARRAY[type];\n    const arr = new TypedArray(buffer, bufferByteOffset, bufferByteLength / TypedArray.BYTES_PER_ELEMENT);\n    typedArrays[typedArrayProp(type)] = arr;\n  });\n\n  return typedArrays;\n};\n\n// --- }}}\n\n/**\n * A wrapper for an ArrayBuffer which additional holds multiple references to typed arrays.\n */\nexport default class VOArray {\n  /**\n   * Create a VOArray\n   *\n   * For each *array type* a property is created:\n   *\n   * _arrayType_:`float32` &rarr; _property_:`float32Array` &rarr; _type_:`Float32Array`\n   *\n   * Valid _array types_ are: `float32`, `int32`, `int16`, `int8`, `uint32`, `uint16`, `uint8`\n   *\n   * If `data` is defined, no new buffer is created but a *view* of the buffer passed is generated.\n   *\n   * @param {number} capacity - Number of `vertex objects`\n   * @param {number} bytesPerVO - Size of a single `vertex object` in *bytes*. **Must be divisible by 4**.\n   * @param {Array<string>} arrayTypes - List of allowed *typed array types*. Should have at least one type included.\n   * @param {ArrayBuffer|DataView|TypedArray} [data] - Create a *view* into the buffer from `data`\n   * @param {Object} [hints] - Optional *hints* for the *reference*\n   */\n  constructor(capacity, bytesPerVO, arrayTypes, data, hints) {\n    if (bytesPerVO % 4 !== 0) {\n      throw new TypeError(`new VOArray: bytesPerVO must be divisible by 4 (but is not!) bytesPerVO=${bytesPerVO}`);\n    }\n\n    this.capacity = capacity;\n    this.bytesPerVO = bytesPerVO;\n    this.arrayTypes = arrayTypes.slice(0);\n\n    if (data) {\n      const buffer = createBufferView(capacity, bytesPerVO, data);\n\n      /** @type {ArrayBuffer} */\n      this.buffer = buffer.buffer;\n      this.bufferByteOffset = buffer.byteOffset;\n      this.bufferByteLength = buffer.byteLength;\n    } else {\n      /** @type {ArrayBuffer} */\n      this.buffer = new ArrayBuffer(capacity * bytesPerVO);\n      this.bufferByteOffset = 0;\n      this.bufferByteLength = this.buffer.byteLength;\n    }\n\n    Object.assign(this, createLinkedTypedArrays(this.buffer, this.bufferByteOffset, this.bufferByteLength, arrayTypes));\n\n    this.ref = new DataRef('VOArray', this, Object.assign({\n      typedArray: this.toUint32Array(),\n      serial: 1,\n    }, hints));\n  }\n\n  /**\n   * Copy all `vertex objects` from *source* to the internal *buffer* (destination).\n   * Both *arrays* should have the same `bytesPerVO` value.\n   *\n   * @param {VOArray} from - Source *array*.\n   * @param {number} [toOffset=0] - `vertex object` destination offset\n   */\n  copy(from, toOffset = 0) {\n    const elementsPerVO = this.bytesPerVO / Uint32Array.BYTES_PER_ELEMENT;\n\n    let offset = 0;\n\n    if (toOffset > 0) {\n      offset = toOffset * elementsPerVO;\n    }\n\n    this.toUint32Array().set(from.toUint32Array(), offset);\n  }\n\n  /**\n   * Returns the array buffer converted to `Uint32Array`.\n   * As a side-effect the `uint32Array` property will be created (if it did not exist before).\n   *\n   * @return {Uint32Array}\n   */\n  toUint32Array() {\n    const { uint32Array } = this;\n    if (!uint32Array) {\n      const elementsPerVO = this.bytesPerVO / Uint32Array.BYTES_PER_ELEMENT;\n      this.uint32Array = new Uint32Array(this.buffer, this.bufferByteOffset, this.capacity * elementsPerVO);\n      return this.uint32Array;\n    }\n    return uint32Array;\n  }\n\n  /**\n   * Create a VOArray *subarray*.\n   *\n   * A *subarray* is a *view* to the same underlying buffer. No data will be copied.\n   *\n   * @param {number} begin - Index of first `vertex object`\n   * @param {number} [size=1] - Number of `vertex objects` to copy\n   *\n   * @return {VOArray}\n   */\n  subarray(begin, size = 1) {\n    const { bytesPerVO, bufferByteOffset } = this;\n    const byteBegin = bufferByteOffset + (begin * bytesPerVO);\n    const byteLength = size * bytesPerVO;\n\n    return new VOArray(size, bytesPerVO, this.arrayTypes, new DataView(this.buffer, byteBegin, byteLength));\n  }\n}\n","/** @private */\nexport const BYTES_PER_ELEMENT = {\n  float32: 4,\n  int16: 2,\n  int32: 4,\n  int8: 1,\n  uint16: 2,\n  uint32: 4,\n  uint8: 1,\n};\n\n/** @private */\nexport const TYPED_ARRAY_CONSTRUCTOR = {\n  float32: Float32Array,\n  int16: Int16Array,\n  int32: Int32Array,\n  int8: Int8Array,\n  uint16: Uint16Array,\n  uint32: Uint32Array,\n  uint8: Uint8Array,\n};\n\n/** @private */\nexport const TYPED_ARRAY_GETTER = {\n  float32: obj => obj.float32Array,\n  int32: obj => obj.int32Array,\n  int16: obj => obj.int16Array,\n  int8: obj => obj.int8Array,\n  uint32: obj => obj.uint32Array,\n  uint16: obj => obj.uint16Array,\n  uint8: obj => obj.uint8Array,\n};\n\n/** @private */\nexport const GL_ITEM_TYPES = {\n  float32: 'FLOAT',\n  int16: 'SHORT',\n  int32: 'INT',\n  int8: 'BYTE',\n  uint16: 'UNSIGNED_SHORT',\n  uint32: 'UNSIGNED_INT',\n  uint8: 'UNSIGNED_BYTE',\n};\n","/* eslint no-param-reassign: 0 */\n/* eslint func-names: 0 */\n/* eslint prefer-rest-params: 0 */\nimport {\n  BYTES_PER_ELEMENT,\n  TYPED_ARRAY_GETTER,\n} from './typedArrayHelpers';\n\n/** @private */\nconst camelize = name => name[0].toUpperCase() + name.substr(1);\n\n/** @private */\nconst attrPostfix = (attrDesc, name, index) => {\n  if (attrDesc.scalars) {\n    const postfix = attrDesc.scalars[index];\n\n    if (postfix !== undefined) {\n      return postfix;\n    }\n  }\n\n  return `${name}_${index}`;\n};\n\n/** @private */\nconst getVNu = (getArray, offset) => function (attrIndex) {\n  return getArray(this.voArray)[offset + attrIndex];\n};\n\n/** @private */\nconst setVNu = (getArray, vectorLength, vertexCount, vertexAttrCount, offset) => function () {\n  const arr = getArray(this.voArray);\n\n  for (let i = 0; i < vertexCount; ++i) {\n    for (let n = 0; n < vectorLength; ++n) {\n      arr[(i * vertexAttrCount) + offset + n] = arguments[n];\n    }\n  }\n};\n\n/** @private */\nconst getV1u = (getArray, offset) => function () {\n  return getArray(this.voArray)[offset];\n};\n\n/** @private */\nconst setVNv = (getArray, vectorLength, vertexCount, vertexAttrCount, offset) => function () {\n  const arr = getArray(this.voArray);\n\n  for (let i = 0; i < vertexCount; ++i) {\n    for (let n = 0; n < vectorLength; ++n) {\n      arr[(i * vertexAttrCount) + offset + n] = arguments[(i * vectorLength) + n];\n    }\n  }\n};\n\n/** @private */\nconst setV1u = (getArray, vertexCount, vertexAttrCount, offset) => function (value) {\n  const arr = getArray(this.voArray);\n\n  for (let i = 0; i < vertexCount; ++i) {\n    arr[(i * vertexAttrCount) + offset] = value;\n  }\n};\n\n/**\n * Vertex object *attribute* descriptor.\n */\nexport default class VOAttrDescriptor {\n  /**\n   * @param {string} name\n   * @param {string} type\n   * @param {number} size\n   * @param {number} [offset] - either `offset` or `byteOffset` must be specified\n   * @param {number} [byteOffset] - either `offset` or `byteOffset` must be specified\n   * @param {boolean} uniform\n   * @param {string[]} [scalars]\n   */\n  constructor(name, type, size, offset, byteOffset, uniform, scalars) {\n    this.name = name;\n    this.type = type;\n    this.size = size;\n    this.uniform = uniform;\n    this.scalars = scalars;\n\n    this.bytesPerElement = BYTES_PER_ELEMENT[this.type];\n    this.bytesPerVertex = this.bytesPerElement * size;\n\n    if (typeof byteOffset !== 'number') {\n      this.byteOffset = offset * this.bytesPerElement;\n    } else {\n      this.byteOffset = byteOffset;\n    }\n\n    if (typeof offset !== 'number') {\n      this.offset = byteOffset / this.bytesPerElement;\n    } else {\n      this.offset = offset;\n    }\n  }\n\n  /**\n   * Number of attributes per vertex\n   * @type {number}\n   */\n  vertexAttrCount(descriptor) {\n    return descriptor.bytesPerVertex / this.bytesPerElement;\n  }\n\n  /**\n   * @private\n   */\n  static defineProperties(attrDesc, propertiesObject, descriptor) {\n    const { name } = attrDesc;\n    const getArray = TYPED_ARRAY_GETTER[attrDesc.type];\n    const { vertexCount } = descriptor;\n    const vertexAttrCount = attrDesc.vertexAttrCount(descriptor);\n    const offset = attrDesc.byteOffset / attrDesc.bytesPerElement;\n\n    if (attrDesc.size === 1) {\n      if (attrDesc.uniform) {\n        const valueGetter = getV1u(getArray, offset);\n        const valueSetter = setV1u(getArray, vertexCount, vertexAttrCount, offset);\n\n        attrDesc.getValue = vo => valueGetter.call(vo);\n        attrDesc.setValue = (vo, arg) => valueSetter.call(vo, arg);\n\n        propertiesObject[name] = {\n          get: valueGetter,\n          set: valueSetter,\n          enumerable: true,\n        };\n      } else {\n        const valueSetter = setVNv(getArray, 1, vertexCount, vertexAttrCount, offset);\n\n        attrDesc.setValue = (vo, args) => valueSetter.apply(vo, args);\n\n        propertiesObject[`set${camelize(name)}`] = {\n          value: valueSetter,\n          enumerable: true,\n        };\n\n        const valueGetters = [];\n\n        for (let i = 0; i < descriptor.vertexCount; ++i) {\n          const curValueGetter = getV1u(getArray, offset + (i * vertexAttrCount));\n\n          valueGetters.push(curValueGetter);\n\n          propertiesObject[name + i] = {\n            get: curValueGetter,\n            set: setVNv(getArray, 1, 1, 0, offset + (i * vertexAttrCount)),\n            enumerable: true,\n          };\n        }\n\n        attrDesc.getValue = (vo, vi) => valueGetters[vi].call(vo);\n      }\n    } else if (attrDesc.size >= 2) {\n      if (attrDesc.uniform) {\n        const valueGetter = getVNu(getArray, offset);\n        const valueSetter = setVNu(getArray, attrDesc.size, vertexCount, vertexAttrCount, offset);\n\n        attrDesc.getValue = (vo, vi, idx) => valueGetter.call(vo, idx);\n        attrDesc.setValue = (vo, args) => valueSetter.apply(vo, args);\n\n        propertiesObject[`get${camelize(name)}`] = {\n          value: valueGetter,\n          enumerable: true,\n        };\n\n        propertiesObject[`set${camelize(name)}`] = {\n          value: valueSetter,\n          enumerable: true,\n        };\n\n        for (let i = 0; i < attrDesc.size; ++i) {\n          const setterName = attrPostfix(attrDesc, name, i);\n\n          propertiesObject[setterName] = {\n            get: getV1u(getArray, offset + i),\n            set: setV1u(getArray, vertexCount, vertexAttrCount, offset + i),\n            enumerable: true,\n          };\n        }\n      } else {\n        const valueSetter = setVNv(getArray, attrDesc.size, vertexCount, vertexAttrCount, offset);\n\n        attrDesc.setValue = (vo, args) => valueSetter.apply(vo, args);\n\n        propertiesObject[`set${camelize(name)}`] = {\n          value: valueSetter,\n          enumerable: true,\n        };\n\n        const valueGetters = [];\n\n        for (let i = 0; i < descriptor.vertexCount; ++i) {\n          const curVertexValueGetters = [];\n\n          for (let j = 0; j < attrDesc.size; ++j) {\n            const setterName = attrPostfix(attrDesc, name, j) + i;\n            const curValueGetter = getV1u(getArray, offset + (i * vertexAttrCount) + j);\n\n            curVertexValueGetters.push(curValueGetter);\n\n            propertiesObject[setterName] = {\n              get: curValueGetter,\n              set: setVNv(getArray, 1, 1, 0, offset + (i * vertexAttrCount) + j),\n              enumerable: true,\n            };\n          }\n\n          valueGetters.push(curVertexValueGetters);\n        }\n\n        attrDesc.getValue = (vo, vi, idx) => valueGetters[vi][idx].call(vo);\n      }\n    }\n  }\n}\n","/* eslint no-param-reassign: 0 */\nimport { BYTES_PER_ELEMENT } from './typedArrayHelpers';\nimport VOAttrDescriptor from './VOAttrDescriptor';\n\nconst DEFAULT_ATTR_TYPE = 'float32';\n\n/** @private */\nexport default (descriptor, attributesOrObject) => {\n  let attributes;\n\n  if (Array.isArray(attributesOrObject)) {\n    attributes = attributesOrObject;\n  } else if (typeof attributesOrObject === 'object') {\n    attributes = Object.keys(attributesOrObject).map((name) => {\n      const attrConf = attributesOrObject[name];\n      return Object.assign({ name }, (Array.isArray(attrConf) ? { scalars: attrConf } : attrConf));\n    });\n  }\n\n  if (!attributes) {\n    throw new Error('VODescriptor:createAttributes: attributes should be an array or an object!');\n  }\n\n  descriptor.attr = {};\n  descriptor.scalars = [];\n\n  let offset = 0;\n  let byteOffset = 0;\n\n  for (let i = 0; i < attributes.length; ++i) {\n    const attr = attributes[i];\n\n    let attrSize = attr.size;\n    if (attrSize === undefined) {\n      if (Array.isArray(attr.scalars)) {\n        attrSize = attr.scalars.length;\n      } else {\n        attrSize = 1;\n        // throw new Error('VODescriptor:createAttributes: attribute descriptor has no :size (or :scalars) property!');\n      }\n    }\n\n    const type = attr.type || DEFAULT_ATTR_TYPE;\n\n    if (attr.name !== undefined) {\n      descriptor.scalars.push(attr.name);\n      descriptor.attr[attr.name] = new VOAttrDescriptor(attr.name, type, attrSize, offset, byteOffset, !!attr.uniform, attr.scalars);\n    }\n\n    offset += attrSize;\n    byteOffset += BYTES_PER_ELEMENT[type] * attrSize;\n  }\n\n  // bytes per vertex is always aligned to 4-bytes!\n  descriptor.rightPadBytesPerVertex = byteOffset % 4 > 0 ? 4 - (byteOffset % 4) : 0;\n\n  descriptor.bytesPerVertex = byteOffset + descriptor.rightPadBytesPerVertex;\n  descriptor.bytesPerVO = descriptor.bytesPerVertex * descriptor.vertexCount;\n  descriptor.vertexAttrCount = offset;\n\n  descriptor.attrList = descriptor.scalars.map(name => descriptor.attr[name]);\n};\n","/* eslint no-param-reassign: 0 */\nimport VOAttrDescriptor from './VOAttrDescriptor';\n\n/** @private */\nexport default (descriptor, aliases) => {\n  if (typeof aliases !== 'object') return;\n\n  Object.keys(aliases).forEach((name) => {\n    let attr = aliases[name];\n\n    if (typeof attr === 'string') {\n      attr = descriptor.attr[attr];\n\n      if (attr !== undefined) {\n        descriptor.attr[name] = attr;\n      }\n    } else {\n      descriptor.attr[name] = new VOAttrDescriptor(name, attr.type, attr.size, attr.offset, attr.byteOffset, !!attr.uniform, attr.scalars);\n    }\n  });\n};\n","/* eslint func-names: 0 */\n/* eslint no-param-reassign: 0 */\nimport VOAttrDescriptor from './VOAttrDescriptor';\n\n/** @private */\nconst toArray = descriptor => function (scalars) {\n  const arr = [];\n  const attrList = Array.isArray(scalars)\n    ? scalars.map(name => descriptor.attr[name])\n    : descriptor.attrList;\n  const len = attrList.length;\n\n  for (let i = 0; i < descriptor.vertexCount; ++i) {\n    for (let j = 0; j < len; ++j) {\n      const attr = attrList[j];\n      for (let k = 0; k < attr.size; ++k) {\n        arr.push(attr.getValue(this, i, k));\n      }\n    }\n  }\n  return arr;\n};\n\n/** @private */\nexport default (descriptor, proto = {}) => {\n  const propertiesObject = {\n    toArray: {\n      value: toArray(descriptor),\n    },\n  };\n\n  Object.keys(descriptor.attr).forEach((name) => {\n    const attr = descriptor.attr[name];\n\n    VOAttrDescriptor.defineProperties(attr, propertiesObject, descriptor);\n  });\n\n  descriptor.voPrototype = Object.create(proto, propertiesObject);\n};\n","/* eslint no-param-reassign: 0 */\n\n/** @private */\nexport default (descriptor) => {\n  descriptor.typedArrays = {\n    float32: false,\n    int16: false,\n    int32: false,\n    int8: false,\n    uint16: false,\n    uint32: false,\n    uint8: false,\n  };\n\n  Object.keys(descriptor.attr).forEach((name) => {\n    descriptor.typedArrays[descriptor.attr[name].type] = true;\n  });\n\n  descriptor.typeList = Object.keys(descriptor.typedArrays).filter(type => descriptor.typedArrays[type]).sort();\n};\n","/* eslint no-param-reassign: 0 */\n\n/** @private */\nexport default (obj, descriptor, voArray) => {\n  // set VODescriptor\n  //\n  obj.descriptor = descriptor; // || (voArray ? voArray.descriptor : null);\n\n  if (!obj.descriptor) {\n    throw new Error('VODescriptor:createVO: could not read descriptor!');\n  }\n\n  // set VOArray\n  //\n  obj.voArray = voArray || obj.descriptor.createVOArray();\n\n  if (obj.descriptor.bytesPerVO !== obj.voArray.bytesPerVO &&\n    (obj.descriptor.typeList.join() !== obj.voArray.arrayTypes.join())) {\n    throw new TypeError('VODescriptor:createVO: descriptor and voArray are not compatible with each other!');\n  }\n\n  return obj;\n};\n","import VOArray from '../VOArray';\n\nimport createAttributes from './createAttributes';\nimport createAliases from './createAliases';\nimport createVOPrototype from './createVOPrototype';\nimport createTypedArrays from './createTypedArrays';\nimport createVO from './createVO';\n\n/**\n * Vertex object descriptor.\n *\n * @class VODescriptor\n *\n * @param {Object} options\n * @param {number} [options.vertexCount=1] - number of vertices\n * @param {Object[]} options.attributes - list of vertex attribute descriptions (see example)\n * @param {Object} [options.aliases] - *optional* list of attribute aliases\n * @param {Object} [options.proto]\n *\n * @example\n * const descriptor = new VODescriptor({\n *\n *     proto: {\n *         foo() {\n *             return this.voArray.float32Array[0];\n *         }\n *     },\n *\n *     // vertex buffer layout\n *     // --------------------\n *     //\n *     // v0: (x0)(y0)(z0)(rotate)(s0)(t0)(tx)(ty)(scale)(opacity)\n *     // v1: (x1)(y1)(z1)(rotate)(s1)(t1)(tx)(ty)(scale)(opacity)\n *     // v2: (x2)(y2)(z2)(rotate)(s2)(t2)(tx)(ty)(scale)(opacity)\n *     // v3: (x3)(y3)(z3)(rotate)(s3)(t3)(tx)(ty)(scale)(opacity)\n *     //\n *     vertexCount: 4,\n *\n *     attributes: [\n *\n *         { name: 'position',  type: 'float32', size: 3, scalars: [ 'x', 'y', 'z' ] },\n *         { name: 'rotate',    type: 'float32', size: 1, uniform: true },\n *         { name: 'texCoords', type: 'float32', size: 2, scalars: [ 's', 't' ] },\n *         { name: 'translate', type: 'float32', size: 2, scalars: [ 'tx', 'ty' ], uniform: true },\n *         { name: 'scale',     type: 'float32', size: 1, uniform: true },\n *         { name: 'opacity',   type: 'float32', size: 1, uniform: true }\n *\n *     ],\n *\n *     aliases: {\n *\n *         pos2d: { size: 2, type: 'float32', offset: 0 },\n *         posZ:  { size: 1, type: 'float32', offset: 2, uniform: true },\n *         r:     { size: 1, type: 'float32', offset: 3 },\n *         uv:    'texCoords',\n *\n *     }\n *\n * });\n *\n */\nexport default class VODescriptor {\n  constructor({\n    vertexCount,\n    instanceOf,\n    attributes,\n    aliases,\n    proto,\n  }) {\n    /** Number of _vertices_ per _vertex object_ */\n    this.vertexCount = parseInt(vertexCount, 10) || 1;\n\n    /** Returns `true` if this vertex object is *instanced* */\n    this.isInstanced = instanceOf != null;\n\n    /** @type VODescriptor */\n    this.base = instanceOf;\n\n    createAttributes(this, attributes);\n    createAliases(this, aliases);\n    createVOPrototype(this, proto);\n    createTypedArrays(this);\n  }\n\n  /**\n   * @param {number} [size=1]\n   * @param {Object} [hints] - Optional *hints* for the `VOArray`\n   * @returns {VOArray}\n   */\n  createVOArray(size = 1, hints = undefined) {\n    return new VOArray(size, this.bytesPerVO, this.typeList, null, Object.assign({\n      descriptor: this,\n      usage: 'dynamic',\n      doubleBuffer: true,\n    }, hints));\n  }\n\n  /**\n   * Create a *vertex object*.\n   *\n   * @param {VOArray} [voArray]\n   * @param {function|object} [voInit] - *vertex object* initializer\n   * @returns {Object} the initialized *vertex object*\n   */\n  createVO(voArray, voInit) {\n    const vo = createVO(Object.create(this.voPrototype), this, voArray);\n\n    switch (typeof voInit) { // eslint-disable-line\n      case 'function':\n        voInit(vo);\n        break;\n\n      case 'object': {\n        Object.keys(voInit).forEach((key) => {\n          const attrDesc = this.attr[key];\n          if (attrDesc) {\n            attrDesc.setValue(vo, voInit[key]);\n          } else if (typeof vo[key] === 'function') {\n            vo[key](voInit[key]);\n          } else {\n            vo[key] = voInit[key];\n          }\n        });\n      }\n    }\n\n    return vo;\n  }\n\n  /**\n   * Check if *descriptor* has an attribute with a specific size.\n   *\n   * @param {string} name\n   * @param {number} [size=1] - attribute items count\n   * @returns {boolean}\n   */\n  hasAttribute(name, size = 1) {\n    const attr = this.attr[name];\n    return attr && attr.size === size;\n  }\n\n  /**\n   * Max number of vertex objects when a vertex buffer is used together\n   * with a indexed element array to draw primitives. the reason for\n   * such a limit is that webgl restricts element array indices\n   * to an uint16 data type.\n   * @type {number}\n   */\n  get maxIndexedVOPoolSize() {\n    return Math.floor(65536 / this.vertexCount);\n  }\n}\n","/* eslint-env browser */\nimport generateUuid from './generateUuid';\n\nexport default class ShaderSource {\n  /**\n   * @param {string} type - `VERTEX_SHADER`, `FRAGMENT_SHADER` or `PARTIAL`\n   * @param {HTMLElement|Array<string>|string} source\n   * @param {string} [id]\n   * @param {Object} [ctx]\n   */\n  constructor(type, source, id, ctx) {\n    /**\n     * @type {string}\n     */\n    this.id = id || generateUuid();\n\n    /**\n     * @type {string}\n     */\n    this.type = type;\n\n    /** @private */\n    this.ctx = Object.assign({}, ctx);\n\n    if (source instanceof HTMLElement) {\n      this.strings = [source.textContent];\n      this.values = [];\n    } else if (Array.isArray(source)) {\n      [this.strings, this.values] = source;\n    } else {\n      this.strings = [String(source)];\n      this.values = [];\n    }\n  }\n\n  /**\n   * @param {Object} [context]\n   * @returns {string} - The final shader source code.\n   */\n  compile(context) {\n    const source = [this.strings[0]];\n    const ctx = Object.assign({}, this.ctx, context);\n    this.values.forEach((value, i) => {\n      let val = value;\n      if (typeof value === 'function') {\n        val = value(ctx);\n      } else if (value instanceof ShaderSource) {\n        if (value.type !== ShaderSource.PARTIAL) {\n          throw new Error(`ShaderSource.compile() panic! Only PARTIAL's are allowed to embed into shader sources! (but type=${value.type})`);\n        }\n        val = value.compile(ctx);\n      }\n      source.push(val, this.strings[i + 1]);\n    });\n    return source.join('');\n  }\n}\n\nShaderSource.VERTEX_SHADER = 'VERTEX_SHADER';\nShaderSource.FRAGMENT_SHADER = 'FRAGMENT_SHADER';\nShaderSource.PARTIAL = 'PARTIAL';\n\nShaderSource.vertexShader = ctx => (strings, ...values) => new ShaderSource(ShaderSource.VERTEX_SHADER, [strings, values], ctx && ctx.id, ctx);\nShaderSource.fragmentShader = ctx => (strings, ...values) => new ShaderSource(ShaderSource.FRAGMENT_SHADER, [strings, values], ctx && ctx.id, ctx);\nShaderSource.partial = ctx => (strings, ...values) => new ShaderSource(ShaderSource.PARTIAL, [strings, values], ctx && ctx.id, ctx);\n\nShaderSource.fromElement = (el) => {\n  let type = el.getAttribute('type');\n  if (type === 'x-shader/vertex') {\n    type = ShaderSource.VERTEX_SHADER;\n  } else if (type === 'x-shader/fragment') {\n    type = ShaderSource.FRAGMENT_SHADER;\n  } else {\n    throw new Error(`ShaderSource.fromElement() panic! Invalid type=\"${type}\" attribute value (should be \"x-shader/vertex\" or \"x-shader/fragment\")`);\n  }\n  return new ShaderSource(type, el, el.getAttribute('id'));\n};\n","import VODescriptor from './VODescriptor';\nimport ShaderSource from './ShaderSource';\n\nexport default class ResourceLibrary {\n  constructor() {\n    this.descriptors = new Map();\n    this.vertexShaders = new Map();\n    this.fragmentShaders = new Map();\n  }\n\n  /**\n   * @param {string} id\n   * @param {Object|VODescriptor} descriptor - See `VODescriptor` constructor for more details\n   * @returns {string} id\n   */\n  createDescriptor(id, descriptor) {\n    const voDescriptor = descriptor instanceof VODescriptor ? descriptor : new VODescriptor(descriptor);\n    this.descriptors.set(id, voDescriptor);\n    return id;\n  }\n\n  /**\n   * @param {string} id\n   * @param {ShaderSource} vertexShader - the *vertex shader*\n   * @returns {string} id\n   */\n  addVertexShader(id, vertexShader) {\n    if (vertexShader.type !== ShaderSource.VERTEX_SHADER) {\n      throw new Error(`addVertexShader: shaderSource has wrong type=${vertexShader.type} (expected type=${ShaderSource.VERTEX_SHADER})`);\n    }\n    this.vertexShaders.set(id, vertexShader);\n    return id;\n  }\n\n  /**\n   * @param {string} id\n   * @param {ShaderSource} fragmentShader - *vertex shader*\n   * @returns {string} id\n   */\n  addFragmentShader(id, fragmentShader) {\n    if (fragmentShader.type !== ShaderSource.FRAGMENT_SHADER) {\n      throw new Error(`addFragmentShader: shaderSource has wrong type=${fragmentShader.type} (expected type=${ShaderSource.FRAGMENT_SHADER})`);\n    }\n    this.fragmentShaders.set(id, fragmentShader);\n    return id;\n  }\n\n  /**\n   * @param {string|function|string[]} source - See `ShaderSource` constructor for more details\n   * @returns {string} id\n   */\n  createVertexShader(source) {\n    const vertexShader = new ShaderSource(ShaderSource.VERTEX_SHADER, source);\n    this.vertexShaders.set(vertexShader.id, vertexShader);\n    return vertexShader.id;\n  }\n\n  /**\n   * @param {string|function|string[]} source - See `ShaderSource` constructor for more details\n   * @returns {string} id\n   */\n  createFragmentShader(source) {\n    const fragmentShader = new ShaderSource(ShaderSource.FRAGMENT_SHADER, source);\n    this.fragmentShaders.set(fragmentShader.id, fragmentShader);\n    return fragmentShader.id;\n  }\n\n  /**\n   * @param {string} id\n   * @returns {VODescriptor}\n   */\n  getDescriptor(id) {\n    return this.descriptors.get(id);\n  }\n\n  /**\n   * @param {string} id\n   * @returns {ShaderSource} - the *vertex shader*\n   */\n  getVertexShader(id) {\n    return this.vertexShaders.get(id);\n  }\n\n  /**\n   * @param {string} id\n   * @returns {ShaderSource} - the *fragment shader*\n   */\n  getFragmentShader(id) {\n    return this.fragmentShaders.get(id);\n  }\n}\n","import ShaderVariable from './ShaderVariable';\n\n/**\n * Shader attribute variable.\n */\nexport default class ShaderAttribVariable extends ShaderVariable {\n  /**\n   * @param {string} name\n   * @param {number|Object} value\n   */\n  constructor(name, value) {\n    super(name, ShaderVariable.ATTRIB, value);\n  }\n}\n","/**\n * Group of shader variables.\n * @private\n */\nexport default class ShaderVariableGroup {\n  /**\n  * @param {Array<ShaderVariable|ShaderVariableAlias>} shaderVars\n   */\n  constructor(shaderVars) {\n    this.shaderVars = shaderVars;\n  }\n\n  pushVar(shaderContext) {\n    this.shaderVars.forEach(shaderContext.pushVar.bind(shaderContext));\n  }\n\n  popVar(shaderContext) {\n    this.shaderVars.forEach(shaderContext.popVar.bind(shaderContext));\n  }\n}\n","import ShaderVariable from './ShaderVariable';\nimport ShaderVariableGroup from './ShaderVariableGroup';\n\n/**\n * @private\n */\nfunction shaderVarMap(shaderContext, type) {\n  switch (type) {\n    case ShaderVariable.UNIFORM:\n      return shaderContext.uniform;\n    case ShaderVariable.ATTRIB:\n      return shaderContext.attrib;\n    case ShaderVariable.TEXTURE_2D:\n      return shaderContext.tex2d;\n    default:\n      return null;\n  }\n}\n\n/**\n * @private\n */\nfunction shaderVarLane(shaderContext, type, name) {\n  const map = shaderVarMap(shaderContext, type);\n  let lane = map.get(name);\n\n  if (!lane) {\n    lane = [];\n    map.set(name, lane);\n  }\n\n  return lane;\n}\n\n/**\n * A ShaderContext keeps named references to all shader _variables_\n * to make them available for shader _programs_.\n * Each named reference is organized as a _stack_ where you can push\n * or pop shader variable _values_.\n */\nexport default class ShaderContext {\n  constructor() {\n    this.uniform = new Map();\n    this.attrib = new Map();\n    this.tex2d = new Map();\n  }\n\n  clear() {\n    this.uniform.clear();\n    this.attrib.clear();\n    this.tex2d.clear();\n  }\n\n  /**\n   * @param {ShaderVariable|ShaderVariableGroup} shaderVariable\n   */\n  pushVar(shaderVariable) {\n    if (shaderVariable instanceof ShaderVariableGroup) {\n      shaderVariable.pushVar(this);\n    } else {\n      const lane = shaderVarLane(this, shaderVariable.type, shaderVariable.name);\n      lane.push(shaderVariable);\n    }\n  }\n\n  /**\n   * Remove current shader variable plus all later set variables from named shader variable stack.\n   * @param {ShaderVariable|ShaderVariableGroup} shaderVariable\n   */\n  popVar(shaderVariable) {\n    if (shaderVariable instanceof ShaderVariableGroup) {\n      shaderVariable.popVar(this);\n    } else {\n      const lane = shaderVarLane(this, shaderVariable.type, shaderVariable.name);\n      const len = lane.length;\n      for (let i = 0; i < len; ++i) {\n        if (lane[i] === shaderVariable) {\n          lane.length = i;\n          return;\n        }\n      }\n    }\n  }\n\n  /**\n   * Return current shader variable by name and type.\n   * @param {ShaderVariable} shaderVariable\n   * @return {ShaderVariable} or `null`\n   */\n  curVar(shaderVariable) {\n    const lane = shaderVarMap(this, shaderVariable.type).get(shaderVariable.name);\n    return lane && lane.length ? lane[lane.length - 1] : null;\n  }\n\n  /**\n   * Return current _uniform_ shader variable by name.\n   * @param {string} name\n   * @return {ShaderUniformVariable} or `null`\n   */\n  curUniform(name) {\n    const lane = this.uniform.get(name);\n    return lane && lane.length ? lane[lane.length - 1] : null;\n  }\n\n  /**\n   * Return current _attribute_ shader variable by name.\n   * @param {string} name\n   * @return {ShaderAttribVariable} or `null`\n   */\n  curAttrib(name) {\n    const lane = this.attrib.get(name);\n    return lane && lane.length ? lane[lane.length - 1] : null;\n  }\n\n  /**\n   * Return current _texture2d_ shader variable by name.\n   * @param {string} name\n   * @return {ShaderTexture2dVariable} or `null`\n   */\n  curTex2d(name) {\n    const lane = this.tex2d.get(name);\n    return lane && lane.length ? lane[lane.length - 1] : null;\n  }\n}\n","import generateUuid from './generateUuid';\n\nexport default class ShaderProgram {\n  /**\n   * @param {ShaderSource} vertexShader\n   * @param {ShaderSource} fragmentShader\n   * @param {string} [id] id\n   */\n  constructor(vertexShader, fragmentShader, id) {\n    /**\n     * @type {string}\n     */\n    this.id = id || generateUuid();\n\n    /**\n     * @type {ShaderSource}\n     */\n    this.vertexShader = vertexShader;\n\n    /**\n     * @type {ShaderSource}\n     */\n    this.fragmentShader = fragmentShader;\n  }\n}\n","import ShaderVariableGroup from './ShaderVariableGroup';\nimport ShaderUniformVariable from './ShaderUniformVariable';\nimport ProjectionUniform from './ProjectionUniform';\nimport Projection from './Projection';\n\n/**\n * Group of shader uniforms\n */\nexport default class ShaderUniformGroup extends ShaderVariableGroup {\n  constructor(uniforms) {\n    super([]);\n    Object.keys(uniforms).forEach((name) => {\n      this.addUniform(name, uniforms[name]);\n    });\n  }\n\n  /**\n   * @param {string} name\n   * @param {number|Object} value\n   * @param {Object} [hints]\n   */\n  addUniform(name, value, hints) {\n    const isProjection = value instanceof Projection;\n    const uniform = isProjection\n      ? new ProjectionUniform(value, name)\n      : new ShaderUniformVariable(name, value, hints);\n\n    this.shaderVars.push(uniform);\n\n    Object.defineProperty(this, `${name}Uniform`, {\n      value: uniform,\n      enumerable: true,\n    });\n\n    if (isProjection) {\n      Object.defineProperty(this, name, {\n        enumerable: true,\n        get: () => uniform.projection,\n      });\n    } else {\n      Object.defineProperty(this, name, {\n        enumerable: true,\n        get: () => uniform.data,\n        set: (data) => {\n          uniform.data = data;\n        },\n      });\n    }\n  }\n}\n","import VOArray from './VOArray';\n\n/**\n * @private\n */\nexport default class ShaderAttribValue {\n  constructor(name, descriptor, bufferSource) {\n    this.name = name;\n    this.descriptor = descriptor;\n    this.bufferSource = bufferSource;\n  }\n\n  set bufferSource(source) {\n    this.bufferSource_ = source;\n    this.ref = source instanceof VOArray ? source.ref : source.voArray.ref;\n  }\n\n  get bufferSource() {\n    return this.bufferSource_;\n  }\n\n  get attrDescriptor() {\n    return this.descriptor.attr[this.name];\n  }\n}\n","/**\n * Shader attribute variable *alias*.\n * @private\n */\nexport default class ShaderVariableAlias {\n  /**\n   * @param {string} name\n   * @param {number|Object} value\n   */\n  constructor(name, shaderVar) {\n    this.name = name;\n    this.shaderVar = shaderVar;\n  }\n\n  get type() {\n    return this.shaderVar.type;\n  }\n\n  get data() {\n    return this.shaderVar.data;\n  }\n\n  get serial() {\n    return this.shaderVar.serial;\n  }\n}\n","import ShaderAttribValue from './ShaderAttribValue';\nimport ShaderAttribVariable from './ShaderAttribVariable';\nimport ShaderVariableAlias from './ShaderVariableAlias';\nimport ShaderVariableGroup from './ShaderVariableGroup';\n\n/**\n * A group of shader variables all referencing the same array buffer.\n * @private\n */\nexport default class ShaderVariableBufferGroup extends ShaderVariableGroup {\n  /**\n   * @param {VOPool|VOArray} bufferSource\n   * @param {VODescriptor} descriptor, only needed if `bufferSource` is an `VOArray`\n   */\n  constructor(bufferSource, voDescriptor) {\n    super([]);\n    const descriptor = voDescriptor || bufferSource.descriptor;\n    let firstVar;\n    Object.keys(descriptor.attr).forEach((attrName) => {\n      if (!firstVar) {\n        firstVar = new ShaderAttribVariable(\n          attrName,\n          new ShaderAttribValue(\n            attrName,\n            descriptor,\n            bufferSource,\n          ),\n        );\n        this.shaderVars.push(firstVar);\n      } else {\n        this.shaderVars.push(new ShaderVariableAlias(attrName, firstVar));\n      }\n    });\n  }\n\n  get bufferSource() {\n    return this.shaderVars[0].data.bufferSource;\n  }\n\n  get serial() {\n    return this.shaderVars[0].serial;\n  }\n\n  touch() {\n    return this.shaderVars[0].touch();\n  }\n}\n","\n/**\n * Pre-allocate a bunch of vertex objects.\n * @returns {number} number of allocated vertex objects\n * @private\n */\nexport default (voPool, maxAllocSize = 0) => {\n  const max = voPool.capacity - voPool.usedCount - voPool.allocatedCount;\n  const count = (maxAllocSize > 0 && maxAllocSize < max ? maxAllocSize : max);\n  const len = voPool.allocatedCount + count;\n\n  for (let i = voPool.allocatedCount; i < len; i++) {\n    const voArray = voPool.voArray.subarray(i);\n    const vertexObject = voPool.descriptor.createVO(voArray);\n\n    vertexObject.free = voPool.free.bind(voPool, vertexObject);\n\n    voPool.availableVOs.push(vertexObject);\n  }\n\n  return count;\n};\n","/* eslint no-param-reassign: 0 */\nimport { readOption, maxOf } from '@picimo/utils'; // eslint-disable-line\n\nimport generateUuid from '../generateUuid';\n\nimport createVOs from './createVOs';\n\nexport default class VOPool {\n  /**\n   * @param {VODescriptor} descriptor - vertex object descriptor\n   * @param {Object} [options] - Advanced options\n   * @param {number} [options.capacity] - Maximum number of *vertex objects*\n   * @param {VOArray} [options.voArray] - Vertex object array\n   * @param {VertexObject} [options.voZero] - *vertex object* prototype\n   * @param {VertexObject} [options.voNew] - *vertex object* prototype\n   * @param {number} [options.maxAllocVOSize] - never allocate more than `maxAllocVOSize` *vertex objects* at once\n   * @param {string} [options.usage='dynamic'] - buffer `usage` hint, choose between `dynamic` or `static`\n   * @param {string} [options.doubleBuffer] - buffer `doubleBuffer` hint, set to `true` (which is the default if `usage` equals to `dynamic`) or `false`.\n   * @param {string} [options.autotouch] - auto touch vertex buffers hint, set to `true` (which is the default if `usage` equals to `dynamic`) or `false`.\n   */\n\n  constructor(descriptor, options) {\n    this.id = generateUuid();\n    this.descriptor = descriptor;\n    this.capacity = readOption(options, 'capacity', this.descriptor.maxIndexedVOPoolSize);\n    this.maxAllocVOSize = readOption(options, 'maxAllocVOSize', 0);\n    this.voZero = readOption(options, 'voZero', () => descriptor.createVO());\n    this.voNew = readOption(options, 'voNew', () => descriptor.createVO());\n    this.usage = readOption(options, 'usage', 'dynamic');\n    this.voArray = readOption(options, 'voArray', () => descriptor.createVOArray(this.capacity, {\n      usage: this.usage,\n      autotouch: readOption(options, 'autotouch', this.usage === 'dynamic'),\n      doubleBuffer: readOption(options, 'doubleBuffer', this.usage === 'dynamic'),\n      // TODO tripleBuffer / read and write to different buffers for dynamic...\n    }));\n\n    this.availableVOs = [];\n    this.usedVOs = [];\n\n    createVOs(this, this.maxAllocVOSize);\n  }\n\n  /**\n   * Number of in use *vertex objects*.\n   * @type {number}\n   */\n\n  get usedCount() {\n    return this.usedVOs.length;\n  }\n\n  /**\n   * Number of free and unused *vertex objects*.\n   * @type {number}\n   */\n\n  get availableCount() {\n    return this.capacity - this.usedVOs.length;\n  }\n\n  /**\n   * Number of **allocated** *vertex objects*.\n   * @type {number}\n   */\n\n  get allocatedCount() {\n    return this.availableVOs.length + this.usedVOs.length;\n  }\n\n  /**\n   * Allocate a *vertex object*\n   * @return {VertexObject}\n   */\n\n  alloc() {\n    let vo = this.availableVOs.shift();\n\n    if (vo === undefined) {\n      if ((this.capacity - this.allocatedCount) > 0) {\n        createVOs(this, this.maxAllocVOSize);\n        vo = this.availableVOs.shift();\n      } else {\n        return;\n      }\n    }\n\n    this.usedVOs.push(vo);\n    vo.voArray.copy(this.voNew.voArray);\n\n    return vo;\n  }\n\n  /**\n   * Allocate multiple *vertex objects*\n   * @return {VertexObject[]}\n   */\n\n  multiAlloc(size, targetArray = []) {\n    if ((this.allocatedCount - this.usedCount) < size) {\n      createVOs(this, maxOf(this.maxAllocVOSize, size - this.allocatedCount - this.usedCount));\n    }\n    for (let i = 0; i < size; ++i) {\n      const vo = this.availableVOs.shift();\n      if (vo !== undefined) {\n        this.usedVOs.push(vo);\n        vo.voArray.copy(this.voNew.voArray);\n        targetArray.push(vo);\n      } else {\n        break;\n      }\n    }\n    return targetArray;\n  }\n\n  /**\n   * @param {VertexObject|VertexObject[]} vo - vertex object(s)\n   */\n\n  free(vo) {\n    if (Array.isArray(vo)) {\n      vo.forEach(this.free.bind(this));\n      return;\n    }\n\n    const idx = this.usedVOs.indexOf(vo);\n\n    if (idx === -1) return;\n\n    const lastIdx = this.usedVOs.length - 1;\n\n    if (idx !== lastIdx) {\n      const last = this.usedVOs[lastIdx];\n      vo.voArray.copy(last.voArray);\n\n      const tmp = last.voArray;\n      last.voArray = vo.voArray;\n      vo.voArray = tmp;\n\n      this.usedVOs.splice(idx, 1, last);\n    }\n\n    this.usedVOs.pop();\n    this.availableVOs.unshift(vo);\n\n    vo.voArray.copy(this.voZero.voArray);\n  }\n}\n","import { pick } from '@picimo/utils'; // eslint-disable-line\n\nimport ShaderProgram from './ShaderProgram';\nimport ShaderVariableBufferGroup from './ShaderVariableBufferGroup';\nimport VOPool from './VOPool';\n\n/** @private */\nconst pickVOPoolOpts = pick([\n  'autotouch',\n  'capacity',\n  'doubleBuffer',\n  'maxAllocVOSize',\n  'usage',\n  'voArray',\n]);\n\n/** @private */\nconst createSpriteSizeHook = (setSize = 'size') => {\n  switch (typeof setSize) {\n    case 'string':\n      return (sprite, w, h, descriptor) => descriptor.attr[setSize].setValue(sprite, [w, h]);\n    case 'function':\n      return setSize;\n\n    case 'object':\n    case 'boolean':\n      if (!setSize) {\n        return null;\n      }\n    default: // eslint-disable-line\n      throw new Error(`SpriteGroup: invalid sprite size setter! (is ${typeof setSize} but should be a function, string, null or false)`);\n  }\n};\n\n/**\n * @param {VODescriptor} descriptor - The `VODescriptor` (*vertex object description*)\n * @param {Object} options - Options\n * @param {number} [options.capacity] - Maximum number of *sprites*\n * @param {IndexedPrimitive|ElementIndexArray|function} primitive - The *primitive factory function* is a function that takes one argument (capacity) and returns an IndexedPrimitive instance\n * @param {VOArray} [options.voArray] - The internal *vertex object array*\n * @param {Object|function} [options.voZero] - *vertex object* prototype\n * @param {Object|function} [options.voNew] - *vertex object* prototype\n * @param {function|string} [options.setSize='size'] - A function that takes three arguments (sprite, width, height) and sets the size of sprite (called by `.createSprite(w, h)`). Or you can specify the *name* of the size attribute (should be a 2d vector unform).\n * @param {number} [options.maxAllocVOSize] - Never allocate more than `maxAllocVOSize` *sprites* at once\n * @param {string} [options.usage='dynamic'] - Buffer usage hint, choose between `dynamic` or `static`\n * @param {ShaderProgram} [options.shaderProgram] - The `ShaderProgram`. As alternative you can use the `vertexShader` option together with `fragmentShader`\n * @param {string|ShaderSource} [options.vertexShader] - The *vertex shader*\n * @param {string|ShaderSource} [options.fragmentShader] - The *fragment shader*\n * @param {Object} [options.textures] - The *shader variable name* to *texture* mapping\n * @param {boolean} [options.doubleBuffer] - buffer `doubleBuffer` hint, set to `true` (which is the default if `usage` equals to `dynamic`) or `false`\n * @param {boolean} [options.autotouch] - auto touch vertex buffers hint, set to `true` (which is the default if `usage` equals to `dynamic`) or `false`.\n * @param {SpriteGroup|Object} [options.base] - The *base sprite group instance* or the *base sprite group options*\n */\nexport default class SpriteGroup {\n  constructor(descriptor, options = {}) {\n    this.descriptor = descriptor;\n\n    if (options.base instanceof SpriteGroup) {\n      this.base = options.base;\n    } else if (typeof options.base === 'object') {\n      this.base = new SpriteGroup(descriptor.base, options.base);\n    }\n\n    let {\n      voNew,\n      voZero,\n    } = options;\n    if (voNew) {\n      voNew = descriptor.createVO(null, voNew);\n    }\n    if (voZero) {\n      voZero = descriptor.createVO(null, voZero);\n    }\n\n    this.spriteHook = {\n      setSize: createSpriteSizeHook(options.setSize),\n    };\n\n    this.voPool = new VOPool(descriptor, Object.assign({\n      maxAllocVOSize: 1000,\n    }, pickVOPoolOpts(options), {\n      voNew,\n      voZero,\n    }));\n\n    this.voPoolShaderAttribs = new ShaderVariableBufferGroup(this.voPool);\n\n    const { primitive } = options;\n    if (typeof primitive === 'function') {\n      this.primitive = primitive(this.capacity);\n    } else {\n      this.primitive = primitive;\n    }\n\n    this.shaderProgram = options.shaderProgram;\n    if (!this.shaderProgram && options.vertexShader && options.fragmentShader) {\n      this.shaderProgram = new ShaderProgram(options.vertexShader, options.fragmentShader);\n    }\n  }\n\n  get capacity() {\n    return this.voPool.capacity;\n  }\n\n  get usedCount() {\n    return this.voPool.usedCount;\n  }\n\n  get availableCount() {\n    return this.voPool.availableCount;\n  }\n\n  /**\n   * Create a sprite.\n   * @param {number} [width]\n   * @param {number} [height=width]\n   * @returns {Object} sprite\n   */\n  createSprite(width, height) {\n    const sprite = this.voPool.alloc();\n    const { setSize } = this.spriteHook;\n    if (setSize && (width !== undefined || height !== undefined)) {\n      setSize(sprite, width, height !== undefined ? height : width, this.descriptor);\n    }\n    return sprite;\n  }\n\n  /**\n   * Create multiple sprites at once.\n   * @param {number} count - number of sprites to create\n   * @param {number} [width]\n   * @param {number} [height=width]\n   * @returns {Array<Object>} sprites\n   */\n  createSprites(count, width, height) {\n    const sprites = this.voPool.multiAlloc(count);\n    const { setSize } = this.spriteHook;\n    if (setSize && (width !== undefined || height !== undefined)) {\n      const h = height !== undefined ? height : width;\n      sprites.forEach(sprite => setSize(sprite, width, h, this.descriptor));\n    }\n    return sprites;\n  }\n\n  /**\n   * inform the internally used vertex buffers that content has changed\n   * and should be uploaded to gpu before next usage.\n   * you don't need to call this if you choosed `dynamic` as *usage* option.\n   */\n  touchVertexBuffers() {\n    this.voPool.voArray.ref.touch();\n  }\n}\n","/* eslint no-param-reassign: 0 */\n\nexport default class StackedContext {\n  constructor() {\n    this.context = new Map();\n  }\n\n  push(name, value) {\n    const stack = this.context.get(name);\n    if (stack) {\n      stack.push(value);\n      return stack.length - 1;\n    }\n    this.context.set(name, [value]);\n    return 0;\n  }\n\n  pop(name, idx) {\n    const stack = this.context.get(name);\n    if (stack) {\n      if (idx === undefined) {\n        return stack.pop();\n      }\n      return stack.splice(idx, stack.length - idx);\n    }\n  }\n\n  get(name) {\n    const stack = this.context.get(name);\n    if (stack) {\n      const len = stack.length;\n      if (len > 0) {\n        return stack[len - 1];\n      }\n    }\n  }\n\n  clear() {\n    this.context.forEach((value) => {\n      value.length = 0;\n    });\n  }\n}\n\n","/* eslint-env browser */\n/* eslint no-underscore-dangle: 0 */\n/* eslint no-nested-ternary: 0 */\nimport { readOption } from '@picimo/utils'; // eslint-disable-line\n\nimport DataRef from './DataRef';\nimport PowerOf2Image from './PowerOf2Image';\n\n/**\n * Represents texture coordinates and holds a reference to an `<img>` or `<canvas>` element.\n * Textures can form hierachical structures:\n * The *root* texture contains always the image reference, all other *sub* textures contain\n * references to their parent (and the root).\n *\n * @class Texture\n *\n * @example\n * const canvas = document.createElement(\"canvas\")\n * const texture = new Texture(canvas)\n * texture.width    // => 300 <- default size of <canvas> element\n * texture.height   // => 150\n *\n * let subTex = new Texture(texture, 30, 15, 100, 100)\n * subTex.width    // => 100\n *\n * Texture.load('test/assets/bird-chicken-penguin.png').then(tex => {\n *   tex.width    // => 640\n *   tex.height   // => 480\n * })\n */\n\nexport default class Texture {\n  /**\n   * @param {Texture|PowerOf2Image|HTMLImageElement|HTMLCanvasElement} source - image elements must be *completed* (loaded)\n   * @param {number} [width]\n   * @param {number} [height]\n   * @param {number} [x=0]\n   * @param {number} [y=0]\n   * @param {Object} [hints] texture hints\n   * @param {boolean} [hints.flipY=false]\n   * @param {boolean} [hints.repeatable=false]\n   * @param {boolean} [hints.premultiplyAlpha=true]\n   * @param {boolean} [hints.nearest=true]\n   */\n  constructor(source, width, height, x = 0, y = 0, hints = undefined) {\n    let width_ = width;\n    let height_ = height;\n\n    if (source instanceof Texture) {\n      /**\n       * @type {Texture}\n       */\n      this.parent = source;\n      /**\n       * @type {PowerOf2Image|HTMLImageElement|HTMLCanvasElement}\n       */\n      this.image = null;\n    } else if (typeof source === 'object' && 'width' in source && 'height' in source) {\n      this.image = source;\n      this.parent = null;\n\n      this._ref = new DataRef('Texture', this, {\n        flipY: readOption(hints, 'flipY', false),\n        repeatable: readOption(hints, 'repeatable', false),\n        premultiplyAlpha: readOption(hints, 'premultiplyAlpha', true),\n        nearest: readOption(hints, 'nearest', true),\n      });\n\n      if ('origWidth' in source && 'origHeight' in source) {\n        width_ = source.origWidth;\n        height_ = source.origHeight;\n      }\n    } else {\n      throw new Error('new Texture() panic: unexpected source argument!');\n    }\n\n    this._width = width_;\n    this._height = height_;\n\n    /**\n     * @type {number}\n     */\n    this.x = x;\n    /**\n     * @type {number}\n     */\n    this.y = y;\n  }\n\n  /**\n   * @type {Texture}\n   */\n  get root() {\n    return (this.parent && this.parent.root) || this;\n  }\n\n  /**\n   * @type {HTMLImageElement|HTMLCanvasElement}\n   */\n  get imgEl() {\n    const { root } = this;\n    return root.image.imgEl || root.image;\n  }\n\n  /**\n   * @type {ResourceRef}\n   */\n  get ref() {\n    return this._ref || this.root.ref;\n  }\n\n  /**\n   * @type {number}\n   */\n  get width() {\n    return (typeof this._width === 'number'\n      ? this._width\n      : (this.image\n        ? this.image.width\n        : (this.parent\n          ? this.root.width\n          : 0\n        )\n      )\n    );\n  }\n\n  set width(w) {\n    this._width = w;\n  }\n\n  /**\n   * @type {number}\n   */\n  get height() {\n    return (typeof this._height === 'number'\n      ? this._height\n      : (this.image\n        ? this.image.height\n        : (this.parent\n          ? this.root.height\n          : 0\n        )\n      )\n    );\n  }\n\n  set height(h) {\n    this._height = h;\n  }\n\n  /**\n   * @type {number}\n   */\n  get minS() {\n    let { x } = this;\n    let texture = this;\n\n    while ((texture = texture.parent) != null) {  // eslint-disable-line\n      x += texture.x;\n    }\n\n    return x / this.root.image.width;\n  }\n\n  /**\n   * @type {number}\n   */\n  get minT() {\n    let { y } = this;\n    let texture = this;\n\n    while ((texture = texture.parent) != null) {  // eslint-disable-line\n      y += texture.y;\n    }\n\n    return y / this.root.image.height;\n  }\n\n  /**\n   * @type {number}\n   */\n  get maxS() {\n    let x = this.x + this.width;\n    let texture = this;\n\n    while ((texture = texture.parent) != null) {  // eslint-disable-line\n      x += texture.x;\n    }\n\n    return x / this.root.image.width;\n  }\n\n  /**\n   * @type {number}\n   */\n  get maxT() {\n    let y = this.y + this.height;\n    let texture = this;\n\n    while ((texture = texture.parent) != null) {  // eslint-disable-line\n      y += texture.y;\n    }\n\n    return y / this.root.image.height;\n  }\n\n  /**\n    * Loads an image from url and returns a texture.\n    * @param {string} url\n    * @param {object} [textureHints]\n    * @returns {Promise<Texture>}\n    */\n  static async load(url, textureHints) {\n    const absoluteUrl = new URL(url, window.location.href).href;\n    const p2img = await new PowerOf2Image(absoluteUrl).onLoaded;\n    return new Texture(p2img, undefined, undefined, 0, 0, textureHints);\n  }\n}\n","/* eslint-env browser */\n\n/**\n * @private\n */\nexport default class TextureAtlasJsonDef {\n  constructor(jsonDef) {\n    this.frameNames = Object.keys(jsonDef.frames);\n    this.frames = jsonDef.frames;\n    this.meta = jsonDef.meta;\n    this.imageUrl = jsonDef.meta.image;\n  }\n\n  static async load(url, fetchOptions) {\n    const response = await window.fetch(url, fetchOptions);\n    const json = await response.json();\n    return new TextureAtlasJsonDef(json);\n  }\n}\n","/* eslint-env browser */\nimport {\n  readOption,\n  sample,\n} from '@picimo/utils'; // eslint-disable-line\n\nimport Texture from './Texture';\nimport TextureAtlasJsonDef from './TextureAtlasJsonDef';\nimport PowerOf2Image from './PowerOf2Image';\n\n/**\n  * @example\n  * TextureAtlas.load('nobinger.json').then(atlas => {\n  *   const blau = atlas.frame('nobinger-blau.png')\n  *   blau.width   # => 55\n  *   blau.height  # => 61\n  * })\n  */\nexport default class TextureAtlas {\n  /**\n   * @param {Texture} rootTexture\n   * @param {TextureAtlasSpec} [jsonDef=null]\n   */\n  constructor(rootTexture, jsonDef = null) {\n    /**\n     * @type {Texture}\n     */\n    this.rootTexture = rootTexture;\n    /**\n     * @type {TextureAtlasSpec}\n     */\n    this.jsonDef = jsonDef;\n    /**\n     * @type {Map<string,Texture>}\n     */\n    this.frames = new Map();\n  }\n\n  /**\n   * @param {string} name\n   * @param {number} width\n   * @param {number} height\n   * @param {number} x\n   * @param {number} y\n   */\n  addFrame(name, width, height, x, y) {\n    this.frames.set(name, new Texture(this.rootTexture, width, height, x, y));\n  }\n\n  /**\n   * @param {string} alias - new frame name\n   * @param {string} frame - original frame name\n   */\n  addFrameAlias(alias, frame) {\n    if (this.frames.has(frame)) {\n      this.frames.set(alias, this.frames.get(frame));\n    }\n  }\n\n  /**\n   * @param {string} name\n   * @returns {Texture}\n   */\n  frame(name) {\n    return this.frames.get(name);\n  }\n\n  /**\n   * @returns {Texture}\n   */\n  randomFrame() {\n    return sample(Array.from(this.frames.values()));\n  }\n\n  /**\n   * @returns {string}\n   */\n  randomFrameName() {\n    return sample(this.frameNames());\n  }\n\n  /**\n   * @param {string} [match] - optionally regular expression to filter frame names\n   * @returns {Array<string>}\n   */\n  frameNames(match) {\n    const frames = Array.from(this.frames.keys());\n    if (match) {\n      const regex = new RegExp(match);\n      return frames.filter(name => regex.test(name));\n    }\n    return frames;\n  }\n\n  /**\n   * Loads a TextureAtlas.\n   * @param {string} url - should point to the *texture atlas json def*\n   * @param {object} [options] - options\n   * @param {object} [optons.fetchOptions] - options for the `fetch()` call\n   * @param {string|function|PowerOf2Image|HTMLImageElement|HTMLCanvasElement} [options.image] - by default the image will be loaded from url specified by `meta.image` property from the *texture atlas json def*\n   * @param {object} [options.textureHints] - texture hints\n   * @returns {Promise<TextureAtlas>}\n   */\n  static async load(url, options) {\n    const atlasUrl = new URL(url, window.location.href).href;\n    const jsonDef = await TextureAtlasJsonDef.load(atlasUrl, readOption(options, 'fetchOptions'));\n    const image = await new PowerOf2Image(readOption(options, 'image', () => new URL(jsonDef.imageUrl, atlasUrl).href, jsonDef)).onLoaded;\n\n    const rootTexture = new Texture(image, undefined, undefined, 0, 0, readOption(options, 'textureHints'));\n    const atlas = new TextureAtlas(rootTexture, jsonDef);\n\n    const { frameNames } = jsonDef;\n    const len = frameNames.length;\n    for (let i = 0; i < len; i++) {\n      const name = frameNames[i];\n      const { frame } = jsonDef.frames[name];\n      atlas.addFrame(name, frame.w, frame.h, frame.x, frame.y);\n    }\n\n    return atlas;\n  }\n}\n","import TextureAtlas from './TextureAtlas';\n\nexport default class TextureHandle {\n  constructor(textureOrAtlas) {\n    this.texture = null;\n    this.atlas = null;\n\n    this.onReady = Promise.resolve(textureOrAtlas).then(async (toa) => {\n      if (toa instanceof TextureAtlas) {\n        this.atlas = toa;\n        this.texture = toa.rootTexture;\n      } else {\n        this.texture = toa;\n      }\n      return toa;\n    });\n  }\n}\n","import ShaderVariable from './ShaderVariable';\n\n/**\n * Shader texture 2d variable.\n * @private\n */\nexport default class ShaderTexture2dVariable extends ShaderVariable {\n  /**\n   * @param {string} name\n   * @param {number|Object} value\n   */\n  constructor(name, value) {\n    super(name, ShaderVariable.TEXTURE_2D, value);\n\n    /**\n     * @type {Texture}\n     */\n    this.texture = null;\n  }\n}\n","import Texture from './Texture';\nimport TextureHandle from './TextureHandle';\nimport TextureAtlas from './TextureAtlas';\nimport ShaderTexture2dVariable from './ShaderTexture2dVariable';\n\nexport default class TextureLibrary {\n  constructor() {\n    this.handles = new Map();\n    this.shaderVars = new Map();\n  }\n\n  loadTexture(id, url = id, textureHints = undefined) {\n    const th = new TextureHandle(Texture.load(url, textureHints));\n    this.handles.set(id, th);\n    return th.onReady;\n  }\n\n  loadTextureAtlas(id, url = id, textureAtlasOptions = undefined) {\n    const th = new TextureHandle(TextureAtlas.load(url, textureAtlasOptions));\n    this.handles.set(id, th);\n    return th.onReady;\n  }\n\n  getTexture(id) {\n    const th = this.handles.get(id);\n    return th && th.texture;\n  }\n\n  getTextureAtlas(id) {\n    const th = this.handles.get(id);\n    return th && th.atlas;\n  }\n\n  whenLoaded(textureId, shaderVarKey, onLoaded) {\n    const texture = this.getTexture(textureId);\n    if (!texture) return;\n\n    let shaderVar = this.shaderVars.get(shaderVarKey);\n    if (!shaderVar) {\n      shaderVar = new ShaderTexture2dVariable(shaderVarKey);\n      this.shaderVars.set(shaderVarKey, shaderVar);\n    }\n\n    shaderVar.texture = texture;\n    onLoaded(shaderVar);\n  }\n}\n\n","import ShaderVariableGroup from './ShaderVariableGroup';\nimport ShaderTexture2dVariable from './ShaderTexture2dVariable';\n\n/**\n * @private\n */\nexport default class ShaderTextureGroup {\n  constructor(textureLibrary, shaderTextureMap) {\n    this.textureLibrary = textureLibrary;\n    this.waitFor = Object.keys(shaderTextureMap).map(shaderVarKey => ({\n      shaderVarKey,\n      textureId: shaderTextureMap[shaderVarKey],\n      isLoaded: false,\n    }));\n    this.shaderVarGroup = new ShaderVariableGroup([]);\n    this.shaderVarStore = new Map();\n  }\n\n  get isLoaded() {\n    return this.waitFor.length === 0 && this.shaderVarGroup.shaderVars.length > 0;\n  }\n\n  whenLoaded(onLoaded) {\n    if (!this.isLoaded) {\n      this.waitFor.forEach((waitFor) => {\n        if (!waitFor.isLoaded) {\n          const texture = this.textureLibrary.getTexture(waitFor.textureId);\n          if (!texture) return;\n\n          const shaderVar = new ShaderTexture2dVariable(waitFor.shaderVarKey);\n          shaderVar.texture = texture;\n          this.shaderVarGroup.shaderVars.push(shaderVar);\n\n          waitFor.isLoaded = true; // eslint-disable-line\n        }\n      });\n\n      this.waitFor = this.waitFor.filter(waitFor => waitFor.isLoaded === false);\n\n      if (this.isLoaded) {\n        onLoaded(this.shaderVarGroup);\n      }\n    } else {\n      onLoaded(this.shaderVarGroup);\n    }\n  }\n}\n","import { readOption } from '@picimo/utils'; // eslint-disable-line\n\nimport ShaderTextureGroup from './ShaderTextureGroup';\nimport SpriteGroup from './SpriteGroup';\nimport TextureLibrary from './TextureLibrary';\n\nexport default class TexturedSpriteGroup extends SpriteGroup {\n  constructor(descriptor, options = {}) {\n    super(descriptor, options);\n\n    this.textureLibrary = readOption(options, 'textureLibrary', () => new TextureLibrary());\n\n    const { setTexCoordsByTexture } = options;\n    if (setTexCoordsByTexture === null || setTexCoordsByTexture === false) {\n      this.spriteHook.setTexCoordsByTexture = null;\n    } else {\n      this.spriteHook.setTexCoordsByTexture = setTexCoordsByTexture || ((sprite, texture) => sprite.setTexCoordsByTexture(texture));\n    }\n\n    this.textures = Object.assign({}, options.textures);\n    this.shaderTextureGroup = null;\n  }\n\n  setTexture(sampler, textureId) {\n    if (this.textures[sampler] !== textureId) {\n      this.textures[sampler] = textureId;\n      this.shaderTextureGroup = null;\n    }\n  }\n\n  loadTextureAtlas(sampler, url, textureAtlasOptions) {\n    this.setTexture(sampler, url);\n    return this.textureLibrary.loadTextureAtlas(url, url, textureAtlasOptions);\n  }\n\n  getTexture(sampler) {\n    return this.textureLibrary.getTexture(this.textures[sampler]);\n  }\n\n  getTextureAtlas(sampler) {\n    return this.textureLibrary.getTextureAtlas(this.textures[sampler]);\n  }\n\n  whenTexturesLoaded(callback) {\n    if (!this.shaderTextureGroup) {\n      this.shaderTextureGroup = new ShaderTextureGroup(this.textureLibrary, this.textures);\n    }\n\n    this.shaderTextureGroup.whenLoaded(callback);\n  }\n\n  /**\n   * @param {Texture} [texture]\n   * @param {number} [width]\n   * @param {number} [height=width]\n   */\n  createSprite(texture, width, height) {\n    let w;\n    let h;\n    if (texture && width === undefined) {\n      w = texture.width;\n      h = texture.height;\n    } else {\n      w = width;\n      h = height;\n    }\n\n    const sprite = super.createSprite(w, h);\n\n    const { setTexCoordsByTexture } = this.spriteHook;\n    if (setTexCoordsByTexture && texture) {\n      setTexCoordsByTexture(sprite, texture);\n    }\n\n    return sprite;\n  }\n}\n","import AABB2 from './AABB2';\n\nexport default class Viewport extends AABB2 {\n  /**\n   * @param {number} x - x\n   * @param {number} y - y\n   * @param {number} width - width\n   * @param {number} height - height\n   */\n  constructor(x, y, width, height) {\n    super(x, (x + width), y, (y + height));\n  }\n\n  get x() {\n    return this.minX;\n  }\n\n  /**\n   * @param {number} x\n   */\n  set x(x) {\n    const w = this.width;\n\n    this.minX = x;\n    this.maxX = x + w;\n  }\n\n  get y() {\n    return this.minY;\n  }\n\n  /**\n   * @param {number} y\n   */\n  set y(y) {\n    const h = this.height;\n\n    this.minY = y;\n    this.maxY = y + h;\n  }\n}\n","// https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/blendFunc\n\n/** @private */\nconst toString = ({ enable, sfactor = '', dfactor = '' }) => JSON.stringify([enable, sfactor, dfactor]);\n\n/** @private */\nlet blendModeCache = null;\n\nexport default class BlendMode {\n  static make(name, options) {\n    if (blendModeCache === null) {\n      blendModeCache = new Map();\n\n      BlendMode.make('off', { enable: false });\n      BlendMode.make('additive', { enable: true, sfactor: 'SRC_ALPHA', dfactor: 'ONE' });\n      BlendMode.make('orderDependent', { enable: true, sfactor: 'SRC_ALPHA', dfactor: 'ONE_MINUS_SRC_ALPHA' });\n    }\n\n    let blendMode = blendModeCache.get(name);\n    if (blendMode) return blendMode;\n\n    if (!options) return;\n\n    const key = toString(options);\n    blendMode = blendModeCache.get(key);\n    if (blendMode) {\n      blendModeCache.set(name, blendMode);\n      return blendMode;\n    }\n\n    blendMode = new BlendMode(options);\n    blendModeCache.set(key, blendMode);\n    blendModeCache.set(name, blendMode);\n    return blendMode;\n  }\n\n  constructor({ enable, sfactor = null, dfactor = null }) {\n    this.enable = enable;\n    this.sfactor = sfactor;\n    this.dfactor = dfactor;\n  }\n\n  set sfactor(value) {\n    this._sfactor = typeof value === 'string' ? value : undefined;\n  }\n\n  get sfactor() {\n    return this._sfactor;\n  }\n\n  set dfactor(value) {\n    this._dfactor = typeof value === 'string' ? value : undefined;\n  }\n\n  get dfactor() {\n    return this._dfactor;\n  }\n\n  isEqual(other) {\n    return other && this.enable === other.enable && this._sfactor === other.sfactor && this._dfactor === other.dfactor;\n  }\n}\n","/* eslint no-param-reassign: 0 */\n\nexport default class TextureUnitManager {\n  /**\n   * @param {WebGlContext} glx\n   */\n  constructor(glx) {\n    this.glx = glx;\n\n    /**\n     * texUnit -> WebGlTexture\n     * @type {Array<number>}\n     */\n    this.boundTextures = new Array(glx.MAX_TEXTURE_IMAGE_UNITS);\n\n    for (let i = 0; i < this.boundTextures.length; ++i) {\n      this.boundTextures[i] = null;\n    }\n\n    this.lastBoundTexUnit = 0;\n  }\n\n  /**\n   * Bind a *texture* to a *texture unit*.\n   * @param {WebGlTexture} glTexture\n   * @return {number} texture unit\n   */\n  bindWebGlTexture(glTexture) {\n    let texUnit = this.boundTextures.indexOf(glTexture);\n\n    if (texUnit < 0) {\n      // texture is unbound\n      // find a free texture unit ..\n      for (let i = 0; i < this.boundTextures.length; ++i) {\n        if (!this.boundTextures[i]) {\n          texUnit = i;\n          this.boundTextures[i] = glTexture;\n          break;\n        }\n      }\n\n      if (texUnit < 0) {\n        // no free unit found\n        // so we choose the lru texture unit\n\n        texUnit = this.lastBoundTexUnit;\n\n        const prevGlTex = this.boundTextures[texUnit];\n        if (prevGlTex) prevGlTex.texUnit = -1;\n\n        this.lastBoundTexUnit = (this.lastBoundTexUnit + 1) % this.glx.MAX_TEXTURE_IMAGE_UNITS;\n      }\n\n      this.glx.activeTexture(texUnit);\n      this.glx.bindTexture2d(glTexture.glTexObj);\n\n      glTexture.texUnit = texUnit;\n    }\n\n    return texUnit;\n  }\n}\n","/* eslint no-param-reassign: 0 */\nimport TextureUnitManager from './TextureUnitManager';\n\n// https://developer.mozilla.org/de/docs/Web/API/WebGL_API/WebGL_best_practices\n// https://kripken.github.io/emscripten-site/docs/optimizing/Optimizing-WebGL.html\n\n/**\n * @private\n */\nconst readGlState = (glx) => {\n  const { gl } = glx;\n  // https://developer.mozilla.org/de/docs/Web/API/WebGLRenderingContext/getParameter\n\n  glx.DEPTH_BITS = gl.getParameter(gl.DEPTH_BITS);\n  glx.STENCIL_BITS = gl.getParameter(gl.STENCIL_BITS);\n  glx.MAX_TEXTURE_IMAGE_UNITS = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n\n  glx.boundBuffers.set(gl.ARRAY_BUFFER, gl.getParameter(gl.ARRAY_BUFFER_BINDING));\n  glx.boundBuffers.set(gl.ELEMENT_ARRAY_BUFFER, gl.getParameter(gl.ELEMENT_ARRAY_BUFFER_BINDING));\n\n  glx.currentProgram = gl.getParameter(gl.CURRENT_PROGRAM);\n  glx.blendEnabled = gl.getParameter(gl.BLEND);\n};\n\nclass WebGlContext {\n  constructor(gl) {\n    this.gl = gl;\n    this.contextAttributes = gl.getContextAttributes();\n\n    this.currentBlendMode = null;\n\n    this.boundBuffers = new Map();\n    readGlState(this, gl);\n\n    this.boundTextures = new Array(this.MAX_TEXTURE_IMAGE_UNITS);\n    for (let i = 0; i < this.boundTextures.length; i++) {\n      this.boundTextures[i] = { TEXTURE_2D: null };\n    }\n\n    this.textureUnitManager = new TextureUnitManager(this);\n\n    this.enabledVertexAttribLocations = [];\n\n    this.activeTexture(0); // enable first texture unit by default\n  }\n\n  bindBuffer(target, buffer) {\n    if (this.boundBuffers.get(target) !== buffer) {\n      this.gl.bindBuffer(target, buffer);\n      this.boundBuffers.set(target, buffer);\n    }\n  }\n\n  /**\n   * @param {number} texUnit\n   */\n  activeTexture(texUnit) {\n    const { gl } = this;\n    const tex = gl.TEXTURE0 + texUnit;\n\n    if (this.activeTexUnit !== tex) {\n      this.activeTexUnit = tex;\n      gl.activeTexture(this.activeTexUnit);\n    }\n  }\n\n  /**\n   * @param {number} glTextureId\n   */\n  bindTexture2d(glTextureId) {\n    const { gl } = this;\n    const bound = this.boundTextures[this.activeTexUnit - gl.TEXTURE0];\n\n    if (bound.TEXTURE_2D !== glTextureId) {\n      bound.TEXTURE_2D = glTextureId;\n      gl.bindTexture(gl.TEXTURE_2D, glTextureId);\n    }\n  }\n\n  /**\n   * @return {boolean}\n   */\n  useProgram(glProgram) {\n    if (this.currentProgram !== glProgram) {\n      this.gl.useProgram(glProgram);\n      this.currentProgram = glProgram;\n      return true;\n    }\n    return false;\n  }\n\n  enableVertexAttribArrays(enableLocations) {\n    const { gl } = this;\n\n    this.enabledVertexAttribLocations\n      .filter(location => enableLocations.indexOf(location) === -1)\n      .forEach((location) => {\n        gl.disableVertexAttribArray(location);\n        this.enabledVertexAttribLocations.splice(enableLocations.indexOf(location), 1);\n      });\n\n    enableLocations.forEach((location) => {\n      const idx = this.enabledVertexAttribLocations.indexOf(location);\n      if (idx === -1) {\n        gl.enableVertexAttribArray(location);\n        this.enabledVertexAttribLocations.push(location);\n      }\n    });\n  }\n\n  /**\n   * @param {BlendMode} blendMode\n   */\n  blend(blendMode) {\n    if (blendMode === this.currentBlendMode) return;\n    this.currentBlendMode = blendMode;\n\n    const { gl } = this;\n    if (blendMode.enable) {\n      if (!this.blendEnabled) {\n        gl.enable(gl.BLEND);\n        this.blendEnabled = true;\n      }\n      gl.blendFunc(gl[blendMode.sfactor], gl[blendMode.dfactor]);\n    } else if (this.blendEnabled) {\n      gl.disable(gl.BLEND);\n      this.blendEnabled = false;\n    }\n  }\n}\n\nexport default WebGlContext;\n","import WebGlContext from './WebGlContext';\n\nclass WebGl1Context extends WebGlContext {\n  constructor(gl) {\n    super(gl);\n\n    this.isWebGL1 = true;\n\n    this.ANGLE_instanced_arrays = gl.getExtension('ANGLE_instanced_arrays');\n  }\n\n  vertexAttribDivisor(location, divisor) {\n    this.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(location, divisor);\n  }\n\n  drawElementsInstanced(mode, count, type, offset, instanceCount) {\n    this.ANGLE_instanced_arrays.drawElementsInstancedANGLE(mode, count, type, offset, instanceCount);\n  }\n}\n\nexport default WebGl1Context;\n","import WebGlContext from './WebGlContext';\n\nclass WebGl2Context extends WebGlContext {\n  constructor(gl) {\n    super(gl);\n\n    this.isWebGL2 = true;\n  }\n\n  vertexAttribDivisor(location, divisor) {\n    this.gl.vertexAttribDivisor(location, divisor);\n  }\n\n  drawElementsInstanced(mode, count, type, offset, instanceCount) {\n    this.gl.drawElementsInstanced(mode, count, type, offset, instanceCount);\n  }\n}\n\nexport default WebGl2Context;\n","import { readOption } from '@picimo/utils'; // eslint-disable-line\n\nimport WebGl1Context from './WebGl1Context';\nimport WebGl2Context from './WebGl2Context';\n\n/**\n * @private\n * @see https://www.khronos.org/registry/webgl/specs/1.0/#WEBGLCONTEXTATTRIBUTES\n */\nconst readContextAttributes = options => ({\n  alpha: readOption(options, 'alpha', false),\n  depth: readOption(options, 'depth', true),\n  stencil: readOption(options, 'stencil', true),\n  antialias: readOption(options, 'antialias', false),\n  premultipliedAlpha: readOption(options, 'premultipliedAlpha', true),\n  preserveDrawingBuffer: readOption(options, 'preserveDrawingBuffer', false),\n  preferLowPowerToHighPerformance: readOption(options, 'preferLowPowerToHighPerformance', false),\n  failIfMajorPerformanceCaveat: readOption(options, 'failIfMajorPerformanceCaveat', false),\n});\n\n/**\n * @private\n */\nexport default (canvas, options) => {\n  const ctxAttrs = readContextAttributes(options);\n\n  let gl;\n\n  if (!readOption(options, 'disableWebGL2', false)) {\n    gl = canvas.getContext('webgl2', ctxAttrs);\n\n    if (gl) {\n      return new WebGl2Context(gl);\n    }\n  }\n\n  gl = canvas.getContext('webgl', ctxAttrs) || canvas.getContext('experimental-webgl', ctxAttrs);\n\n  if (gl == null) {\n    throw Error(`createWebGlContext: could not create webgl context with attributes: ${JSON.stringify(ctxAttrs)}`);\n  }\n\n  return new WebGl1Context(gl);\n};\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n      var storageKey = \"loglevel\";\n      if (name) {\n        storageKey += \":\" + name;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if (typeof name !== \"string\" || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    return defaultLogger;\n}));\n","\nexport default class WebGlBuffer {\n  /**\n   * @param {WebGlContext} glx - The *webgl* context\n   * @param {string} target - The *buffer target* (`ARRAY_BUFFER` or `ELEMENT_ARRAY_BUFFER`)\n   * @param {string} usage - *usage* hint (`STATIC_DRAW` or `DYNAMIC_DRAW')\n   * @param {TypedArray} [typedArray] - The buffer content as *typed array*\n   */\n  constructor(glx, target, usage, typedArray) {\n    this.glx = glx;\n\n    const { gl } = glx;\n    this.target = gl[target];\n    this.usage = gl[usage];\n    this.typedArray = typedArray;\n\n    /** @private */\n    this.clonedTypedArray = undefined;\n    /** @private */\n    this.lastTypedArray = undefined;\n\n    this.glBuffer = gl.createBuffer();\n  }\n\n  bindBuffer() {\n    this.glx.bindBuffer(this.target, this.glBuffer);\n  }\n\n  /**\n   * Upload array buffer content to gpu via `g.bufferData(..)`.\n   *\n   * @param {TypedArray} [typedArray] - The buffer content as *typed array*. If unspecified use the `typedArray` from the *contructor* call.\n   */\n  bufferData(typedArray) {\n    this.bindBuffer();\n    this.glx.gl.bufferData(this.target, typedArray || this.typedArray, this.usage);\n  }\n\n  /**\n   * Upload array buffer content to gpu via `gl.bufferData(..)`.\n   * This has the same `outcome` as `bufferData(typedData)` but before the call\n   * to `gl.bufferData()` the *typed array* will be cloned (*double buffering*).\n   *\n   * @param {TypedArray} [typedArray] - The buffer content as *typed array*. If unspecified use the `typedArray` from the *contructor* call.\n   */\n  doubleBufferData(typedArray) {\n    const arr = typedArray || this.typedArray;\n    if (this.clonedTypedArray === undefined || arr !== this.lastTypedArray) {\n      this.clonedTypedArray = new arr.constructor(arr.length);\n      this.clonedTypedArray.set(arr);\n      this.lastTypedArray = arr;\n    } else {\n      this.clonedTypedArray.set(arr);\n    }\n    this.bufferData(this.clonedTypedArray);\n  }\n\n  deleteBuffer() {\n    this.glx.gl.deleteBuffer(this.glBuffer);\n  }\n}\n\nWebGlBuffer.ARRAY_BUFFER = 'ARRAY_BUFFER';\nWebGlBuffer.ELEMENT_ARRAY_BUFFER = 'ELEMENT_ARRAY_BUFFER';\n\nWebGlBuffer.STATIC_DRAW = 'STATIC_DRAW';\nWebGlBuffer.DYNAMIC_DRAW = 'DYNAMIC_DRAW';\n","import loglevel from 'loglevel';\nimport { ShaderSource } from '@picimo/core';  // eslint-disable-line\n\nconst log = loglevel.getLogger('picimo.renderer.WebGlShader');\n\n/** @private */\nconst compileShader = (shader) => {\n  const { gl } = shader.glx;\n  const { glShader, source } = shader;\n\n  const src = source.compile({ glx: shader.glx });\n\n  gl.shaderSource(glShader, src);\n  gl.compileShader(glShader);\n\n  if (!gl.getShaderParameter(glShader, gl.COMPILE_STATUS)) {\n    const shaderInfoLog = gl.getShaderInfoLog(glShader);\n\n    log.debug(`WebGlShader: vertex shader source =>\\n${src}`);\n    throw new Error(`WebGlShader: gl.compileShader(..) panic!\\n${shaderInfoLog}`);\n  }\n};\n\nexport default class WebGlShader {\n  constructor(glx, source) {\n    this.glx = glx;\n\n    if (!(source instanceof ShaderSource)) {\n      throw new Error('WebGlShader panic! source must be an instance of ShaderSource!');\n    }\n\n    this.source = source;\n\n    const { gl } = glx;\n    this.shaderType = gl[source.type];\n    this.glShader = gl.createShader(this.shaderType);\n\n    compileShader(this);\n  }\n}\n","\n/**\n * @private\n */\nfunction createUniformSetter(uniform) {\n  const { type, location } = uniform;\n  const { gl } = uniform.glx;\n\n  // https://webglfundamentals.org/webgl/lessons/webgl-shaders-and-glsl.html\n\n  switch (type) {\n    case gl.FLOAT:\n      return value => gl.uniform1f(location, value);\n\n    case gl.FLOAT_VEC2:\n      return value => gl.uniform2f(location, value[0], value[1]);\n\n    case gl.FLOAT_VEC3:\n      return value => gl.uniform3f(location, value[0], value[1], value[2]);\n\n    case gl.FLOAT_VEC4:\n      return value => gl.uniform4f(location, value[0], value[1], value[2], value[3]);\n\n    case gl.FLOAT_MAT4:\n      return value => gl.uniformMatrix4fv(location, gl.FALSE, value.mat4);\n\n    case gl.SAMPLER_2D:\n      return value => gl.uniform1i(location, value);\n\n    default:\n      throw new Error(`WebGlUniform: unknown uniform type:${type}`);\n  }\n}\n\n/** @private */\nexport default class WebGlUniform {\n  constructor(program, index) {\n    this.program = program;\n    this.glx = program.glx;\n\n    const { gl } = program.glx;\n    const { glProgram } = program;\n\n    const { name, size, type } = gl.getActiveUniform(glProgram, index);\n    this.name = name;\n    this.size = size;\n    this.type = type;\n\n    this.location = gl.getUniformLocation(glProgram, name);\n\n    this.setValue = createUniformSetter(this);\n  }\n}\n","\n/** @private */\nconst GL_ITEM_TYPES = {\n  float32: 'FLOAT',\n  int16: 'SHORT',\n  int32: 'INT',\n  int8: 'BYTE',\n  uint16: 'UNSIGNED_SHORT',\n  uint32: 'UNSIGNED_INT',\n  uint8: 'UNSIGNED_BYTE',\n};\n\n/** @private */\nconst glType = (gl, type) => gl[GL_ITEM_TYPES[type]];\n\n/** @private */\nexport default class WebGlAttribute {\n  constructor(program, index) {\n    this.program = program;\n    this.glx = program.glx;\n\n    const { gl } = program.glx;\n    const { glProgram } = program;\n\n    const { name, size, type } = gl.getActiveAttrib(glProgram, index);\n    this.name = name;\n    this.size = size;\n    this.type = type;\n\n    this.location = gl.getAttribLocation(glProgram, name);\n  }\n\n  /**\n   * @param {VODescriptor} descriptor\n   */\n  vertexAttribPointer(descriptor) {\n    const { gl } = this.glx;\n    const attr = descriptor.attr[this.name];\n    const type = glType(gl, attr.type);\n    gl.vertexAttribPointer(this.location, attr.size, type, false, descriptor.bytesPerVertex, attr.byteOffset);\n    if (descriptor.isInstanced) {\n      this.glx.vertexAttribDivisor(this.location, 1); // TODO add support for custom divisor value?\n    }\n  }\n}\n\n","/* eslint no-param-reassign: 0 */\nimport loglevel from 'loglevel';\n\nimport WebGlUniform from './WebGlUniform';\nimport WebGlAttribute from './WebGlAttribute';\n\nconst log = loglevel.getLogger('picimo.renderer.WebGlProgram');\n\n/** @private */\nfunction createAttributes(program) {\n  const { gl } = program.glx;\n  const len = gl.getProgramParameter(program.glProgram, gl.ACTIVE_ATTRIBUTES);\n\n  program.attributes = {};\n  program.attributeNames = [];\n  program.attributeLocations = [];\n\n  for (let i = 0; i < len; ++i) {\n    const attrib = new WebGlAttribute(program, i);\n    program.attributes[attrib.name] = attrib;\n    program.attributeNames.push(attrib.name);\n    program.attributeLocations.push(attrib.location);\n  }\n}\n\n/** @private */\nfunction createUniforms(program) {\n  const { gl } = program.glx;\n  const len = gl.getProgramParameter(program.glProgram, gl.ACTIVE_UNIFORMS);\n\n  program.uniforms = {};\n  program.uniformNames = [];\n\n  for (let i = 0; i < len; ++i) {\n    const uniform = new WebGlUniform(program, i);\n    program.uniforms[uniform.name] = uniform;\n    program.uniformNames.push(uniform.name);\n  }\n}\n\n/** @private */\nfunction linkProgram(program, vertexShader, fragmentShader) {\n  const { gl } = program.glx;\n  const { glProgram } = program;\n\n  gl.attachShader(glProgram, vertexShader);\n  gl.attachShader(glProgram, fragmentShader);\n\n  gl.linkProgram(glProgram);\n\n  if (!gl.getProgramParameter(glProgram, gl.LINK_STATUS)) {\n    throw new Error('WebGlProgram: link panic!');\n  }\n}\n\nexport default class WebGlProgram {\n  constructor(glx, vertexShader, fragmentShader) {\n    this.glx = glx;\n\n    this.vertexShader = vertexShader;\n    this.fragmentShader = fragmentShader;\n\n    const { gl } = glx;\n    this.glProgram = gl.createProgram();\n\n    linkProgram(this, this.vertexShader.glShader, this.fragmentShader.glShader);\n    // TODO gl.deleteShader?\n\n    createUniforms(this);\n    createAttributes(this);\n  }\n\n  /**\n   * @return {boolean} success\n   */\n  use() {\n    const { glx } = this;\n    if (glx.useProgram(this.glProgram)) {\n      glx.enableVertexAttribArrays(this.attributeLocations);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {ShaderContext} shaderContext\n   * @param {WebGlRenderer} renderer\n   * @return {boolean} success\n   */\n  loadUniforms(shaderContext, renderer) {\n    let success = true;\n    this.uniformNames.forEach((name) => {\n      let shaderVar = shaderContext.curUniform(name);\n      if (shaderVar == null) {\n        shaderVar = shaderContext.curTex2d(name);\n        if (shaderVar) {\n          const { texture } = shaderVar;\n          if (texture) {\n            // Sync texture to gpu and update `.data` with the *gl texture unit*.\n            shaderVar.data = renderer.syncTexture(texture).bind();\n          }\n        } else {\n          log.error('WebGlProgram: could not load uniform:', name);\n          success = false;\n          return;\n        }\n      }\n      this.uniforms[name].setValue(shaderVar.data);\n    });\n    return success;\n  }\n\n  /**\n   * sync buffer before load\n   *\n   * @param {ShaderContext} shaderContext\n   * @param {WebGlRenderer} renderer\n   * @return {boolean} success\n   */\n  loadAttributes(shaderContext, renderer) {\n    let success = true;\n    this.attributeNames.forEach((name) => {\n      const attrib = shaderContext.curAttrib(name);\n      if (attrib) {\n        const attribValue = attrib.data;\n        renderer.syncBuffer(attribValue).bindBuffer();\n        this.attributes[name].vertexAttribPointer(attribValue.descriptor);\n      } else {\n        log.error('WebGlProgram: could not load attribute:', name);\n        success = false;\n      }\n    });\n    return success;\n  }\n}\n","\n/**\n * @private\n */\nexport default (tex) => {\n  const { gl } = tex.glx;\n\n  tex.bind();\n\n  gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, tex.flipY);\n  gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, tex.premultiplyAlpha);\n\n  const wrap = tex.repeatable ? gl.REPEAT : gl.CLAMP_TO_EDGE;\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrap);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrap);\n\n  const filter = tex.nearest ? gl.NEAREST : gl.LINEAR;\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filter);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filter);\n\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, tex.imgEl.width, tex.imgEl.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n};\n","import initTexGl from './initTexGl';\n\nexport default class WebGlTexture {\n  /**\n   * @param {WebGlContext} glx\n   * @param {HTMLImageElement} imgEl\n   * @param {boolean} [flipY=false]\n   * @param {boolean} [repeatable=false]\n   * @param {boolean} [premultiplyAlpha=false]\n   * @param {boolean} [nearest=false]\n   */\n  constructor(glx, imgEl, flipY = false, repeatable = false, premultiplyAlpha = false, nearest = false) {\n    this.glx = glx;\n    this.imgEl = imgEl;\n\n    this.flipY = flipY;\n    this.repeatable = repeatable;\n    this.premultiplyAlpha = premultiplyAlpha;\n    this.nearest = nearest;\n\n    this.isInitialized = false;\n    this.glTexObj = glx.gl.createTexture();\n    this.texUnit = -1;\n  }\n\n  bind() {\n    return this.glx.textureUnitManager.bindWebGlTexture(this);\n  }\n\n  uploadImageData() {\n    if (this.imgEl == null) return;\n\n    if (!this.isInitialized) {\n      initTexGl(this);\n      this.isInitialized = true;\n    }\n\n    this.bind();\n\n    const { gl } = this.glx;\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.imgEl);\n  }\n}\n","import loglevel from 'loglevel';\nimport { DataRef } from '@picimo/core';  // eslint-disable-line\nimport { readOption } from '@picimo/utils';  // eslint-disable-line\n\nimport WebGlBuffer from './WebGlBuffer';\nimport WebGlShader from './WebGlShader';\nimport WebGlProgram from './WebGlProgram';\nimport WebGlTexture from './WebGlTexture';\n\n/** @private */\nconst WEB_GL_BUFFER_USAGE = {\n  static: WebGlBuffer.STATIC_DRAW,\n  dynamic: WebGlBuffer.DYNAMIC_DRAW,\n};\n\n/** @private */\nconst loadResource = (cache, resource, callback) => {\n  let glResource = cache.get(resource.id);\n  if (!glResource) {\n    glResource = callback(resource);\n    cache.set(resource.id, glResource);\n  }\n  return glResource;\n};\n\n/** @private */\nconst log = loglevel.getLogger('picimo.renderer.WebGlResourceLibrary');\n\nexport default class WebGlResourceLibrary {\n  constructor(glx) {\n    this.glx = glx;\n\n    /** @private */\n    this.vertexShader = new Map();\n    /** @private */\n    this.fragmentShader = new Map();\n    /** @private */\n    this.shaderProgram = new Map();\n    /** @private */\n    this.buffer = new Map();\n    /** @private */\n    this.texture = new Map();\n  }\n\n  /**\n   * @param {DataRef} ref - A reference to `VOArray` or `ElementIndexArray`\n   * @returns {DataRef} The reference to the `WebGlBuffer`\n   */\n  loadBuffer(ref) {\n    return loadResource(this.buffer, ref, () => {\n      if (!(ref.type === 'VOArray' || ref.type === 'ElementIndexArray')) {\n        log.warn(`WebGlResourceLibrary.loadBuffer() ref.type=\"${ref.type}\" mismatch! (should be \"VOArray\" or \"ElementIndexArray\")`);\n        return;\n      }\n      // I. Create WebGlBuffer\n      const target = readOption(ref.hints, 'target', WebGlBuffer.ARRAY_BUFFER);\n      const usage = readOption(ref.hints, 'usage', 'dynamic');\n      const typedArray = readOption(ref.hints, 'typedArray');\n      const glBuffer = new WebGlBuffer(this.glx, target, WEB_GL_BUFFER_USAGE[usage], typedArray);\n      // II. Create DataRef\n      return new DataRef('WebGlBuffer', glBuffer, { id: ref.id, serial: 0 });\n    });\n  }\n\n  /**\n   * @param {DataRef} ref - A reference to `VOArray` or `ElementIndexArray`\n   * @returns {DataRef} The reference to the `WebGlBuffer` or `undefined`\n   */\n  findBuffer(ref) {\n    return this.buffer.get(ref.id);\n  }\n\n  /**\n   * @param {DataRef} ref - A reference to `VOArray` or `ElementIndexArray`\n   */\n  freeBuffer(ref) {\n    const bufferRef = this.findBuffer(ref);\n    if (bufferRef) {\n      this.buffer.delete(bufferRef.id);\n      bufferRef.data.deleteBuffer();\n    }\n  }\n\n  /**\n   * @param {ShaderSource} shaderSource - vertex shader\n   * @returns {WebGlShader}\n   */\n  loadVertexShader(shaderSource) {\n    return loadResource(this.vertexShader, shaderSource, () => new WebGlShader(this.glx, shaderSource));\n  }\n\n  /**\n   * @param {ShaderSource} shaderSource - fragment shader\n   * @returns {WebGlShader}\n   */\n  loadFragementShader(shaderSource) {\n    return loadResource(this.fragmentShader, shaderSource, () => new WebGlShader(this.glx, shaderSource));\n  }\n\n  /**\n   * @param {ShaderProgram} shaderProgram\n   * @returns {WebGlProgram}\n   */\n  loadProgram(shaderProgram) {\n    return loadResource(this.shaderProgram, shaderProgram, () => {\n      const vs = this.loadVertexShader(shaderProgram.vertexShader);\n      const fs = this.loadFragementShader(shaderProgram.fragmentShader);\n      return new WebGlProgram(this.glx, vs, fs);\n    });\n  }\n\n  /**\n   * @param {DataRef} texRef - Reference to texture\n   * @returns {DataRef} Reference to WebGlTexture\n   */\n  loadTexture(texRef) {\n    let glTextureRef = this.texture.get(texRef.id);\n    if (!glTextureRef) {\n      // create WebGlTexture\n      const glTex = new WebGlTexture(\n        this.glx,\n        texRef.data.imgEl,\n        texRef.hints.flipY,\n        texRef.hints.repeatable,\n        texRef.hints.premultiplyAlpha,\n        texRef.hints.nearest,\n      );\n      // create ResourceRef\n      glTextureRef = new DataRef('WebGlTexture', glTex, { id: texRef.id, serial: 0 });\n      this.texture.set(texRef.id, glTextureRef);\n    }\n    return glTextureRef;\n  }\n}\n","/* eslint-env browser */\nimport {\n  Projection,\n  ShaderContext,\n  ShaderUniformGroup,\n  StackedContext,\n  TexturedSpriteGroup,\n} from '@picimo/core'; // eslint-disable-line\n\nimport { readOption } from '@picimo/utils'; // eslint-disable-line\n\nimport { createWebGlContext } from './WebGlContext';\nimport WebGlResourceLibrary from './WebGlResourceLibrary';\nimport BlendMode from './BlendMode';\n\nconst CTX_BLEND_MODE = 'blend';\n\n/** @private */\nconst createCanvas = (domElement) => {\n  if (domElement.tagName === 'CANVAS') {\n    return domElement;\n  }\n\n  const canvas = document.createElement('canvas');\n  domElement.appendChild(canvas);\n  return canvas;\n};\n\n/** @private */\nconst autotouchResource = (ref, touchedWithinFrame) => {\n  if (!touchedWithinFrame.has(ref.id)) {\n    touchedWithinFrame.add(ref.id);\n    ref.touch();\n  }\n};\n\n/** @private */\nconst applyBlendMode = (renderer) => {\n  const blendMode = renderer.universalContext.get(CTX_BLEND_MODE);\n  if (blendMode) {\n    renderer.glx.blend(blendMode);\n  }\n};\n\n/**\n * The *main* WebGL renderer.\n */\nexport default class WebGlRenderer {\n  /**\n   * @param {HTMLElement} domElement - The `<canvas>` or the *container* element.\n   * @param {Object} [options]\n   * @param {number} [options.pixelRatio] - Set `pixelRatio` to a fixed value instead of reading from `window.devicePixelRatio` (default)\n   * @param {number} [options.disableWebGL2] - Set to `true` if you want to force a WebGL1 context instead of an WebGL2 (default if available)\n   */\n  constructor(domElement, options) {\n    /**\n     * The `<canvas>` or the *container* element.\n     */\n    this.domElement = domElement;\n\n    /**\n     * The `<canvas>` element.\n     */\n    this.canvas = createCanvas(domElement);\n\n    /**\n     * WebGL context.\n     */\n    this.glx = createWebGlContext(this.canvas, options);\n\n    /**\n     * @type {WebGlResourceLibrary}\n     */\n    this.resources = new WebGlResourceLibrary(this.glx);\n\n    /**\n     * The global shader variable context.\n     * @type {ShaderContext}\n     */\n    this.shaderContext = new ShaderContext();\n\n    this.universalContext = new StackedContext();\n\n    /**\n     * Time in *seconds*.\n     */\n    this.now = 0;\n\n    /**\n     * The time in *seconds* as it was at the last call of `initFrame()`.\n     */\n    this.lastFrameTime = 0;\n\n    /**\n     * Current frame number. Initially set to 0.\n     */\n    this.frameNo = 0;\n\n    /**\n     * Seconds passed since the last render / previous call to `initFrame()`.\n     */\n    this.timeFrameOffset = 0;\n\n    /**\n     * Force set *pixel ratio* to a custom value.\n     * @private\n     */\n    this._pixelRatio = readOption(options, 'pixelRatio');\n\n    /**\n     * Will be cleared on each frame. Holds `id`'s of all *autotouch* resources (within the current frame).\n     * @private\n     */\n    this._touchedWithinFrame = new Set();\n\n    this.shaderGlobals = new ShaderUniformGroup({\n      time: 0,\n      resolution: [0, 0],\n      projection: new Projection({ pixelRatio: 1 }),\n    });\n\n    this.resize();\n  }\n\n  /**\n   * The *pixel ratio* used to calculate the canvas *pixels*. Default is read from `window.devicePixelRatio`.\n   */\n  get pixelRatio() {\n    return this._pixelRatio || window.devicePixelRatio || 1;\n  }\n\n  /**\n   * Set blend mode.\n   * @param {string|BlendMode} blend mode\n   * @returns {number} index of the blend mode within the blend context stack\n   */\n  pushBlendMode(blend) {\n    const blendMode = blend instanceof BlendMode ? blend : BlendMode.make(blend);\n    return this.universalContext.push(CTX_BLEND_MODE, blendMode);\n  }\n\n  /**\n   * Unset the blend mode and restore the previous blend mode.\n   * @param {number} [idx] - Index of the blend mode within *blend context stack*. If not specified the last blend mode will be popped out of the stack.\n   */\n  popBlendMode(idx) {\n    return this.universalContext.pop(CTX_BLEND_MODE, idx);\n  }\n\n  /**\n   * Resize the webgl canvas according to the `<canvas>` styles.\n   * If the canvas has an explicit container element (given as the first constructor argument),\n   * the size is determinated by the container element styles.\n   */\n  resize() {\n    const { canvas, domElement } = this;\n    const style = window.getComputedStyle(canvas, null);\n    const isInline = style.display === 'inline' || style.display === '';\n\n    const el = isInline && domElement === canvas ? domElement.parentNode : domElement;\n\n    const {\n      clientWidth: wPx,\n      clientHeight: hPx,\n    } = el || {\n      clientWidth: canvas.width,\n      clientHeight: canvas.height,\n    };\n\n    canvas.style.width = `${wPx}px`;\n    canvas.style.height = `${hPx}px`;\n\n    const dpr = this.pixelRatio;\n    const w = Math.round(wPx * dpr);\n    const h = Math.round(hPx * dpr);\n\n    if (w !== canvas.width || h !== canvas.height) {\n      canvas.width = w;\n      canvas.height = h;\n    }\n\n    if (w !== this.width || h !== this.height) {\n      /**\n       * The width in *pixels* of our webgl canvas.\n       */\n      this.width = w;\n\n      /**\n       * The height in *pixels* of out webgl canvas.\n       */\n      this.height = h;\n\n      this.shaderGlobals.resolution = [w, h];\n      this.shaderGlobals.projectionUniform.update(w, h);\n    }\n  }\n\n  /**\n   * Returns the current content of our *webgl canvas* as ImageData object.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/ImageData\n   * @param {boolean} [flipY=false] - flip image vertically\n   * @returns {ImageData}\n   */\n  readPixels(flipY = false) {\n    const { gl } = this;\n    const { drawingBufferWidth: width, drawingBufferHeight: height } = gl;\n    const data = new Uint8Array(width * height * 4);\n\n    gl.readPixels(0, 0, width, height, gl.RGBA, gl.UNSIGNED_BYTE, data);\n\n    if (flipY) {\n      // https://stackoverflow.com/a/41971402\n      Array\n        .from({ length: height }, (val, i) => data.slice(i * width * 4, (i + 1) * width * 4))\n        .forEach((val, i) => data.set(val, (height - i - 1) * width * 4));\n    }\n\n    return new ImageData(Uint8ClampedArray.from(data), width, height);\n  }\n\n  /**\n   * Initialize the *renderer state* for the next frame.\n   *\n   * Each call to `initFrame()` will ..\n   * 1. increase the frame number `frameNo`\n   * 2. update the frame *time* (`now`, `lastFrameTime` and `shaderGlobals`:uniform:`time`)\n   * 3. initialize shader variable context (time, resolution, projection, ..)\n   * 4. initialize universal context (blend, ..)\n   * 5. set the webgl viewport (to full canvas size)\n   *\n   * @param {number} [now] - *now* in *millis*. Is read out from `performance.now()` if not specified.\n   */\n  initFrame(now = window.performance.now()) {\n    // 1) increase frame number\n    ++this.frameNo;\n\n    // 2) update frame time\n    this.now = now / 1000.0; // seconds\n    if (this.frameNo !== 1) {\n      this.timeFrameOffset = this.now - this.lastFrameTime;\n    }\n    this.lastFrameTime = this.now;\n    this.shaderGlobals.time = this.now;\n\n    // -) reset internal frame context\n    this._touchedWithinFrame.clear();\n\n    // 3) initialize universal context\n    this.universalContext.clear();\n    this.pushBlendMode('orderDependent');\n\n    // 4) initialize shader variable context\n    this.shaderContext.clear();\n    this.shaderGlobals.pushVar(this.shaderContext);\n\n    // 5) set webgl viewport\n    this.glx.gl.viewport(0, 0, this.width, this.height);\n  }\n\n  /**\n   * @param {VOArray|ElementIndexArray} buffer resource\n   * @return {WebGlBuffer}\n   */\n  syncBuffer({ ref }) {\n    if (ref.hasHint('autotouch', true)) {\n      autotouchResource(ref, this._touchedWithinFrame);\n    }\n\n    const bufferRef = this.resources.loadBuffer(ref);\n\n    bufferRef.sync(ref, (buffer) => {\n      if (ref.hasHint('doubleBuffer', true)) {\n        buffer.doubleBufferData();\n      } else {\n        buffer.bufferData();\n      }\n    });\n\n    return bufferRef.data;\n  }\n\n  /**\n   * @param {Texture} texture\n   * @return {WebGlTexture}\n   */\n  syncTexture(texture) {\n    const texRef = texture.ref;\n    const glTexRef = this.resources.loadTexture(texRef);\n    glTexRef.sync(texRef, tex => tex.uploadImageData());\n    return glTexRef.data;\n  }\n\n  /**\n   * @param {ShaderProgram} shaderProgram\n   */\n  useShaderProgram(shaderProgram) {\n    const program = this.resources.loadProgram(shaderProgram);\n    const { shaderContext } = this;\n    const success = program.use();\n    const successUniforms = program.loadUniforms(shaderContext, this);\n    const successAttributes = program.loadAttributes(shaderContext, this);\n    return success && successUniforms && successAttributes;\n  }\n\n  /**\n   * @param {string} primitive\n   * @param {number} count\n   * @param {number} [startIndex=0]\n   */\n  drawArrays(primitive, count, startIndex = 0) {\n    applyBlendMode(this);\n\n    const { gl } = this.glx;\n    gl.drawArrays(gl[primitive], startIndex, count);\n  }\n\n  /**\n   * @param {string} primitive\n   * @param {ElementIndexArray} elementIndexArray\n   * @param {number} [count]\n   * @param {number} [offset=0]\n   */\n  drawIndexed(primitive, elementIndexArray, count, offset = 0) {\n    applyBlendMode(this);\n    this.syncBuffer(elementIndexArray).bindBuffer();\n\n    const { gl } = this.glx;\n    gl.drawElements(\n      gl[primitive],\n      count || elementIndexArray.length,\n      gl.UNSIGNED_SHORT,\n      offset * elementIndexArray.array.BYTES_PER_ELEMENT,\n    );\n  }\n\n  /**\n   * @param {string} primitive\n   * @param {ElementIndexArray} elementIndexArray\n   * @param {number} count\n   * @param {number} offset=0\n   * @param {number} instanceCount\n   */\n  drawIndexedInstanced(primitive, elementIndexArray, count, offset, instanceCount) {\n    applyBlendMode(this);\n    this.syncBuffer(elementIndexArray).bindBuffer();\n\n    const { glx } = this;\n    const { gl } = glx;\n    glx.drawElementsInstanced(\n      gl[primitive],\n      count || elementIndexArray.length,\n      gl.UNSIGNED_SHORT,\n      offset * elementIndexArray.array.BYTES_PER_ELEMENT,\n      instanceCount,\n    );\n  }\n\n  /**\n   * @param {IndexedPrimitive} indexedPrimitive\n   * @param {number} primCount\n   * @param {number} primOffset\n   */\n  drawPrimitive({ primitiveType, elementIndexArray }, primCount, primOffset) {\n    const { itemCount } = elementIndexArray;\n    this.drawIndexed(primitiveType, elementIndexArray, primCount * itemCount, primOffset * itemCount);\n  }\n\n  /**\n   * @param {IndexedPrimitive} indexedPrimitive\n   * @param {number} primCount\n   * @param {number} primOffset\n   * @param {number} instanceCount\n   */\n  drawPrimitiveIndexed({ primitiveType, elementIndexArray }, primCount, primOffset, instanceCount) {\n    const { itemCount } = elementIndexArray;\n    this.drawIndexedInstanced(primitiveType, elementIndexArray, primCount * itemCount, primOffset * itemCount, instanceCount);\n  }\n\n  /**\n   * @param {SpriteGroup} spriteGroup\n   */\n  drawSpriteGroup(spriteGroup) {\n    const draw = () => {\n      const { base } = spriteGroup;\n      if (base) {\n        this.syncBuffer(base.voPool.voArray);\n        this.shaderContext.pushVar(base.voPoolShaderAttribs);\n      }\n      this.syncBuffer(spriteGroup.voPool.voArray);\n      this.shaderContext.pushVar(spriteGroup.voPoolShaderAttribs);\n      this.useShaderProgram(spriteGroup.shaderProgram);\n      if (base) {\n        this.drawPrimitiveIndexed(base.primitive, base.usedCount, 0, spriteGroup.usedCount);\n      } else {\n        this.drawPrimitive(spriteGroup.primitive, spriteGroup.usedCount, 0);\n      }\n    };\n\n    if (spriteGroup instanceof TexturedSpriteGroup) {\n      spriteGroup.whenTexturesLoaded((texUniforms) => {\n        this.shaderContext.pushVar(texUniforms);\n        draw(this, spriteGroup);\n      });\n    } else {\n      draw(this, spriteGroup);\n    }\n  }\n}\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  return object != null && hasOwnProperty.call(object, key);\n}\n\nmodule.exports = baseHas;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var baseHas = require('./_baseHas'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct property of `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = { 'a': { 'b': 2 } };\n * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.has(object, 'a');\n * // => true\n *\n * _.has(object, 'a.b');\n * // => true\n *\n * _.has(object, ['a', 'b']);\n * // => true\n *\n * _.has(other, 'a');\n * // => false\n */\nfunction has(object, path) {\n  return object != null && hasPath(object, path, baseHas);\n}\n\nmodule.exports = has;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var baseSet = require('./_baseSet');\n\n/**\n * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n * it's created. Arrays are created for missing index properties while objects\n * are created for all other missing properties. Use `_.setWith` to customize\n * `path` creation.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.set(object, 'a[0].b.c', 4);\n * console.log(object.a[0].b.c);\n * // => 4\n *\n * _.set(object, ['x', '0', 'y', 'z'], 5);\n * console.log(object.x[0].y.z);\n * // => 5\n */\nfunction set(object, path, value) {\n  return object == null ? object : baseSet(object, path, value);\n}\n\nmodule.exports = set;\n","/*\n * Generated by PEG.js 0.10.0.\n *\n * http://pegjs.org/\n */\n\n\"use strict\";\n\nfunction peg$subclass(child, parent) {\n  function ctor() { this.constructor = child; }\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message  = message;\n  this.expected = expected;\n  this.found    = found;\n  this.location = location;\n  this.name     = \"SyntaxError\";\n\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n        literal: function(expectation) {\n          return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n        },\n\n        \"class\": function(expectation) {\n          var escapedParts = \"\",\n              i;\n\n          for (i = 0; i < expectation.parts.length; i++) {\n            escapedParts += expectation.parts[i] instanceof Array\n              ? classEscape(expectation.parts[i][0]) + \"-\" + classEscape(expectation.parts[i][1])\n              : classEscape(expectation.parts[i]);\n          }\n\n          return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n        },\n\n        any: function(expectation) {\n          return \"any character\";\n        },\n\n        end: function(expectation) {\n          return \"end of input\";\n        },\n\n        other: function(expectation) {\n          return expectation.description;\n        }\n      };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\"/g,  '\\\\\"')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\\]/g, '\\\\]')\n      .replace(/\\^/g, '\\\\^')\n      .replace(/-/g,  '\\\\-')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = new Array(expected.length),\n        i, j;\n\n    for (i = 0; i < expected.length; i++) {\n      descriptions[i] = describeExpectation(expected[i]);\n    }\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== void 0 ? options : {};\n\n  var peg$FAILED = {},\n\n      peg$startRuleFunctions = { start: peg$parsestart },\n      peg$startRuleFunction  = peg$parsestart,\n\n      peg$c0 = peg$otherExpectation(\"picimo-lang\"),\n      peg$c1 = function(statements) {\n          return compact(statements);\n        },\n      peg$c2 = peg$otherExpectation(\"top-level statement\"),\n      peg$c3 = function(statement) {\n            return statement;\n          },\n      peg$c4 = peg$otherExpectation(\"statement\"),\n      peg$c5 = function(type, name, verb, subject) { return { verb: verb, subject: subject }; },\n      peg$c6 = function(type, name, extension, block) {\n          block.type = \"declaration\",\n          block.name = name;\n          block.declarationType = type;\n          if (extension) {\n            block.verb = extension.verb;\n            block.subject = extension.subject;\n          }\n          return block;\n        },\n      peg$c7 = \"vertexobject\",\n      peg$c8 = peg$literalExpectation(\"VertexObject\", true),\n      peg$c9 = \"primitive\",\n      peg$c10 = peg$literalExpectation(\"Primitive\", true),\n      peg$c11 = \"spritegroup\",\n      peg$c12 = peg$literalExpectation(\"SpriteGroup\", true),\n      peg$c13 = function(type) { return type.toLowerCase(); },\n      peg$c14 = \"instantiates\",\n      peg$c15 = peg$literalExpectation(\"instantiates\", true),\n      peg$c16 = function(verb) { return verb.toLowerCase(); },\n      peg$c17 = function(name, args, block) {\n          block.name = name;\n          if (args) {\n            block.args = args;\n          }\n          return block;\n        },\n      peg$c18 = function(type, a) { return a; },\n      peg$c19 = function(type, anno, statements) {\n            var block = {\n              type: \"dataBlock\",\n              data: compact(statements)\n            };\n            if (type) block.dataType = type;\n            if (anno.length) anno.forEach(copyAsAnnotation.bind(null, block));\n            return block;\n          },\n      peg$c20 = \"{\",\n      peg$c21 = peg$literalExpectation(\"{\", false),\n      peg$c22 = \"}\",\n      peg$c23 = peg$literalExpectation(\"}\", false),\n      peg$c24 = peg$otherExpectation(\"constant statement\"),\n      peg$c25 = \"=\",\n      peg$c26 = peg$literalExpectation(\"=\", false),\n      peg$c27 = function(name, value) { writeConstant(name, value); },\n      peg$c28 = peg$otherExpectation(\"property-call statement\"),\n      peg$c29 = \"@\",\n      peg$c30 = peg$literalExpectation(\"@\", false),\n      peg$c31 = function(name, args) {\n          var props = {\n            type: \"propertyCall\",\n            name: name\n          }\n          if (args) props.args = args;\n          return props;\n        },\n      peg$c32 = peg$otherExpectation(\"property call arguments list\"),\n      peg$c33 = \"(\",\n      peg$c34 = peg$literalExpectation(\"(\", false),\n      peg$c35 = \",\",\n      peg$c36 = peg$literalExpectation(\",\", false),\n      peg$c37 = function(head, a) { return a; },\n      peg$c38 = \")\",\n      peg$c39 = peg$literalExpectation(\")\", false),\n      peg$c40 = function(head, tail) {\n          return [head].concat(tail);\n        },\n      peg$c41 = peg$otherExpectation(\"property call argument\"),\n      peg$c42 = function(value) {\n          return value;\n        },\n      peg$c43 = peg$otherExpectation(\"named arguments list\"),\n      peg$c44 = peg$otherExpectation(\"named argument\"),\n      peg$c45 = \":\",\n      peg$c46 = peg$literalExpectation(\":\", false),\n      peg$c47 = function(name, value) {\n          return {\n            name: name,\n            value: value\n          };\n        },\n      peg$c48 = peg$otherExpectation(\"data statement\"),\n      peg$c49 = function(name, args, type, a0) { return a0; },\n      peg$c50 = function(name, args, type, anno0, value, a1) { return a1; },\n      peg$c51 = function(name, args, type, anno0, value, anno1) {\n          var data = {\n            type: \"data\",\n            name: name\n          }\n          if (args) data.args = args;\n          if (value != null) data.value = value;\n          if (type) data.valueType = type;\n          if (anno0.length) anno0.forEach(copyAsAnnotation.bind(null, data));\n          if (anno1.length) anno1.forEach(copyAsAnnotation.bind(null, data));\n          return data;\n        },\n      peg$c52 = peg$otherExpectation(\"data value type\"),\n      peg$c53 = \"float32\",\n      peg$c54 = peg$literalExpectation(\"float32\", false),\n      peg$c55 = \"int32\",\n      peg$c56 = peg$literalExpectation(\"int32\", false),\n      peg$c57 = \"int16\",\n      peg$c58 = peg$literalExpectation(\"int16\", false),\n      peg$c59 = \"int8\",\n      peg$c60 = peg$literalExpectation(\"int8\", false),\n      peg$c61 = \"uint32\",\n      peg$c62 = peg$literalExpectation(\"uint32\", false),\n      peg$c63 = \"uint16\",\n      peg$c64 = peg$literalExpectation(\"uint16\", false),\n      peg$c65 = \"uint8\",\n      peg$c66 = peg$literalExpectation(\"uint8\", false),\n      peg$c67 = function(type) {\n          return type;\n        },\n      peg$c68 = function(val) {\n          return val;\n        },\n      peg$c69 = \"false\",\n      peg$c70 = peg$literalExpectation(\"false\", false),\n      peg$c71 = function() { return false; },\n      peg$c72 = \"no\",\n      peg$c73 = peg$literalExpectation(\"no\", false),\n      peg$c74 = \"off\",\n      peg$c75 = peg$literalExpectation(\"off\", false),\n      peg$c76 = \"true\",\n      peg$c77 = peg$literalExpectation(\"true\", false),\n      peg$c78 = function() { return true; },\n      peg$c79 = \"on\",\n      peg$c80 = peg$literalExpectation(\"on\", false),\n      peg$c81 = \"yes\",\n      peg$c82 = peg$literalExpectation(\"yes\", false),\n      peg$c83 = \"null\",\n      peg$c84 = peg$literalExpectation(\"null\", false),\n      peg$c85 = function() { return null;  },\n      peg$c86 = function(expr) {\n          return expr;\n        },\n      peg$c87 = peg$otherExpectation(\"value array\"),\n      peg$c88 = function(head, v) { return v; },\n      peg$c89 = function(head, tail) {\n               return [head].concat(tail);\n            },\n      peg$c90 = function(values) { return values || []; },\n      peg$c91 = \"[\",\n      peg$c92 = peg$literalExpectation(\"[\", false),\n      peg$c93 = \"]\",\n      peg$c94 = peg$literalExpectation(\"]\", false),\n      peg$c95 = \"+\",\n      peg$c96 = peg$literalExpectation(\"+\", false),\n      peg$c97 = \"-\",\n      peg$c98 = peg$literalExpectation(\"-\", false),\n      peg$c99 = function(head, tail) {\n            return tail.reduce(function(result, element) {\n              if (element[1] === \"+\") { return result + element[3]; }\n              if (element[1] === \"-\") { return result - element[3]; }\n            }, head);\n          },\n      peg$c100 = \"*\",\n      peg$c101 = peg$literalExpectation(\"*\", false),\n      peg$c102 = \"/\",\n      peg$c103 = peg$literalExpectation(\"/\", false),\n      peg$c104 = function(head, tail) {\n            return tail.reduce(function(result, element) {\n              if (element[1] === \"*\") { return result * element[3]; }\n              if (element[1] === \"/\") { return result / element[3]; }\n            }, head);\n          },\n      peg$c105 = function(expr) { return expr; },\n      peg$c106 = function(minus, name) {\n          var val = readConstant(name);\n           return minus ? -val : val;\n        },\n      peg$c107 = peg$otherExpectation(\"number\"),\n      peg$c108 = function() { return parseFloat(text()); },\n      peg$c109 = \".\",\n      peg$c110 = peg$literalExpectation(\".\", false),\n      peg$c111 = /^[1-9]/,\n      peg$c112 = peg$classExpectation([[\"1\", \"9\"]], false, false),\n      peg$c113 = /^[eE]/,\n      peg$c114 = peg$classExpectation([\"e\", \"E\"], false, false),\n      peg$c115 = \"0\",\n      peg$c116 = peg$literalExpectation(\"0\", false),\n      peg$c117 = peg$otherExpectation(\"string\"),\n      peg$c118 = function(chars) { return chars.join(\"\"); },\n      peg$c119 = \"\\\"\",\n      peg$c120 = peg$literalExpectation(\"\\\"\", false),\n      peg$c121 = \"\\\\\",\n      peg$c122 = peg$literalExpectation(\"\\\\\", false),\n      peg$c123 = \"b\",\n      peg$c124 = peg$literalExpectation(\"b\", false),\n      peg$c125 = function() { return \"\\b\"; },\n      peg$c126 = \"f\",\n      peg$c127 = peg$literalExpectation(\"f\", false),\n      peg$c128 = function() { return \"\\f\"; },\n      peg$c129 = \"n\",\n      peg$c130 = peg$literalExpectation(\"n\", false),\n      peg$c131 = function() { return \"\\n\"; },\n      peg$c132 = \"r\",\n      peg$c133 = peg$literalExpectation(\"r\", false),\n      peg$c134 = function() { return \"\\r\"; },\n      peg$c135 = \"t\",\n      peg$c136 = peg$literalExpectation(\"t\", false),\n      peg$c137 = function() { return \"\\t\"; },\n      peg$c138 = \"u\",\n      peg$c139 = peg$literalExpectation(\"u\", false),\n      peg$c140 = function(digits) {\n                return String.fromCharCode(parseInt(digits, 16));\n              },\n      peg$c141 = function(sequence) { return sequence; },\n      peg$c142 = /^[^\\0-\\x1F\"\\\\]/,\n      peg$c143 = peg$classExpectation([[\"\\0\", \"\\x1F\"], \"\\\"\", \"\\\\\"], true, false),\n      peg$c144 = /^[a-z]/i,\n      peg$c145 = peg$classExpectation([[\"a\", \"z\"]], false, true),\n      peg$c146 = function(firstChar) { return text(); },\n      peg$c147 = function(firstChar, chars) { return firstChar + ((chars && flatten(chars)) || ''); },\n      peg$c148 = /^[_a-z0-9\\-]/i,\n      peg$c149 = peg$classExpectation([\"_\", [\"a\", \"z\"], [\"0\", \"9\"], \"-\"], false, true),\n      peg$c150 = peg$otherExpectation(\"whitespaces with optional line breaks\"),\n      peg$c151 = /^[ \\t\\n\\r]/,\n      peg$c152 = peg$classExpectation([\" \", \"\\t\", \"\\n\", \"\\r\"], false, false),\n      peg$c153 = peg$otherExpectation(\"whitespaces\"),\n      peg$c154 = /^[ \\t]/,\n      peg$c155 = peg$classExpectation([\" \", \"\\t\"], false, false),\n      peg$c156 = peg$otherExpectation(\"new line\"),\n      peg$c157 = \"\\n\",\n      peg$c158 = peg$literalExpectation(\"\\n\", false),\n      peg$c159 = \"\\r\\n\",\n      peg$c160 = peg$literalExpectation(\"\\r\\n\", false),\n      peg$c161 = \"\\r\",\n      peg$c162 = peg$literalExpectation(\"\\r\", false),\n      peg$c163 = \"\\f\",\n      peg$c164 = peg$literalExpectation(\"\\f\", false),\n      peg$c165 = /^[0-9]/,\n      peg$c166 = peg$classExpectation([[\"0\", \"9\"]], false, false),\n      peg$c167 = /^[0-9a-f]/i,\n      peg$c168 = peg$classExpectation([[\"0\", \"9\"], [\"a\", \"f\"]], false, true),\n\n      peg$currPos          = 0,\n      peg$savedPos         = 0,\n      peg$posDetailsCache  = [{ line: 1, column: 1 }],\n      peg$maxFailPos       = 0,\n      peg$maxFailExpected  = [],\n      peg$silentFails      = 0,\n\n      peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos], p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line:   details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n      return details;\n    }\n  }\n\n  function peg$computeLocation(startPos, endPos) {\n    var startPosDetails = peg$computePosDetails(startPos),\n        endPosDetails   = peg$computePosDetails(endPos);\n\n    return {\n      start: {\n        offset: startPos,\n        line:   startPosDetails.line,\n        column: startPosDetails.column\n      },\n      end: {\n        offset: endPos,\n        line:   endPosDetails.line,\n        column: endPosDetails.column\n      }\n    };\n  }\n\n  function peg$fail(expected) {\n    if (peg$currPos < peg$maxFailPos) { return; }\n\n    if (peg$currPos > peg$maxFailPos) {\n      peg$maxFailPos = peg$currPos;\n      peg$maxFailExpected = [];\n    }\n\n    peg$maxFailExpected.push(expected);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$parsestart() {\n    var s0, s1, s2, s3;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parsews();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsetop_level_statement();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsetop_level_statement();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsews();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c1(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c0); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsetop_level_statement() {\n    var s0, s1, s2, s3;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parseconst_statement();\n    if (s1 === peg$FAILED) {\n      s1 = peg$parsedeclaration();\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenl();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsews();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c3(s1);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c2); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsestatement() {\n    var s0, s1, s2, s3;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parsenamed_data_block();\n    if (s1 === peg$FAILED) {\n      s1 = peg$parsedata_statement();\n      if (s1 === peg$FAILED) {\n        s1 = peg$parseproperty_statement();\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenl();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsews();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c3(s1);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c4); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsedeclaration() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8;\n\n    s0 = peg$currPos;\n    s1 = peg$parsedeclaration_type();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parse_();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsename();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parse_();\n          if (s4 !== peg$FAILED) {\n            s5 = peg$currPos;\n            s6 = peg$parsedeclaration_verb();\n            if (s6 !== peg$FAILED) {\n              s7 = peg$parse_();\n              if (s7 !== peg$FAILED) {\n                s8 = peg$parsename();\n                if (s8 !== peg$FAILED) {\n                  peg$savedPos = s5;\n                  s6 = peg$c5(s1, s3, s6, s8);\n                  s5 = s6;\n                } else {\n                  peg$currPos = s5;\n                  s5 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s5;\n                s5 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n            if (s5 === peg$FAILED) {\n              s5 = null;\n            }\n            if (s5 !== peg$FAILED) {\n              s6 = peg$parse_();\n              if (s6 !== peg$FAILED) {\n                s7 = peg$parsedata_block();\n                if (s7 !== peg$FAILED) {\n                  peg$savedPos = s0;\n                  s1 = peg$c6(s1, s3, s5, s7);\n                  s0 = s1;\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedeclaration_type() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 12).toLowerCase() === peg$c7) {\n      s1 = input.substr(peg$currPos, 12);\n      peg$currPos += 12;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c8); }\n    }\n    if (s1 === peg$FAILED) {\n      if (input.substr(peg$currPos, 9).toLowerCase() === peg$c9) {\n        s1 = input.substr(peg$currPos, 9);\n        peg$currPos += 9;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c10); }\n      }\n      if (s1 === peg$FAILED) {\n        if (input.substr(peg$currPos, 11).toLowerCase() === peg$c11) {\n          s1 = input.substr(peg$currPos, 11);\n          peg$currPos += 11;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c12); }\n        }\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c13(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsedeclaration_verb() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 12).toLowerCase() === peg$c14) {\n      s1 = input.substr(peg$currPos, 12);\n      peg$currPos += 12;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c15); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c16(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsenamed_data_block() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsename();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parse_();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsenamed_arguments_list();\n        if (s3 === peg$FAILED) {\n          s3 = null;\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parse_();\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsedata_block();\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c17(s1, s3, s5);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedata_block() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsedata_value_type();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parse_();\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parseproperty_statement();\n        if (s5 !== peg$FAILED) {\n          peg$savedPos = s3;\n          s4 = peg$c18(s1, s5);\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parse_();\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parseproperty_statement();\n          if (s5 !== peg$FAILED) {\n            peg$savedPos = s3;\n            s4 = peg$c18(s1, s5);\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsebegin_block();\n        if (s3 !== peg$FAILED) {\n          s4 = [];\n          s5 = peg$parsestatement();\n          while (s5 !== peg$FAILED) {\n            s4.push(s5);\n            s5 = peg$parsestatement();\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parseend_block();\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c19(s1, s2, s4);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsebegin_block() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (s1 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 123) {\n        s2 = peg$c20;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c21); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsews();\n        if (s3 !== peg$FAILED) {\n          s1 = [s1, s2, s3];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseend_block() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsews();\n    if (s1 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 125) {\n        s2 = peg$c22;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c23); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parse_();\n        if (s3 !== peg$FAILED) {\n          s1 = [s1, s2, s3];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseconst_statement() {\n    var s0, s1, s2, s3, s4, s5;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parsename();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parse_();\n      if (s2 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 61) {\n          s3 = peg$c25;\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c26); }\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parse_();\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsevalue();\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c27(s1, s5);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c24); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseproperty_statement() {\n    var s0, s1, s2, s3, s4;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 64) {\n      s1 = peg$c29;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c30); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsename();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parse_();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseproperty_arguments_list();\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c31(s2, s4);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c28); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseproperty_arguments_list() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 40) {\n      s1 = peg$c33;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c34); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseproperty_argument();\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        s4 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 44) {\n          s5 = peg$c35;\n          peg$currPos++;\n        } else {\n          s5 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c36); }\n        }\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parse_();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parseproperty_argument();\n            if (s7 !== peg$FAILED) {\n              peg$savedPos = s4;\n              s5 = peg$c37(s2, s7);\n              s4 = s5;\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s4;\n          s4 = peg$FAILED;\n        }\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          s4 = peg$currPos;\n          if (input.charCodeAt(peg$currPos) === 44) {\n            s5 = peg$c35;\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c36); }\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = peg$parse_();\n            if (s6 !== peg$FAILED) {\n              s7 = peg$parseproperty_argument();\n              if (s7 !== peg$FAILED) {\n                peg$savedPos = s4;\n                s5 = peg$c37(s2, s7);\n                s4 = s5;\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n        }\n        if (s3 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s4 = peg$c38;\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c39); }\n          }\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c40(s2, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c32); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseproperty_argument() {\n    var s0, s1, s2, s3;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsevalue();\n      if (s2 === peg$FAILED) {\n        s2 = peg$parsename();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parse_();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c42(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c41); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsenamed_arguments_list() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 40) {\n      s1 = peg$c33;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c34); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenamed_argument();\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        s4 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 44) {\n          s5 = peg$c35;\n          peg$currPos++;\n        } else {\n          s5 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c36); }\n        }\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parse_();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsenamed_argument();\n            if (s7 !== peg$FAILED) {\n              peg$savedPos = s4;\n              s5 = peg$c37(s2, s7);\n              s4 = s5;\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s4;\n          s4 = peg$FAILED;\n        }\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          s4 = peg$currPos;\n          if (input.charCodeAt(peg$currPos) === 44) {\n            s5 = peg$c35;\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c36); }\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = peg$parse_();\n            if (s6 !== peg$FAILED) {\n              s7 = peg$parsenamed_argument();\n              if (s7 !== peg$FAILED) {\n                peg$savedPos = s4;\n                s5 = peg$c37(s2, s7);\n                s4 = s5;\n              } else {\n                peg$currPos = s4;\n                s4 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n        }\n        if (s3 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 41) {\n            s4 = peg$c38;\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c39); }\n          }\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c40(s2, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c43); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsenamed_argument() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsename();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parse_();\n        if (s3 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 58) {\n            s4 = peg$c45;\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c46); }\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parse_();\n            if (s5 !== peg$FAILED) {\n              s6 = peg$parsevalue();\n              if (s6 !== peg$FAILED) {\n                s7 = peg$parse_();\n                if (s7 !== peg$FAILED) {\n                  peg$savedPos = s0;\n                  s1 = peg$c47(s2, s6);\n                  s0 = s1;\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c44); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsedata_statement() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11, s12;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parsename();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parse_();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsenamed_arguments_list();\n        if (s3 === peg$FAILED) {\n          s3 = null;\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parse_();\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsedata_value_type();\n            if (s5 === peg$FAILED) {\n              s5 = null;\n            }\n            if (s5 !== peg$FAILED) {\n              s6 = [];\n              s7 = peg$currPos;\n              s8 = peg$parse_();\n              if (s8 !== peg$FAILED) {\n                s9 = peg$parseproperty_statement();\n                if (s9 !== peg$FAILED) {\n                  peg$savedPos = s7;\n                  s8 = peg$c49(s1, s3, s5, s9);\n                  s7 = s8;\n                } else {\n                  peg$currPos = s7;\n                  s7 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s7;\n                s7 = peg$FAILED;\n              }\n              while (s7 !== peg$FAILED) {\n                s6.push(s7);\n                s7 = peg$currPos;\n                s8 = peg$parse_();\n                if (s8 !== peg$FAILED) {\n                  s9 = peg$parseproperty_statement();\n                  if (s9 !== peg$FAILED) {\n                    peg$savedPos = s7;\n                    s8 = peg$c49(s1, s3, s5, s9);\n                    s7 = s8;\n                  } else {\n                    peg$currPos = s7;\n                    s7 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s7;\n                  s7 = peg$FAILED;\n                }\n              }\n              if (s6 !== peg$FAILED) {\n                s7 = peg$parse_();\n                if (s7 !== peg$FAILED) {\n                  s8 = peg$parsevalue();\n                  if (s8 === peg$FAILED) {\n                    s8 = null;\n                  }\n                  if (s8 !== peg$FAILED) {\n                    s9 = [];\n                    s10 = peg$currPos;\n                    s11 = peg$parse_();\n                    if (s11 !== peg$FAILED) {\n                      s12 = peg$parseproperty_statement();\n                      if (s12 !== peg$FAILED) {\n                        peg$savedPos = s10;\n                        s11 = peg$c50(s1, s3, s5, s6, s8, s12);\n                        s10 = s11;\n                      } else {\n                        peg$currPos = s10;\n                        s10 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s10;\n                      s10 = peg$FAILED;\n                    }\n                    while (s10 !== peg$FAILED) {\n                      s9.push(s10);\n                      s10 = peg$currPos;\n                      s11 = peg$parse_();\n                      if (s11 !== peg$FAILED) {\n                        s12 = peg$parseproperty_statement();\n                        if (s12 !== peg$FAILED) {\n                          peg$savedPos = s10;\n                          s11 = peg$c50(s1, s3, s5, s6, s8, s12);\n                          s10 = s11;\n                        } else {\n                          peg$currPos = s10;\n                          s10 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s10;\n                        s10 = peg$FAILED;\n                      }\n                    }\n                    if (s9 !== peg$FAILED) {\n                      peg$savedPos = s0;\n                      s1 = peg$c51(s1, s3, s5, s6, s8, s9);\n                      s0 = s1;\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c48); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsedata_value_type() {\n    var s0, s1, s2, s3;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 58) {\n      s1 = peg$c45;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c46); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parse_();\n      if (s2 !== peg$FAILED) {\n        if (input.substr(peg$currPos, 7) === peg$c53) {\n          s3 = peg$c53;\n          peg$currPos += 7;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c54); }\n        }\n        if (s3 === peg$FAILED) {\n          if (input.substr(peg$currPos, 5) === peg$c55) {\n            s3 = peg$c55;\n            peg$currPos += 5;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c56); }\n          }\n          if (s3 === peg$FAILED) {\n            if (input.substr(peg$currPos, 5) === peg$c57) {\n              s3 = peg$c57;\n              peg$currPos += 5;\n            } else {\n              s3 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c58); }\n            }\n            if (s3 === peg$FAILED) {\n              if (input.substr(peg$currPos, 4) === peg$c59) {\n                s3 = peg$c59;\n                peg$currPos += 4;\n              } else {\n                s3 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c60); }\n              }\n              if (s3 === peg$FAILED) {\n                if (input.substr(peg$currPos, 6) === peg$c61) {\n                  s3 = peg$c61;\n                  peg$currPos += 6;\n                } else {\n                  s3 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c62); }\n                }\n                if (s3 === peg$FAILED) {\n                  if (input.substr(peg$currPos, 6) === peg$c63) {\n                    s3 = peg$c63;\n                    peg$currPos += 6;\n                  } else {\n                    s3 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c64); }\n                  }\n                  if (s3 === peg$FAILED) {\n                    if (input.substr(peg$currPos, 5) === peg$c65) {\n                      s3 = peg$c65;\n                      peg$currPos += 5;\n                    } else {\n                      s3 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c66); }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c67(s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c52); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsevalue() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsenull();\n      if (s2 === peg$FAILED) {\n        s2 = peg$parsefalse();\n        if (s2 === peg$FAILED) {\n          s2 = peg$parsetrue();\n          if (s2 === peg$FAILED) {\n            s2 = peg$parsevalue_array();\n            if (s2 === peg$FAILED) {\n              s2 = peg$parsevalue_expression();\n              if (s2 === peg$FAILED) {\n                s2 = peg$parsestring();\n              }\n            }\n          }\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parse_();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c68(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsefalse() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 5) === peg$c69) {\n      s1 = peg$c69;\n      peg$currPos += 5;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c70); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c71();\n    }\n    s0 = s1;\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 2) === peg$c72) {\n        s1 = peg$c72;\n        peg$currPos += 2;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c73); }\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c71();\n      }\n      s0 = s1;\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        if (input.substr(peg$currPos, 3) === peg$c74) {\n          s1 = peg$c74;\n          peg$currPos += 3;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c75); }\n        }\n        if (s1 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c71();\n        }\n        s0 = s1;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsetrue() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 4) === peg$c76) {\n      s1 = peg$c76;\n      peg$currPos += 4;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c77); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c78();\n    }\n    s0 = s1;\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 2) === peg$c79) {\n        s1 = peg$c79;\n        peg$currPos += 2;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c80); }\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c78();\n      }\n      s0 = s1;\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        if (input.substr(peg$currPos, 3) === peg$c81) {\n          s1 = peg$c81;\n          peg$currPos += 3;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c82); }\n        }\n        if (s1 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c78();\n        }\n        s0 = s1;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsenull() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 4) === peg$c83) {\n      s1 = peg$c83;\n      peg$currPos += 4;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c84); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c85();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsevalue_expression() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenumber_expression();\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c86(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsevalue_array() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parsebegin_array();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$currPos;\n      s3 = peg$parsevalue();\n      if (s3 !== peg$FAILED) {\n        s4 = [];\n        s5 = peg$currPos;\n        s6 = peg$parsearray_value_separator();\n        if (s6 !== peg$FAILED) {\n          s7 = peg$parsevalue();\n          if (s7 !== peg$FAILED) {\n            peg$savedPos = s5;\n            s6 = peg$c88(s3, s7);\n            s5 = s6;\n          } else {\n            peg$currPos = s5;\n            s5 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s5;\n          s5 = peg$FAILED;\n        }\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$currPos;\n          s6 = peg$parsearray_value_separator();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsevalue();\n            if (s7 !== peg$FAILED) {\n              peg$savedPos = s5;\n              s6 = peg$c88(s3, s7);\n              s5 = s6;\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s5;\n            s5 = peg$FAILED;\n          }\n        }\n        if (s4 !== peg$FAILED) {\n          peg$savedPos = s2;\n          s3 = peg$c89(s3, s4);\n          s2 = s3;\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s2;\n        s2 = peg$FAILED;\n      }\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseend_array();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c90(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c87); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsebegin_array() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (s1 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 91) {\n        s2 = peg$c91;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c92); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsews();\n        if (s3 !== peg$FAILED) {\n          s1 = [s1, s2, s3];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseend_array() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsews();\n    if (s1 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 44) {\n        s2 = peg$c35;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c36); }\n      }\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsews();\n        if (s3 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 93) {\n            s4 = peg$c93;\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c94); }\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parse_();\n            if (s5 !== peg$FAILED) {\n              s1 = [s1, s2, s3, s4, s5];\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsearray_value_separator() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsews();\n    if (s1 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 44) {\n        s2 = peg$c35;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c36); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsews();\n        if (s3 !== peg$FAILED) {\n          s1 = [s1, s2, s3];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumber_expression() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenumber_term();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parse_();\n      if (s4 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 43) {\n          s5 = peg$c95;\n          peg$currPos++;\n        } else {\n          s5 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c96); }\n        }\n        if (s5 === peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 45) {\n            s5 = peg$c97;\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c98); }\n          }\n        }\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parse_();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsenumber_term();\n            if (s7 !== peg$FAILED) {\n              s4 = [s4, s5, s6, s7];\n              s3 = s4;\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parse_();\n        if (s4 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 43) {\n            s5 = peg$c95;\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c96); }\n          }\n          if (s5 === peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 45) {\n              s5 = peg$c97;\n              peg$currPos++;\n            } else {\n              s5 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c98); }\n            }\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = peg$parse_();\n            if (s6 !== peg$FAILED) {\n              s7 = peg$parsenumber_term();\n              if (s7 !== peg$FAILED) {\n                s4 = [s4, s5, s6, s7];\n                s3 = s4;\n              } else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c99(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumber_term() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenumber_factor();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parse_();\n      if (s4 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 42) {\n          s5 = peg$c100;\n          peg$currPos++;\n        } else {\n          s5 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c101); }\n        }\n        if (s5 === peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 47) {\n            s5 = peg$c102;\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c103); }\n          }\n        }\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parse_();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsenumber_factor();\n            if (s7 !== peg$FAILED) {\n              s4 = [s4, s5, s6, s7];\n              s3 = s4;\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parse_();\n        if (s4 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 42) {\n            s5 = peg$c100;\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c101); }\n          }\n          if (s5 === peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 47) {\n              s5 = peg$c102;\n              peg$currPos++;\n            } else {\n              s5 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c103); }\n            }\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = peg$parse_();\n            if (s6 !== peg$FAILED) {\n              s7 = peg$parsenumber_factor();\n              if (s7 !== peg$FAILED) {\n                s4 = [s4, s5, s6, s7];\n                s3 = s4;\n              } else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c104(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumber_factor() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 40) {\n      s1 = peg$c33;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c34); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parse_();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsevalue_expression();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parse_();\n          if (s4 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 41) {\n              s5 = peg$c38;\n              peg$currPos++;\n            } else {\n              s5 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c39); }\n            }\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c105(s3);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsenumber();\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parseminus();\n        if (s1 === peg$FAILED) {\n          s1 = null;\n        }\n        if (s1 !== peg$FAILED) {\n          s2 = peg$parsename();\n          if (s2 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c106(s1, s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsenumber() {\n    var s0, s1, s2, s3, s4;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parseminus();\n    if (s1 === peg$FAILED) {\n      s1 = null;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseint();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsefrac();\n        if (s3 === peg$FAILED) {\n          s3 = null;\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseexp();\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c108();\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c107); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsedecimal_point() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 46) {\n      s0 = peg$c109;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c110); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigit1_9() {\n    var s0;\n\n    if (peg$c111.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c112); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsee() {\n    var s0;\n\n    if (peg$c113.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c114); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseexp() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = peg$parsee();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseminus();\n      if (s2 === peg$FAILED) {\n        s2 = peg$parseplus();\n      }\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        s4 = peg$parseDIGIT();\n        if (s4 !== peg$FAILED) {\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parseDIGIT();\n          }\n        } else {\n          s3 = peg$FAILED;\n        }\n        if (s3 !== peg$FAILED) {\n          s1 = [s1, s2, s3];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsefrac() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsedecimal_point();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parseDIGIT();\n      if (s3 !== peg$FAILED) {\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parseDIGIT();\n        }\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s1 = [s1, s2];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseint() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$parsezero();\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parsedigit1_9();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parseDIGIT();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parseDIGIT();\n        }\n        if (s2 !== peg$FAILED) {\n          s1 = [s1, s2];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parseminus() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 45) {\n      s0 = peg$c97;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c98); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseplus() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 43) {\n      s0 = peg$c95;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c96); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsezero() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 48) {\n      s0 = peg$c115;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c116); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsestring() {\n    var s0, s1, s2, s3;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parsequotation_mark();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsechar();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsechar();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsequotation_mark();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c118(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c117); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsechar() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9;\n\n    s0 = peg$parseunescaped();\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parseescape();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 34) {\n          s2 = peg$c119;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c120); }\n        }\n        if (s2 === peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 92) {\n            s2 = peg$c121;\n            peg$currPos++;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c122); }\n          }\n          if (s2 === peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 47) {\n              s2 = peg$c102;\n              peg$currPos++;\n            } else {\n              s2 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c103); }\n            }\n            if (s2 === peg$FAILED) {\n              s2 = peg$currPos;\n              if (input.charCodeAt(peg$currPos) === 98) {\n                s3 = peg$c123;\n                peg$currPos++;\n              } else {\n                s3 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c124); }\n              }\n              if (s3 !== peg$FAILED) {\n                peg$savedPos = s2;\n                s3 = peg$c125();\n              }\n              s2 = s3;\n              if (s2 === peg$FAILED) {\n                s2 = peg$currPos;\n                if (input.charCodeAt(peg$currPos) === 102) {\n                  s3 = peg$c126;\n                  peg$currPos++;\n                } else {\n                  s3 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c127); }\n                }\n                if (s3 !== peg$FAILED) {\n                  peg$savedPos = s2;\n                  s3 = peg$c128();\n                }\n                s2 = s3;\n                if (s2 === peg$FAILED) {\n                  s2 = peg$currPos;\n                  if (input.charCodeAt(peg$currPos) === 110) {\n                    s3 = peg$c129;\n                    peg$currPos++;\n                  } else {\n                    s3 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c130); }\n                  }\n                  if (s3 !== peg$FAILED) {\n                    peg$savedPos = s2;\n                    s3 = peg$c131();\n                  }\n                  s2 = s3;\n                  if (s2 === peg$FAILED) {\n                    s2 = peg$currPos;\n                    if (input.charCodeAt(peg$currPos) === 114) {\n                      s3 = peg$c132;\n                      peg$currPos++;\n                    } else {\n                      s3 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c133); }\n                    }\n                    if (s3 !== peg$FAILED) {\n                      peg$savedPos = s2;\n                      s3 = peg$c134();\n                    }\n                    s2 = s3;\n                    if (s2 === peg$FAILED) {\n                      s2 = peg$currPos;\n                      if (input.charCodeAt(peg$currPos) === 116) {\n                        s3 = peg$c135;\n                        peg$currPos++;\n                      } else {\n                        s3 = peg$FAILED;\n                        if (peg$silentFails === 0) { peg$fail(peg$c136); }\n                      }\n                      if (s3 !== peg$FAILED) {\n                        peg$savedPos = s2;\n                        s3 = peg$c137();\n                      }\n                      s2 = s3;\n                      if (s2 === peg$FAILED) {\n                        s2 = peg$currPos;\n                        if (input.charCodeAt(peg$currPos) === 117) {\n                          s3 = peg$c138;\n                          peg$currPos++;\n                        } else {\n                          s3 = peg$FAILED;\n                          if (peg$silentFails === 0) { peg$fail(peg$c139); }\n                        }\n                        if (s3 !== peg$FAILED) {\n                          s4 = peg$currPos;\n                          s5 = peg$currPos;\n                          s6 = peg$parseHEXDIG();\n                          if (s6 !== peg$FAILED) {\n                            s7 = peg$parseHEXDIG();\n                            if (s7 !== peg$FAILED) {\n                              s8 = peg$parseHEXDIG();\n                              if (s8 !== peg$FAILED) {\n                                s9 = peg$parseHEXDIG();\n                                if (s9 !== peg$FAILED) {\n                                  s6 = [s6, s7, s8, s9];\n                                  s5 = s6;\n                                } else {\n                                  peg$currPos = s5;\n                                  s5 = peg$FAILED;\n                                }\n                              } else {\n                                peg$currPos = s5;\n                                s5 = peg$FAILED;\n                              }\n                            } else {\n                              peg$currPos = s5;\n                              s5 = peg$FAILED;\n                            }\n                          } else {\n                            peg$currPos = s5;\n                            s5 = peg$FAILED;\n                          }\n                          if (s5 !== peg$FAILED) {\n                            s4 = input.substring(s4, peg$currPos);\n                          } else {\n                            s4 = s5;\n                          }\n                          if (s4 !== peg$FAILED) {\n                            peg$savedPos = s2;\n                            s3 = peg$c140(s4);\n                            s2 = s3;\n                          } else {\n                            peg$currPos = s2;\n                            s2 = peg$FAILED;\n                          }\n                        } else {\n                          peg$currPos = s2;\n                          s2 = peg$FAILED;\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c141(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parseescape() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 92) {\n      s0 = peg$c121;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c122); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsequotation_mark() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 34) {\n      s0 = peg$c119;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c120); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseunescaped() {\n    var s0;\n\n    if (peg$c142.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c143); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsename() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9;\n\n    s0 = peg$currPos;\n    if (peg$c144.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c145); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 46) {\n        s4 = peg$c109;\n        peg$currPos++;\n      } else {\n        s4 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c110); }\n      }\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsename_char();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$currPos;\n          if (input.charCodeAt(peg$currPos) === 46) {\n            s7 = peg$c109;\n            peg$currPos++;\n          } else {\n            s7 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c110); }\n          }\n          if (s7 !== peg$FAILED) {\n            s8 = [];\n            s9 = peg$parsename_char();\n            if (s9 !== peg$FAILED) {\n              while (s9 !== peg$FAILED) {\n                s8.push(s9);\n                s9 = peg$parsename_char();\n              }\n            } else {\n              s8 = peg$FAILED;\n            }\n            if (s8 !== peg$FAILED) {\n              peg$savedPos = s6;\n              s7 = peg$c146(s1);\n              s6 = s7;\n            } else {\n              peg$currPos = s6;\n              s6 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s6;\n            s6 = peg$FAILED;\n          }\n          if (s6 === peg$FAILED) {\n            s6 = null;\n          }\n          if (s6 !== peg$FAILED) {\n            s4 = [s4, s5, s6];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        if (input.charCodeAt(peg$currPos) === 46) {\n          s4 = peg$c109;\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c110); }\n        }\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsename_char();\n          if (s5 !== peg$FAILED) {\n            s6 = peg$currPos;\n            if (input.charCodeAt(peg$currPos) === 46) {\n              s7 = peg$c109;\n              peg$currPos++;\n            } else {\n              s7 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c110); }\n            }\n            if (s7 !== peg$FAILED) {\n              s8 = [];\n              s9 = peg$parsename_char();\n              if (s9 !== peg$FAILED) {\n                while (s9 !== peg$FAILED) {\n                  s8.push(s9);\n                  s9 = peg$parsename_char();\n                }\n              } else {\n                s8 = peg$FAILED;\n              }\n              if (s8 !== peg$FAILED) {\n                peg$savedPos = s6;\n                s7 = peg$c146(s1);\n                s6 = s7;\n              } else {\n                peg$currPos = s6;\n                s6 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s6;\n              s6 = peg$FAILED;\n            }\n            if (s6 === peg$FAILED) {\n              s6 = null;\n            }\n            if (s6 !== peg$FAILED) {\n              s4 = [s4, s5, s6];\n              s3 = s4;\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c147(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsename_char() {\n    var s0;\n\n    if (peg$c148.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c149); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsews() {\n    var s0, s1;\n\n    peg$silentFails++;\n    s0 = [];\n    if (peg$c151.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c152); }\n    }\n    while (s1 !== peg$FAILED) {\n      s0.push(s1);\n      if (peg$c151.test(input.charAt(peg$currPos))) {\n        s1 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c152); }\n      }\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c150); }\n    }\n\n    return s0;\n  }\n\n  function peg$parse_() {\n    var s0, s1;\n\n    peg$silentFails++;\n    s0 = [];\n    if (peg$c154.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c155); }\n    }\n    while (s1 !== peg$FAILED) {\n      s0.push(s1);\n      if (peg$c154.test(input.charAt(peg$currPos))) {\n        s1 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c155); }\n      }\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c153); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsenl() {\n    var s0, s1, s2;\n\n    peg$silentFails++;\n    s0 = peg$currPos;\n    s1 = peg$parse_();\n    if (s1 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 10) {\n        s2 = peg$c157;\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c158); }\n      }\n      if (s2 !== peg$FAILED) {\n        s1 = [s1, s2];\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parse_();\n      if (s1 !== peg$FAILED) {\n        if (input.substr(peg$currPos, 2) === peg$c159) {\n          s2 = peg$c159;\n          peg$currPos += 2;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c160); }\n        }\n        if (s2 !== peg$FAILED) {\n          s1 = [s1, s2];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parse_();\n        if (s1 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 13) {\n            s2 = peg$c161;\n            peg$currPos++;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c162); }\n          }\n          if (s2 !== peg$FAILED) {\n            s1 = [s1, s2];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n        if (s0 === peg$FAILED) {\n          s0 = peg$currPos;\n          s1 = peg$parse_();\n          if (s1 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 12) {\n              s2 = peg$c163;\n              peg$currPos++;\n            } else {\n              s2 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c164); }\n            }\n            if (s2 !== peg$FAILED) {\n              s1 = [s1, s2];\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        }\n      }\n    }\n    peg$silentFails--;\n    if (s0 === peg$FAILED) {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c156); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseDIGIT() {\n    var s0;\n\n    if (peg$c165.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c166); }\n    }\n\n    return s0;\n  }\n\n  function peg$parseHEXDIG() {\n    var s0;\n\n    if (peg$c167.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c168); }\n    }\n\n    return s0;\n  }\n\n\n    var ctx = options.ctx;\n\n    function readConstant(name) {\n      return ctx.hasOption(name) ? ctx.readOption(name) : name;\n    }\n\n    function writeConstant(name, value) {\n      if (!ctx.hasOption(name)) { // do not overwrite existing constants!\n        ctx.writeOption(name, value);\n      }\n    }\n\n    function compact (arr) {\n      return arr.filter(function (element) {\n        return Boolean(element);\n      });\n    }\n\n    function flatten (values) {\n      return compact(values).reduce(function (acc, val) {\n        return acc + (Array.isArray(val) ? flatten(val) : val);\n      }, '');\n    }\n\n    function copyAsAnnotation(target, propertyCall) {\n      if (!target.annotations) target.annotations = [];\n      target.annotations.push(propertyCall);\n    }\n\n\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$fail(peg$endExpectation());\n    }\n\n    throw peg$buildStructuredError(\n      peg$maxFailExpected,\n      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n      peg$maxFailPos < input.length\n        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n    );\n  }\n}\n\n\nconst SyntaxError = peg$SyntaxError;\nconst parse = peg$parse;\n\nexport {\n  SyntaxError,\n  parse\n};\n","/**\n * Creates an array with all falsey values removed. The values `false`, `null`,\n * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to compact.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * _.compact([0, 1, false, 2, '', 3]);\n * // => [1, 2, 3]\n */\nfunction compact(array) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (value) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = compact;\n","\nexport const DATA = 'data';\nexport const DATA_BLOCK = 'dataBlock';\nexport const DECLARATION = 'declaration';\nexport const PROPERTY_CALL = 'propertyCall';\n","/* eslint no-param-reassign: 0 */\nimport { get } from '@picimo/utils'; // eslint-disable-line\n\nimport { PROPERTY_CALL } from '../constants';\n\n/** @private */\nexport const findPropertyCall = (statements, withName, callback) => {\n  if (statements) {\n    const found = statements.find(({ type, name }) => type === PROPERTY_CALL && name === withName);\n    if (found !== undefined && callback) {\n      callback(found);\n    }\n    return found;\n  }\n};\n\n/** @private */\nexport const hasPropertyCall = (statements, withName) => Boolean(findPropertyCall(statements, withName));\n\n/** @private */\nexport const firstPropertyCallArg = (statements, name) => get(findPropertyCall(statements, name), 'args[0]');\n\n/** @private */\nexport const setByFirstPropertyCallArg = (target, targetKey, statements, name) => findPropertyCall(statements, name || targetKey, (data) => {\n  target[targetKey] = get(data, 'args[0]'); // eslint-disable-line\n});\n\n/** @private */\nexport const readFlag = (flag, defValue) => {\n  if (flag == null) return defValue;\n  if (flag.args && flag.args.length === 1) return Boolean(flag.args[0]);\n  return true;\n};\n\n/** @private */\nexport const setFlagByPropertyCall = (to, statements, name) => {\n  const flag = findPropertyCall(statements, name);\n  if (flag !== undefined) {\n    to[name] = readFlag(flag); // eslint-disable-line\n  }\n};\n\n/** @private */\nexport const readPropertyFlag = (statements, name, defValue) => readFlag(findPropertyCall(statements, name), defValue);\n\n/** @private */\nexport const findNamedArgument = (args, withName, callback) => args && args.find(({ name, value }) => {\n  const found = name === withName;\n\n  if (found && callback) {\n    callback(value);\n  }\n\n  return found;\n});\n\n/** @private */\nexport const setByNamedArgument = (args, target, name) => findNamedArgument(args, name, (value) => {\n  target[name] = value;\n});\n\n/** @private */\nexport const findData = (args, withName, callback) => args && args.find((data) => {\n  const found = data.name === withName;\n\n  if (found && callback) {\n    callback(data);\n  }\n\n  return found;\n});\n\n/** @private */\nexport const attachDataValue = (to, from, name) => findData(from, name, ({ value }) => Object.assign(to, { [name]: value }));\n\n/** @private */\nexport const attachDataValues = (to, from, names) => names.forEach(attachDataValue.bind(null, to, from));\n\n/** @private */\nexport const parseVoDefaultValues = target => (name, value) => {\n  if (value !== undefined) {\n    if (Array.isArray(value)) {\n      value.forEach((val, idx) => {\n        target[`${name}${idx}`] = val;\n      });\n    } else {\n      target[name] = value;\n    }\n  }\n};\n\n\n/** @private */\nexport const readOption = (...options) => (key, defVal = undefined) => options.reduce((curVal, opt) => {\n  if (typeof opt === 'function') {\n    const val = opt(key);\n    return val !== undefined ? val : curVal;\n  }\n  return opt && key in opt ? opt[key] : curVal;\n}, defVal);\n\n/** @private */\nexport const assignOptions = (to, options, read, substitute) => {\n  options.forEach((key) => {\n    let val = read(key);\n    if (substitute && typeof val === 'string') {\n      val = substitute(val);\n    }\n    if (val !== undefined) {\n      to[key] = val;\n    }\n  });\n  return to;\n};\n","import compact from 'lodash/compact';\n\nimport { VODescriptor } from '@picimo/core'; // eslint-disable-line\n\nimport {\n  findNamedArgument,\n  findPropertyCall,\n  firstPropertyCallArg,\n  hasPropertyCall,\n  parseVoDefaultValues,\n} from './utils';\n\nimport {\n  DATA,\n  DATA_BLOCK,\n} from '../constants';\n\n\n/** @private */\nconst DEFAULT_ATTR_TYPE = 'float32';\n\n\n/** @private */\nconst create = ({ declaration, ctx, options }) => {\n  const instanceOf = declaration.verb === 'instantiates' ? ctx.create(declaration.subject) : undefined;\n  const { voDescriptor } = declaration;\n  const proto = options || voDescriptor.proto;\n  return new VODescriptor({\n    ...voDescriptor,\n    instanceOf,\n    proto: typeof proto === 'string' ? ctx.readOption(proto) : proto,\n  });\n};\n\n\n/** @private */\nconst transform = (parsedTree) => {\n  const voNew = {};\n  const aliases = {};\n  const parseVoNewDefaults = parseVoDefaultValues(voNew);\n  const out = {\n    // _parsedTree: parsedTree,\n    voDescriptor: {\n      vertexCount: firstPropertyCallArg(parsedTree.data, 'vertexCount'),\n      attributes: compact(parsedTree.data.filter(({ type }) => type === DATA || type === DATA_BLOCK).map((statement) => {\n        const aliasAnnotation = findPropertyCall(statement.annotations, 'alias');\n        if (aliasAnnotation && aliasAnnotation.args && typeof aliasAnnotation.args[0] === 'string') {\n          aliases[statement.name] = aliasAnnotation.args[0];  // eslint-disable-line\n          return null;\n        }\n        const attr = {\n          name: statement.name,\n        };\n        if (statement.type === DATA) {\n          attr.type = statement.valueType || DEFAULT_ATTR_TYPE;\n          findNamedArgument(statement.args, 'size', (size) => {\n            attr.size = size;\n          });\n        } else if (statement.type === DATA_BLOCK) {\n          attr.type = statement.dataType || DEFAULT_ATTR_TYPE;\n          attr.scalars = statement.data.filter(({ type }) => type === DATA).map(({ name, value }) => {\n            parseVoNewDefaults(name, value);\n            return name;\n          });\n          attr.size = attr.scalars.length;\n        }\n        if (hasPropertyCall(statement.annotations, 'uniform')) {\n          attr.uniform = true;\n        }\n        parseVoNewDefaults(statement.name, statement.value);\n        if (aliasAnnotation) {\n          findNamedArgument(statement.args, 'offset', (offset) => {\n            attr.offset = offset;\n          });\n          aliases[statement.name] = attr;  // eslint-disable-line\n          return null;\n        }\n        return attr;\n      })),\n    },\n  };\n  if (Object.keys(aliases).length) {\n    out.voDescriptor.aliases = aliases;\n  }\n  if (Object.keys(voNew).length) {\n    out.voNew = voNew;\n  }\n  findPropertyCall(parsedTree.data, 'prototype', ({ args }) => {\n    out.voDescriptor.proto = args[0]; // eslint-disable-line\n  });\n  return out;\n};\n\nexport {\n  create,\n  transform,\n};\n","import {\n  IndexedPrimitive,\n  ElementIndexArray,\n} from '@picimo/core'; // eslint-disable-line\n\nimport {\n  attachDataValues,\n  firstPropertyCallArg,\n  hasPropertyCall,\n} from './utils';\n\n/** @private */\nconst create = ({ declaration, options }) => {\n  if (declaration.generate) {\n    return new IndexedPrimitive(\n      declaration.primitiveType,\n      ElementIndexArray.Generate(\n        options.capacity,\n        declaration.indices,\n        declaration.stride,\n        declaration.offset,\n      ),\n    );\n  }\n  console.warn('TODO implementation: Primitive with(out) @generate(no)'); // eslint-disable-line\n};\n\n/** @private */\nconst transform = (parsedTree) => {\n  const { data } = parsedTree;\n  const out = {\n    // _parsedTree: parsedTree,\n    primitiveType: firstPropertyCallArg(data, 'type'),\n  };\n  if (hasPropertyCall(data, 'generate')) {\n    out.generate = true;\n  }\n  attachDataValues(out, data, [\n    'stride',\n    'offset',\n    'indices',\n  ]);\n  return out;\n};\n\nexport {\n  create,\n  transform,\n};\n","/* eslint no-param-reassign: 0 */\nimport { SpriteGroup } from '@picimo/core'; // eslint-disable-line\n\nimport {\n  assignOptions,\n  attachDataValue,\n  findData,\n  findPropertyCall,\n  firstPropertyCallArg,\n  hasPropertyCall,\n  readFlag,\n  readOption,\n  setByFirstPropertyCallArg,\n  setByNamedArgument,\n  setFlagByPropertyCall,\n} from './utils';\n\nimport { DATA_BLOCK } from '../constants';\n\n/** @private */\nconst createPrimitive = (ctx, primitive, capacity) => {\n  switch (typeof primitive) {\n    case 'string':\n      return ctx.create(primitive, { capacity });\n    default:\n      return primitive;\n  }\n};\n\n/** @private */\nconst create = ({ ctx, declaration, options = {} }) => {\n  const { voDescriptor: vodKey } = declaration;\n\n  // parse and merge options\n  // ----------------------------------------------------\n  const vodOptions = options[vodKey];\n  const vodDeclaration = declaration[vodKey];\n  const ctxReadOption = ctx.readOption.bind(ctx);\n\n  const spriteGroupOptions = assignOptions(\n    {}, [\n      'autotouch',\n      'capacity',\n      'doubleBuffer',\n      'maxAllocVOSize',\n      'usage',\n    ],\n    readOption(declaration, vodDeclaration, options, vodOptions),\n  );\n\n  assignOptions(\n    spriteGroupOptions, [\n      'setSize',\n      'setTexCoordsByTexture',\n    ],\n    readOption(declaration, vodDeclaration, options, vodOptions),\n    readOption(ctxReadOption, options, vodOptions),\n  );\n\n  // create Primitive\n  // ----------------------------------------------------\n  spriteGroupOptions.primitive = createPrimitive(ctx, declaration.primitive, spriteGroupOptions.capacity);\n\n  // IV. create SpriteGroup\n  // ----------------------------------------------------\n\n  assignOptions(\n    spriteGroupOptions, [\n      'vertexShader',\n      'fragmentShader',\n      'shaderProgram',\n    ],\n    readOption(declaration, options),\n    readOption(ctxReadOption),\n  );\n\n  // create VODescriptor\n  // ----------------------------------------------------\n  const { prototype } = assignOptions(\n    {}, [\n      'prototype',\n    ],\n    readOption(vodDeclaration, vodOptions),\n    readOption(ctxReadOption, options),\n  );\n\n  const vod = ctx.create(vodKey, prototype);\n\n  // create SpriteGroup\n  // ----------------------------------------------------\n  return new SpriteGroup(vod, spriteGroupOptions);\n};\n\n/** @private */\nconst readVoPoolOptions = (data) => {\n  const out = {};\n\n  findPropertyCall(data, 'dynamic', (dynamic) => {\n    out.usage = readFlag(dynamic, true) ? 'dynamic' : 'static';\n  });\n\n  setFlagByPropertyCall(out, data, 'doubleBuffer');\n  setFlagByPropertyCall(out, data, 'autotouch');\n  setFlagByPropertyCall(out, data, 'textured');\n\n  setByFirstPropertyCallArg(out, 'setSize', data);\n  setByFirstPropertyCallArg(out, 'setTexCoordsByTexture', data);\n  setByFirstPropertyCallArg(out, 'prototype', data);\n\n  attachDataValue(out, data, 'capacity');\n  attachDataValue(out, data, 'maxAllocVOSize');\n\n  findData(data, 'textures', (textures) => {\n    if (textures && textures.type === DATA_BLOCK) {\n      const tex = {};\n      out.textureMap = tex;\n      textures.data.forEach(({\n        name,\n        value,\n        annotations,\n        args,\n      }) => {\n        const hints = {};\n        tex[name] = {\n          hints,\n          src: value,\n          type: (hasPropertyCall(annotations, 'atlas') ? 'atlas' : 'texture'),\n        };\n        setByNamedArgument(args, hints, 'flipY');\n        setByNamedArgument(args, hints, 'repeatable');\n        setByNamedArgument(args, hints, 'premultiplyAlpha');\n        setByNamedArgument(args, hints, 'nearest');\n      });\n    }\n  });\n\n  return out;\n};\n\n\n/** @private */\nconst transform = (parsedTree) => {\n  const { data } = parsedTree;\n  const voDescriptor = firstPropertyCallArg(data, 'vertexObject');\n  const out = {\n    voDescriptor,\n    // _parsedTree: parsedTree,\n    primitive: firstPropertyCallArg(data, 'primitive'),\n  };\n  setByFirstPropertyCallArg(out, 'vertexShader', data);\n  setByFirstPropertyCallArg(out, 'fragmentShader', data);\n  setByFirstPropertyCallArg(out, 'shaderProgram', data);\n  Object.assign(out, readVoPoolOptions(data));\n  if (voDescriptor) {\n    findData(data, voDescriptor, (dataBlock) => {\n      Object.assign(out, {\n        [voDescriptor]: readVoPoolOptions(dataBlock.data, {}),\n      });\n    });\n  }\n  return out;\n};\n\nexport {\n  create,\n  transform,\n};\n","import has from 'lodash/has';\nimport set from 'lodash/set';\nimport loglevel from 'loglevel';\nimport { get, pick } from '@picimo/utils'; // eslint-disable-line\n\nimport { parse } from './picimoParser';\n\nimport { VertexObject, Primitive, SpriteGroup } from './factories';\n\nimport { DECLARATION } from './constants';\n\nconst VERTEX_OBJECT = 'vertexobject';\nconst PRIMITIVE = 'primitive';\nconst SPRITE_GROUP = 'spritegroup';\n\n/** @private */\nconst FACTORIES = {\n  [VERTEX_OBJECT]: VertexObject,\n  [PRIMITIVE]: Primitive,\n  [SPRITE_GROUP]: SpriteGroup,\n};\n\n/** @private */\nconst log = loglevel.getLogger('picimo.toolkit.Context');\n\n/** @private */\nconst getFactory = (type) => {\n  const factory = FACTORIES[type];\n  if (!type) {\n    log.error('Context: unknown declaration type:', type);\n  }\n  return factory;\n};\n\n\n/** @private */\nconst transformDeclaration = (item) => {\n  const factory = getFactory(item.declarationType);\n  if (factory) {\n    return factory.transform(item);\n  }\n  return item;\n};\n\n\n/** @private */\nconst createInstanceFromDeclaration = (ctx, name, options) => {\n  const declaration = get(ctx.declaration, name);\n  if (!declaration) return;\n\n  const factory = getFactory(declaration.declarationType);\n  if (factory) {\n    return factory.create({\n      ctx,\n      name,\n      declaration,\n      options,\n    });\n  }\n\n  return null;\n};\n\n/** @private */\nconst pickDeclaration = pick([\n  'declarationType',\n  'verb',\n  'subject',\n]);\n\nclass Context {\n  constructor(config) {\n    this.config = Object.assign({}, config);\n    this.declaration = {};\n  }\n\n  hasOption(name) {\n    return has(this.config, name);\n  }\n\n  readOption(name) {\n    return get(this.config, name);\n  }\n\n  writeOption(name, value) {\n    set(this.config, name, value);\n  }\n\n  configure(config) {\n    Object.assign(this.config, config);\n    return this;\n  }\n\n  compile(source, config) {\n    if (config) {\n      this.configure(config);\n    }\n    const parsedTree = parse(source, { ctx: this });\n    parsedTree.forEach((item) => {\n      if (item.type === DECLARATION) {\n        set(this.declaration, item.name, Object.assign(transformDeclaration(item), pickDeclaration(item)));\n      }\n    });\n    return this;\n  }\n\n  create(name, options) {\n    return createInstanceFromDeclaration(this, name, options);\n  }\n}\n\nconst configure = config => new Context(config);\n\nconst compile = (source, config) => {\n  const ctx = new Context(config);\n  return ctx.compile(source);\n};\n\nexport {\n  configure,\n  compile,\n};\n\nexport default Context;\n","export const EVENT_CATCH_EM_ALL = '*';\n\nexport const LISTENER_UNKNOWN       = 0;\nexport const LISTENER_IS_FUNC       = 1;\nexport const LISTENER_IS_NAMED_FUNC = 2;\nexport const LISTENER_IS_OBJ        = 4;\n\nexport const PRIO_MAX     = Number.POSITIVE_INFINITY;\nexport const PRIO_A       = 1000000000;\nexport const PRIO_B       = 1000000;\nexport const PRIO_C       = 1000;\nexport const PRIO_DEFAULT = 0;\nexport const PRIO_LOW     = -10000;\nexport const PRIO_MIN     = Number.NEGATIVE_INFINITY;\n\nexport const NAMESPACE = (() => {\n  if (!Symbol.eventize) {\n    Symbol.eventize = Symbol('eventize');\n  }\n  return Symbol.eventize;\n})();\n\nexport const LOG_NAMESPACE = '[@spearwolf/eventize]';\n","import {\n  EVENT_CATCH_EM_ALL,\n  LISTENER_IS_FUNC,\n  LISTENER_IS_NAMED_FUNC,\n  LISTENER_IS_OBJ,\n} from './constants';\n\nconst apply = (context, func, args) => {\n  if (typeof func === 'function') {\n    func.apply(context, args);\n  }\n};\n\nconst emit = (eventName, listener, args) => apply(\n  listener,\n  listener.emit,\n  [eventName].concat(args),\n);\n\nconst detectListenerType = (listener) => {\n  switch (typeof listener) {\n    case 'function':\n      return LISTENER_IS_FUNC;\n    case 'string':\n      return LISTENER_IS_NAMED_FUNC;\n    case 'object':\n      return LISTENER_IS_OBJ;\n  }\n};\n\nlet lastId = 0;\nconst createUniqId = () => ++lastId;\n\nexport default class EventListener {\n  constructor(eventName, priority, listener, listenerObject = null) {\n    this.id = createUniqId();\n    this.eventName = eventName;\n    this.isCatchEmAll = eventName === EVENT_CATCH_EM_ALL;\n    this.listener = listener;\n    this.listenerObject = listenerObject;\n    this.priority = priority;\n    this.listenerType = detectListenerType(listener);\n    this.callAfterApply = undefined;\n    this.isRemoved = false;\n  }\n\n  isEqual(listener, listenerObject = null) {\n    if (listener === this) return true;\n    if (typeof listener === 'number' && listener === this.id) return true;\n    if (listenerObject === null && typeof listener === 'string') {\n      if (listener === EVENT_CATCH_EM_ALL) return true;\n      if (listener === this.eventName) return true;\n      return false;\n    }\n    return this.listener === listener && this.listenerObject === listenerObject;\n  }\n\n  apply(eventName, args) {\n    if (this.isRemoved) return;\n\n    const { listener, listenerObject } = this;\n\n    switch (this.listenerType) {\n      case LISTENER_IS_FUNC:\n        apply(listenerObject, listener, args);\n        if (this.callAfterApply) this.callAfterApply();\n        break;\n\n      case LISTENER_IS_NAMED_FUNC:\n        apply(listenerObject, listenerObject[listener], args);\n        if (this.callAfterApply) this.callAfterApply();\n        break;\n\n      case LISTENER_IS_OBJ: {\n        const func = listener[eventName];\n        if (this.isCatchEmAll || this.eventName === eventName) {\n          if (typeof func === 'function') {\n            func.apply(listener, args);\n          } else {\n            emit(eventName, listener, args);\n          }\n          if (this.callAfterApply) this.callAfterApply();\n        }\n        break;\n      }\n    }\n  }\n}\n","import { EVENT_CATCH_EM_ALL } from './constants';\nimport EventListener from './EventListener';\n\nconst sortByPrioAndId = (a, b) => (a.priority !== b.priority ? b.priority - a.priority : a.id - b.id);\n\nconst cloneArray = (arr) => {\n  if (arr) {\n    return arr.slice(0);\n  }\n};\n\nconst removeListenerItem = (arr, listener) => {\n  const idx = arr.indexOf(listener);\n  if (idx > -1) {\n    arr.splice(idx, 1);\n  }\n};\n\nconst removeListener = (listeners, listener, listenerObject) => {\n  const idx = listeners.findIndex(item => item.isEqual(listener, listenerObject));\n  if (idx > -1) {\n    listeners[idx].isRemoved = true;\n    listeners.splice(idx, 1);\n  }\n};\n\nconst removeAllListeners = (listeners) => {\n  if (listeners) {\n    listeners.forEach((li) => {\n      li.isRemoved = true;\n    });\n    listeners.length = 0;\n  }\n};\n\nexport default class EventStore {\n  constructor() {\n    this.namedListeners = new Map();\n    this.catchEmAllListeners = [];\n  }\n\n  add(eventListener) {\n    if (eventListener.isCatchEmAll) {\n      this.catchEmAllListeners.push(eventListener);\n      this.catchEmAllListeners.sort(sortByPrioAndId);\n    } else {\n      const { eventName } = eventListener;\n      let namedListeners = this.namedListeners.get(eventName);\n      if (!namedListeners) {\n        namedListeners = [];\n        this.namedListeners.set(eventName, namedListeners);\n      }\n      namedListeners.push(eventListener);\n      namedListeners.sort(sortByPrioAndId);\n    }\n  }\n\n  remove(listener, listenerObject) {\n    if (listenerObject == null && Array.isArray(listener)) {\n      listener.forEach(this.remove.bind(this));\n    } else if (listener == null || (listenerObject == null && listener === EVENT_CATCH_EM_ALL)) {\n      this.removeAllListeners();\n    } else if (listenerObject == null && typeof listener === 'string') {\n      const listeners = this.namedListeners.get(listener);\n      removeAllListeners(listeners);\n    } else if (listener instanceof EventListener) {\n      listener.isRemoved = true;\n      this.namedListeners.forEach(namedListeners => removeListenerItem(namedListeners, listener));\n      removeListenerItem(this.catchEmAllListeners, listener);\n    } else {\n      this.namedListeners.forEach(namedListeners => removeListener(namedListeners, listener, listenerObject));\n      removeListener(this.catchEmAllListeners, listener, listenerObject);\n    }\n  }\n\n  removeAllListeners() {\n    this.namedListeners.forEach(namedListeners => removeAllListeners(namedListeners));\n    this.namedListeners.clear();\n    removeAllListeners(this.catchEmAllListeners);\n  }\n\n  forEach(eventName, fn) {\n    const catchEmAllListeners = cloneArray(this.catchEmAllListeners);\n    const namedListeners = cloneArray(this.namedListeners.get(eventName));\n    if (eventName === EVENT_CATCH_EM_ALL || !namedListeners || namedListeners.length === 0) {\n      catchEmAllListeners.forEach(fn);\n    } else if (catchEmAllListeners.length === 0) {\n      namedListeners.forEach(fn);\n    } else {\n      const iLen = namedListeners.length;\n      const jLen = catchEmAllListeners.length;\n      let i = 0;\n      let j = 0;\n      while (i < iLen || j < jLen) {\n        if (i < iLen) {\n          const cur = namedListeners[i];\n          if (j >= jLen || cur.priority >= catchEmAllListeners[j].priority) {\n            fn(cur);\n            ++i;\n            continue;\n          }\n        }\n        if (j < jLen) {\n          fn(catchEmAllListeners[j]);\n          ++j;\n        }\n      }\n    }\n  }\n}\n","import { EVENT_CATCH_EM_ALL } from './constants';\n\nexport default class EventKeeper {\n  constructor() {\n    this.events = new Map();\n    this.eventNames = new Set();\n  }\n\n  add(eventName) {\n    if (Array.isArray(eventName)) {\n      eventName.forEach(en => this.eventNames.add(en));\n    } else {\n      this.eventNames.add(eventName);\n    }\n  }\n\n  remove(eventName) {\n    if (Array.isArray(eventName)) {\n      eventName.forEach(en => this.remove(en));\n    } else {\n      this.eventNames.delete(eventName);\n    }\n  }\n\n  retain(eventName, args) {\n    if (this.eventNames.has(eventName)) {\n      this.events.set(eventName, args);\n    }\n  }\n\n  isKnown(eventName) {\n    return this.eventNames.has(eventName);\n  }\n\n  emit(eventName, eventListener) {\n    if (eventName === EVENT_CATCH_EM_ALL) {\n      this.eventNames.forEach(en => this.emit(en, eventListener));\n    } else {\n      const args = this.events.get(eventName);\n      if (args) {\n        eventListener.apply(eventName, args);\n      }\n    }\n  }\n}\n","\nexport const definePublicPropertyRO = (obj, name, value) => {\n  Object.defineProperty(obj, name, {\n    value,\n    configurable: true,\n    enumerable: true,\n  });\n  return obj;\n};\n\nexport const definePublicPropertiesRO = (obj, attrs) => {\n  const keys = Object.keys(attrs);\n  const len = keys.length;\n  for (let i = 0; i < len; i += 1) {\n    definePublicPropertyRO(obj, keys[i], attrs[keys[i]]);\n  }\n  return obj;\n};\n\nexport const defineHiddenPropertyRO = (obj, name, value) => {\n  Object.defineProperty(obj, name, {\n    value,\n    configurable: true,\n  });\n  return obj;\n};\n","\nimport { LOG_NAMESPACE } from './constants';\n\nexport const hasConsole = typeof console !== 'undefined';\n\nexport const warn = hasConsole ? console[console.warn ? 'warn' : 'log'].bind(console, LOG_NAMESPACE) : () => undefined; // eslint-disable-line\n","import EventListener from './EventListener';\n\nimport { hasConsole, warn } from './logUtils';\n\nimport {\n  EVENT_CATCH_EM_ALL,\n  PRIO_DEFAULT,\n} from './constants';\n\nconst registerEventListener = (store, keeper, eventName, priority, listener, listenerObject) => {\n  const eventListener = new EventListener(eventName, priority, listener, listenerObject);\n  store.add(eventListener);\n  keeper.emit(eventName, eventListener);\n  return eventListener;\n};\n\nconst subscribeTo = (store, keeper, args) => {\n  const len = args.length;\n  const typeOfFirstArg = typeof args[0];\n\n  let eventName;\n  let priority;\n  let listener;\n  let listenerObject;\n\n  if (len >= 2 && len <= 3 && typeOfFirstArg === 'number') {\n    eventName = EVENT_CATCH_EM_ALL;\n    [priority, listener, listenerObject] = args;\n  } else if (len >= 3 && len <= 4 && typeof args[1] === 'number') {\n    [eventName, priority, listener, listenerObject] = args;\n  } else {\n    priority = PRIO_DEFAULT;\n    if (typeOfFirstArg === 'string' || Array.isArray(args[0])) {\n      [eventName, listener, listenerObject] = args;\n    } else {\n      eventName = EVENT_CATCH_EM_ALL;\n      [listener, listenerObject] = args;\n    }\n  }\n\n  if (!listener && hasConsole) {\n    warn('called with insufficient arguments!', args);\n    return;\n  }\n\n  const register = prio => event => registerEventListener(\n    store, keeper, event,\n    prio, listener, listenerObject,\n  );\n\n  if (Array.isArray(eventName)) {\n    return eventName.map((name) => {\n      if (Array.isArray(name)) {\n        return register(name[1])(name[0]);\n      }\n      return register(priority)(name);\n    });\n  }\n  return register(priority)(eventName);\n};\n\nexport default subscribeTo;\n","import EventStore from './EventStore';\nimport EventKeeper from './EventKeeper';\nimport { defineHiddenPropertyRO } from './propUtils';\nimport subscribeTo from './subscribeTo';\n\nimport {\n  EVENT_CATCH_EM_ALL,\n  NAMESPACE,\n} from './constants';\n\nconst removeListener = obj => (listener) => {\n  listener.callAfterApply = () => obj.off(listener);\n};\n\nexport default function injectEventizeApi(obj) {\n  if (obj[NAMESPACE]) return obj;\n\n  const store = new EventStore();\n  const keeper = new EventKeeper();\n  defineHiddenPropertyRO(obj, NAMESPACE, { keeper, store });\n\n  Object.assign(obj, {\n    // ----------------------------------------------------------------------------------------\n    //\n    // .on( eventName*, [ priority, ] listenerFunc [, listenerObject] )\n    // .on( eventName*, [ priority, ] listenerFuncName, listenerObject )\n    // .on( eventName*, [ priority, ] listenerObject )\n    //\n    // .on( [ priority, ] listenerFunc [, listenerObject] )\n    //                                            => listenerObject.on( '*', listenerFunc )\n    // .on( [ priority, ] listenerObject )\n    //                                            => listenerObject.on( '*', listenerObject )\n    //\n    // .off(...)\n    //\n    // eventName*: eventName | Array<eventName>\n    // eventName: string\n    //\n    // listenerFunc: function\n    // listenerFuncName: string\n    // listenerObject: object\n    //\n    // ----------------------------------------------------------------------------------------\n    on(...args) {\n      return subscribeTo(store, keeper, args);\n    },\n    once(...args) {\n      const listeners = subscribeTo(store, keeper, args);\n      if (Array.isArray(listeners)) {\n        listeners.forEach(removeListener(obj));\n      } else {\n        removeListener(obj)(listeners);\n      }\n      return listeners;\n    },\n    off(listener, listenerObject) {\n      store.remove(listener, listenerObject);\n      if (Array.isArray(listener)) {\n        keeper.remove(listener.filter(li => typeof li === 'string'));\n      } else if (typeof listener === 'string') {\n        keeper.remove(listener);\n      }\n    },\n    emit(eventName, ...args) {\n      if (Array.isArray(eventName)) {\n        eventName.forEach((event) => {\n          store.forEach(event, listener => listener.apply(event, args));\n          keeper.retain(event, args);\n        });\n      } else if (eventName !== EVENT_CATCH_EM_ALL) {\n        store.forEach(eventName, listener => listener.apply(eventName, args));\n        keeper.retain(eventName, args);\n      }\n    },\n    retain(eventName) {\n      keeper.add(eventName);\n    },\n  });\n  return obj;\n}\n","import injectEventizeApi from './inject';\n\nimport {\n  EVENT_CATCH_EM_ALL,\n  NAMESPACE,\n  PRIO_A,\n  PRIO_B,\n  PRIO_C,\n  PRIO_DEFAULT,\n  PRIO_LOW,\n  PRIO_MAX,\n  PRIO_MIN,\n} from './constants';\n\nfunction eventize(obj) {\n  return injectEventizeApi(obj);\n}\n\neventize.inject = injectEventizeApi;\n\neventize.extend = obj => injectEventizeApi(Object.create(obj));\n\neventize.create = (obj) => {\n  const eventizer = injectEventizeApi({});\n  eventizer.on(EVENT_CATCH_EM_ALL, PRIO_DEFAULT, obj);\n  return eventizer;\n};\n\neventize.is = obj => !!(obj && obj[NAMESPACE]);\n\nObject.assign(eventize, {\n  PRIO_MAX,\n  PRIO_A,\n  PRIO_B,\n  PRIO_C,\n  PRIO_DEFAULT,\n  PRIO_LOW,\n  PRIO_MIN,\n});\n\nexport default eventize;\nexport {\n  EVENT_CATCH_EM_ALL,\n  NAMESPACE,\n  PRIO_MAX,\n  PRIO_A,\n  PRIO_B,\n  PRIO_C,\n  PRIO_DEFAULT,\n  PRIO_LOW,\n  PRIO_MIN,\n};\n","\nexport default (component) => {\n  switch (typeof component) {\n    case 'string':\n      return component;\n    case 'function': {\n      switch (typeof component.componentName) {\n        case 'function':\n          return component.componentName();\n        case 'string':\n          return component.componentName;\n        default:\n          return undefined;\n      }\n    }\n    default:\n      return undefined;\n  }\n};\n","import { generateUuid } from '@picimo/core'; // eslint-disable-line\nimport eventize from '@spearwolf/eventize';\n\nimport getComponentName from './getComponentName';\n\nconst hasComponent = entity => name => entity.components.has(getComponentName(name));\n\nexport default class Entity {\n  constructor(ecs, id = generateUuid()) {\n    this.id = id;\n    Object.defineProperties(this, {\n      ecs: {\n        value: ecs,\n      },\n      components: {\n        value: new Set(),\n      },\n    });\n    eventize(this);\n  }\n\n  destroy() {\n    if (!this.destroyed) {\n      this.destroyed = true;\n      this.components.forEach(this.deleteComponent.bind(this));\n      this.ecs.destroyEntity(this.id);\n    }\n  }\n\n  setComponent(name, component) {\n    if (!this.components.has(name)) {\n      this.components.add(name);\n      this[name] = component;\n      if (component.connectedEntity) {\n        component.connectedEntity(this);\n      }\n      this.emit(`componentConnected:${name}`, component, this);\n    } else if (this[name] !== component) {\n      throw new Error(`Entity.setComponent(): component already exists; name='${name}'`);\n    }\n  }\n\n  hasComponent(name) {\n    return Array.isArray(name) ? name.every(hasComponent(this)) : hasComponent(this)(name);\n  }\n\n  deleteComponent(name) {\n    if (this.components.has(name)) {\n      const component = this[name];\n      this.ecs.destroyComponent(name, component);\n      this.components.delete(name);\n      this.emit(`destroyComponent:${name}`, component, this);\n      if (component.disconnectedEntity) {\n        component.disconnectedEntity(this);\n      }\n      delete this[component];\n    }\n  }\n}\n","import getComponentName from './getComponentName';\n\nexport default class ComponentRegistry {\n  constructor() {\n    this.factories = new Map();\n  }\n\n  /**\n   * @param {string} name - component name\n   * @param {object} componentFactory - the component factory interface\n   * @param {function} componentFactory.create - create a new component object\n   * @param {function} componentFactory.update - update a component\n   * @param {function} [componentFactory.destroy] - destroy a component\n   */\n  registerComponent(name, componentFactory) {\n    this.factories.set(name, componentFactory);\n  }\n\n  getComponentFactory(name) {\n    const componentName = getComponentName(name);\n    const factory = this.factories.get(componentName);\n    if (!factory) {\n      throw new Error(`ComponentRegistry: unknown factory '${componentName}'`);\n    }\n    return factory;\n  }\n\n  /**\n   * Create a new component and attach it to the entity.\n   */\n  createComponent(entity, name, data) {\n    const componentName = getComponentName(name);\n    const factory = this.getComponentFactory(componentName);\n    const component = factory.create(entity, data);\n    entity.setComponent(componentName, component);\n  }\n\n  updateComponent(entity, name, data) {\n    const componentName = getComponentName(name);\n    const factory = this.getComponentFactory(componentName);\n    const component = entity[componentName];\n    factory.update(component, data);\n  }\n\n  createOrUpdateComponent(entity, name, data) {\n    const componentName = getComponentName(name);\n    this[entity.hasComponent(componentName) ? 'updateComponent' : 'createComponent'](entity, componentName, data);\n  }\n\n  destroyComponent(name, component) {\n    const factory = this.factories.get(getComponentName(name));\n    if (factory && factory.destroy) {\n      factory.destroy(component);\n    }\n  }\n}\n","import Entity from './Entity';\nimport ComponentRegistry from './ComponentRegistry';\n\nexport default class ECS extends ComponentRegistry {\n  constructor() {\n    super();\n    this.entities = new Map();\n  }\n\n  /**\n   * @param {Array} [components] - *Optional* components to attach to the entity\n   * @param {string} [id] - The *optional* entity id\n   * @returns {Entity}\n   */\n  createEntity(components, id) {\n    const e = new Entity(this, id);\n    if (this.entities.has(e.id)) {\n      throw new Error(`ECS: duplicate entity.id='${e.id}' are not allowed`);\n    }\n    this.entities.set(e.id, e);\n    if (Array.isArray(components)) {\n      components.forEach((c) => {\n        if (Array.isArray(c)) {\n          this.createComponent(e, ...c);\n        } else {\n          this.createComponent(e, c);\n        }\n      });\n    }\n    return e;\n  }\n\n  getEntity(id) {\n    return this.entities.get(id);\n  }\n\n  destroyEntity(id) {\n    const e = this.entities.get(id);\n    if (e) {\n      this.entities.delete(id);\n      if (!e.destroyed) {\n        e.destroy();\n      }\n    }\n  }\n\n  destroyAllEntities() {\n    this.entities.forEach(e => e.destroy());\n  }\n}\n","/* eslint new-cap: 0 */\n/* eslint class-methods-use-this: 0 */\n/* eslint no-unused-vars: 0 */\n\n/**\n * A very simple component factory.\n */\nexport default class ComponentFactory {\n  static registerComponent(registry, ...components) {\n    components.forEach((componentClass) => {\n      registry.registerComponent(componentClass.componentName(), new ComponentFactory(componentClass));\n    });\n  }\n\n  constructor(componentClass) {\n    this.componentClass = componentClass;\n  }\n\n  create(entity, data) {\n    return new this.componentClass(entity, data);\n  }\n\n  update(component, data) {\n    if (component.update) {\n      component.update(data);\n    }\n  }\n\n  destroy(component) {\n    if (component.destroy) {\n      component.destroy();\n    }\n  }\n}\n"],"names":["global","module","window","Math","self","Function","__g","core","version","__e","it","isObject","TypeError","exec","e","require$$0","Object","defineProperty","get","a","document","is","createElement","require$$1","require$$2","S","fn","val","toString","call","valueOf","dP","O","P","Attributes","anObject","toPrimitive","IE8_DOM_DEFINE","value","bitmap","enumerable","configurable","writable","object","key","f","createDesc","hasOwnProperty","id","px","random","concat","undefined","SRC","$toString","TPL","split","inspectSource","safe","isFunction","has","hide","join","String","prototype","this","that","length","aFunction","b","c","apply","arguments","PROTOTYPE","$export","type","name","source","own","out","exp","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","IS_PROTO","IS_BIND","B","target","exports","expProto","ctx","redefine","U","W","R","defined","method","arg","fails","$sort","sort","test","comparefn","toObject","_isFinite","isFinite","isNaN","number","K","__defineSetter__","__defineGetter__","getter","$defineProperty","setter","set","store","push","mode","copyright","shared","uid","IE_PROTO","ObjectProto","getPrototypeOf","constructor","propertyIsEnumerable","slice","cof","IObject","gOPD","getOwnPropertyDescriptor","toIObject","pIE","__lookupGetter__","D","__lookupSetter__","x","y","Symbol","USE_SYMBOL","SPECIES","C","PromiseCapability","resolve","reject","promise","$$resolve","$$reject","promiseCapability","newPromiseCapability","finally","onFinally","speciesConstructor","Promise","then","promiseResolve","check","proto","setPrototypeOf","buggy","Array","__proto__","ceil","floor","min","toInteger","max","index","IS_INCLUDES","$this","el","fromIndex","toLength","toAbsoluteIndex","arrayIndexOf","names","i","result","hiddenKeys","getOwnPropertyNames","$keys","MATCH","isRegExp","ignoreCase","multiline","unicode","sticky","KEY","DESCRIPTORS","gOPN","$RegExp","RegExp","Base","re1","re2","CORRECT_NEW","require$$3","require$$4","p","tiRE","piRE","fiU","inheritIfRequired","$flags","proxy","keys","require$$5","require$$6","flags","SYMBOL","wks","fns","strfn","rxfn","string","$match","regexp","REPLACE","$replace","searchValue","replaceValue","SPLIT","$split","_split","$push","NPCG","separator","limit","separator2","match","lastIndex","lastLength","output","lastLastIndex","splitLimit","separatorCopy","replace","SEARCH","$search","TO_STRING","define","META","setDesc","isExtensible","FREEZE","preventExtensions","setMeta","w","meta","NEED","fastKey","create","getWeak","onFreeze","def","TAG","tag","stat","$Symbol","_global","charAt","wksExt","enumBugKeys","getOwnPropertySymbols","getKeys","getSymbols","gOPS","symbols","isEnum","isArray","defineProperties","Properties","documentElement","Empty","createDict","iframeDocument","iframe","style","display","appendChild","src","contentWindow","open","write","lt","close","dPs","windowNames","getWindowNames","$GOPD","$DP","gOPNExt","$JSON","JSON","_stringify","stringify","HIDDEN","TO_PRIMITIVE","SymbolRegistry","AllSymbols","OPSymbols","USE_NATIVE","QObject","findChild","setSymbolDesc","$fails","_create","protoDesc","wrap","sym","_k","isSymbol","iterator","$defineProperties","enumKeys","l","$create","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","$set","es6Symbols","j","wellKnownSymbols","k","wksDefine","for","keyFor","useSetter","useSimple","replacer","$replacer","args","setToStringTag","quot","createHTML","attribute","p1","NAME","toLowerCase","color","size","url","navigator","userAgent","MSIE","time","boundArgs","setTimeout","setInterval","defer","channel","port","un","process","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","Dispatch","counter","queue","ONREADYSTATECHANGE","run","listener","event","data","invoke","nextTick","now","port2","port1","onmessage","postMessage","addEventListener","importScripts","cel","html","removeChild","clear","$task","UNSCOPABLES","ArrayProto","done","IteratorPrototype","Constructor","next","descriptor","ITERATOR","BUGGY","FF_ITERATOR","KEYS","VALUES","returnThis","DEFAULT","IS_SET","FORCED","$iterCreate","methods","getMethod","kind","DEF_VALUES","VALUES_BUG","$native","$default","$entries","$anyNative","entries","Iterators","values","iterated","_t","_i","step","Arguments","addToUnscopables","TO_STRING_TAG","ArrayValues","DOMIterables","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList","collections","explicit","Collection","$iterators","findNextPowerOf2","arrayAccessor","getProp","obj","prop","aa","parseInt","path","items","shift","hexColor","offset","startsWith","substring","alpha","isPowerOf2","n","DEG2RAD","PI","steps","halfRadius","delta","arr","deg","sin","cos","maxOf","newObj","forEach","options","propName","defValue","funcArgs","colors","map","col","isNumber","add","sub","mul","asFloat","str","trim","ret","res","mat4","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","toStr","rotate","funcName","z","rotateZ","AABB2","x0","x1","y0","y1","minX","maxX","minY","maxY","h","addPoint","isInside","isIntersection","aabb","uuid","DataRef","hints","data_","generateUuid","serial","touch","isSynced","otherRef","needSync","sync","callback","hasHint","hintKey","expectedValue","Boolean","hint","ElementIndexArray","objectCount","itemCount","usage","array","Uint16Array","ref","typedArray","indices","stride","objectOffset","IndexedPrimitive","primitiveType","elementIndexArray","capacity","Generate","EPSILON","ARRAY_TYPE","Float32Array","degree","glMatrix.ARRAY_TYPE","copy","identity","multiply","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b0","b1","b2","b3","translate","v","scale","rotateX","rad","s","rotateY","perspective","fovy","aspect","near","far","tan","nf","Infinity","ortho","left","right","bottom","top","lr","bt","sqrt","fromValues","normalize","len","dot","cross","ax","ay","az","bx","by","bz","vec","count","setAxisAngle","axis","slerp","t","aw","bw","omega","cosom","sinom","scale0","scale1","glMatrix.EPSILON","acos","fromMat3","m","fTrace","fRoot","vec4.normalize","rotationTo","tmpvec3","vec3.create","xUnitVec3","vec3.fromValues","yUnitVec3","vec3.dot","vec3.cross","vec3.len","vec3.normalize","sqlerp","temp1","temp2","d","setAxes","matr","mat3.create","view","up","Mat4","width","height","hw","hh","hz","distance","halfHeight","atan","clone","dolly","convertToPowerOf2","image","canvas","getContext","drawImage","setPowerOf2ImgEl","p2img","imgEl","origWidth","origHeight","PowerOf2Image","from","Image","onLoaded","origOnLoad","onload","COVER","CONTAIN","FILL","Projection","devicePixelRatio","fit","pixelRatio","desiredWidth","desiredHeight","desiredPixelRatio","customDevicePixelRatio","lastPerspective","rawWidth","rawHeight","_perspective","abs","updateOrtho","update","currentWidth","currentHeight","r","currentRatio","desiredRatio","isCover","factor","ShaderVariable","assign","UNIFORM","ATTRIB","TEXTURE_2D","ShaderUniformVariable","PROJECTION_UNIFORM_NAME","ProjectionUniform","projection","TYPED_ARRAY","float32","int16","Int16Array","int32","Int32Array","int8","Int8Array","uint16","uint32","Uint32Array","uint8","Uint8Array","createBufferView","bytesPerVO","byteLength","ArrayBuffer","DataView","isView","byteOffset","dataByteLength","buffer","typedArrayProp","createLinkedTypedArrays","bufferByteOffset","bufferByteLength","arrayTypes","typedArrays","TypedArray","BYTES_PER_ELEMENT","VOArray","toUint32Array","toOffset","elementsPerVO","uint32Array","subarray","begin","byteBegin","TYPED_ARRAY_GETTER","float32Array","int32Array","int16Array","int8Array","uint16Array","uint8Array","camelize","toUpperCase","substr","attrPostfix","attrDesc","scalars","postfix","getVNu","getArray","attrIndex","voArray","setVNu","vectorLength","vertexCount","vertexAttrCount","getV1u","setVNv","setV1u","VOAttrDescriptor","uniform","bytesPerElement","bytesPerVertex","propertiesObject","valueGetter","valueSetter","getValue","vo","setValue","valueGetters","curValueGetter","vi","idx","curVertexValueGetters","setterName","DEFAULT_ATTR_TYPE","attributesOrObject","attributes","attrConf","Error","attr","attrSize","rightPadBytesPerVertex","attrList","aliases","toArray","voPrototype","typeList","filter","createVOArray","VODescriptor","instanceOf","isInstanced","base","createAttributes","createAliases","createVOPrototype","createTypedArrays","doubleBuffer","createVO","voInit","hasAttribute","ShaderSource","HTMLElement","strings","textContent","compile","context","PARTIAL","VERTEX_SHADER","FRAGMENT_SHADER","vertexShader","fragmentShader","partial","fromElement","getAttribute","ResourceLibrary","descriptors","Map","vertexShaders","fragmentShaders","createDescriptor","voDescriptor","addVertexShader","addFragmentShader","createVertexShader","createFragmentShader","getDescriptor","getVertexShader","getFragmentShader","ShaderAttribVariable","ShaderVariableGroup","shaderVars","pushVar","shaderContext","bind","popVar","shaderVarMap","attrib","tex2d","shaderVarLane","lane","ShaderContext","shaderVariable","curVar","curUniform","curAttrib","curTex2d","ShaderProgram","ShaderUniformGroup","uniforms","addUniform","isProjection","ShaderAttribValue","bufferSource","bufferSource_","ShaderVariableAlias","shaderVar","ShaderVariableBufferGroup","firstVar","attrName","voPool","maxAllocSize","usedCount","allocatedCount","vertexObject","free","availableVOs","VOPool","readOption","maxIndexedVOPoolSize","maxAllocVOSize","voZero","voNew","autotouch","usedVOs","createVOs","alloc","multiAlloc","targetArray","indexOf","lastIdx","last","tmp","splice","pop","unshift","pickVOPoolOpts","pick","createSpriteSizeHook","setSize","sprite","SpriteGroup","spriteHook","voPoolShaderAttribs","primitive","shaderProgram","availableCount","createSprite","createSprites","sprites","touchVertexBuffers","StackedContext","stack","Texture","width_","height_","parent","_ref","flipY","repeatable","premultiplyAlpha","nearest","_width","_height","root","texture","textureHints","absoluteUrl","URL","location","href","TextureAtlasJsonDef","jsonDef","frameNames","frames","imageUrl","fetchOptions","response","fetch","json","TextureAtlas","rootTexture","addFrame","addFrameAlias","alias","frame","randomFrame","sample","randomFrameName","regex","atlasUrl","load","atlas","TextureHandle","textureOrAtlas","onReady","async","toa","ShaderTexture2dVariable","TextureLibrary","handles","loadTexture","th","loadTextureAtlas","textureAtlasOptions","getTexture","getTextureAtlas","whenLoaded","textureId","shaderVarKey","ShaderTextureGroup","textureLibrary","shaderTextureMap","waitFor","isLoaded","shaderVarGroup","shaderVarStore","TexturedSpriteGroup","setTexCoordsByTexture","textures","shaderTextureGroup","setTexture","sampler","whenTexturesLoaded","super","Viewport","enable","sfactor","dfactor","blendModeCache","BlendMode","make","blendMode","_sfactor","_dfactor","isEqual","other","TextureUnitManager","glx","boundTextures","MAX_TEXTURE_IMAGE_UNITS","lastBoundTexUnit","bindWebGlTexture","glTexture","texUnit","prevGlTex","activeTexture","bindTexture2d","glTexObj","readGlState","gl","DEPTH_BITS","getParameter","STENCIL_BITS","boundBuffers","ARRAY_BUFFER","ARRAY_BUFFER_BINDING","ELEMENT_ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER_BINDING","currentProgram","CURRENT_PROGRAM","blendEnabled","BLEND","WebGlContext","contextAttributes","getContextAttributes","currentBlendMode","textureUnitManager","enabledVertexAttribLocations","bindBuffer","tex","TEXTURE0","activeTexUnit","glTextureId","bound","bindTexture","useProgram","glProgram","enableVertexAttribArrays","enableLocations","disableVertexAttribArray","enableVertexAttribArray","blend","blendFunc","disable","WebGl1Context","isWebGL1","ANGLE_instanced_arrays","getExtension","vertexAttribDivisor","divisor","vertexAttribDivisorANGLE","drawElementsInstanced","instanceCount","drawElementsInstancedANGLE","WebGl2Context","isWebGL2","readContextAttributes","depth","stencil","antialias","premultipliedAlpha","preserveDrawingBuffer","preferLowPowerToHighPerformance","failIfMajorPerformanceCaveat","ctxAttrs","definition","noop","undefinedType","logMethods","bindMethod","methodName","replaceLoggingMethods","level","loggerName","methodFactory","log","debug","defaultMethodFactory","console","realMethod","Logger","defaultLevel","factory","currentLevel","storageKey","getPersistedLevel","storedLevel","localStorage","ignore","cookie","encodeURIComponent","levels","TRACE","DEBUG","INFO","WARN","ERROR","SILENT","getLevel","setLevel","persist","levelNum","levelName","persistLevelIfPossible","setDefaultLevel","enableAll","disableAll","initialLevel","defaultLogger","_loggersByName","getLogger","logger","_log","noConflict","getLoggers","WebGlBuffer","clonedTypedArray","lastTypedArray","glBuffer","createBuffer","bufferData","doubleBufferData","deleteBuffer","STATIC_DRAW","DYNAMIC_DRAW","loglevel","compileShader","shader","glShader","shaderSource","getShaderParameter","COMPILE_STATUS","shaderInfoLog","getShaderInfoLog","WebGlShader","shaderType","createShader","createUniformSetter","FLOAT","uniform1f","FLOAT_VEC2","uniform2f","FLOAT_VEC3","uniform3f","FLOAT_VEC4","uniform4f","FLOAT_MAT4","uniformMatrix4fv","FALSE","SAMPLER_2D","uniform1i","WebGlUniform","program","getActiveUniform","getUniformLocation","GL_ITEM_TYPES","glType","WebGlAttribute","getActiveAttrib","getAttribLocation","vertexAttribPointer","getProgramParameter","ACTIVE_ATTRIBUTES","attributeNames","attributeLocations","createUniforms","ACTIVE_UNIFORMS","uniformNames","linkProgram","attachShader","LINK_STATUS","WebGlProgram","createProgram","use","loadUniforms","renderer","success","error","syncTexture","loadAttributes","attribValue","syncBuffer","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","REPEAT","CLAMP_TO_EDGE","texParameteri","TEXTURE_WRAP_S","TEXTURE_WRAP_T","NEAREST","LINEAR","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","texImage2D","RGBA","UNSIGNED_BYTE","WebGlTexture","isInitialized","createTexture","uploadImageData","initTexGl","WEB_GL_BUFFER_USAGE","static","dynamic","loadResource","cache","resource","glResource","WebGlResourceLibrary","loadBuffer","warn","findBuffer","freeBuffer","bufferRef","delete","loadVertexShader","loadFragementShader","loadProgram","vs","fs","texRef","glTextureRef","glTex","CTX_BLEND_MODE","createCanvas","domElement","tagName","autotouchResource","touchedWithinFrame","applyBlendMode","universalContext","WebGlRenderer","createWebGlContext","resources","lastFrameTime","frameNo","timeFrameOffset","_pixelRatio","_touchedWithinFrame","Set","shaderGlobals","resolution","resize","pushBlendMode","popBlendMode","getComputedStyle","parentNode","clientWidth","clientHeight","wPx","hPx","dpr","round","projectionUniform","readPixels","drawingBufferWidth","drawingBufferHeight","ImageData","Uint8ClampedArray","initFrame","performance","viewport","glTexRef","useShaderProgram","successUniforms","successAttributes","drawArrays","startIndex","drawIndexed","drawElements","UNSIGNED_SHORT","drawIndexedInstanced","drawPrimitive","primCount","primOffset","drawPrimitiveIndexed","drawSpriteGroup","spriteGroup","draw","texUniforms","objectProto","baseHas","freeGlobal","freeSelf","nativeObjectToString","symToStringTag","toStringTag","getRawTag","isOwn","objectToString","nullTag","undefinedTag","baseGetTag","isObjectLike","symbolTag","reIsDeepProp","reIsPlainProp","isKey","asyncTag","funcTag","genTag","proxyTag","coreJsData","maskSrcKey","isMasked","func","funcProto","funcToString","toSource","reRegExpChar","reIsHostCtor","reIsNative","baseIsNative","getNative","nativeCreate","hashClear","__data__","hashDelete","HASH_UNDEFINED","hashGet","hashHas","hashSet","Hash","entry","listCacheClear","eq","assocIndexOf","arrayProto","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","mapCacheClear","hash","isKeyable","getMapData","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","FUNC_ERROR_TEXT","memoize","resolver","memoized","Cache","MAX_MEMOIZE_SIZE","memoizeCapped","rePropName","reEscapeChar","stringToPath","charCodeAt","quote","subString","arrayMap","iteratee","INFINITY","symbolProto","symbolToString","baseToString","castPath","argsTag","baseIsArguments","isArguments","MAX_SAFE_INTEGER","reIsUint","isIndex","isLength","toKey","hasPath","hasFunc","baseAssignValue","assignValue","objValue","baseSet","customizer","nested","newValue","peg$subclass","child","ctor","peg$SyntaxError","message","expected","found","captureStackTrace","peg$parse","input","peg$result","peg$FAILED","peg$startRuleFunctions","start","peg$parsestart","peg$startRuleFunction","peg$c0","peg$otherExpectation","peg$c1","statements","compact","peg$c2","peg$c3","statement","peg$c4","peg$c5","verb","subject","peg$c6","extension","block","declarationType","peg$c7","peg$c8","peg$literalExpectation","peg$c9","peg$c10","peg$c11","peg$c12","peg$c13","peg$c14","peg$c15","peg$c16","peg$c17","peg$c18","peg$c19","anno","dataType","copyAsAnnotation","peg$c20","peg$c21","peg$c22","peg$c23","peg$c24","peg$c25","peg$c26","peg$c27","hasOption","writeOption","writeConstant","peg$c28","peg$c29","peg$c30","peg$c31","props","peg$c32","peg$c33","peg$c34","peg$c35","peg$c36","peg$c37","head","peg$c38","peg$c39","peg$c40","tail","peg$c41","peg$c42","peg$c43","peg$c44","peg$c45","peg$c46","peg$c47","peg$c48","peg$c49","a0","peg$c50","anno0","a1","peg$c51","anno1","valueType","peg$c52","peg$c53","peg$c54","peg$c55","peg$c56","peg$c57","peg$c58","peg$c59","peg$c60","peg$c61","peg$c62","peg$c63","peg$c64","peg$c65","peg$c66","peg$c67","peg$c68","peg$c69","peg$c70","peg$c71","peg$c72","peg$c73","peg$c74","peg$c75","peg$c76","peg$c77","peg$c78","peg$c79","peg$c80","peg$c81","peg$c82","peg$c83","peg$c84","peg$c85","peg$c86","expr","peg$c87","peg$c88","peg$c89","peg$c90","peg$c91","peg$c92","peg$c93","peg$c94","peg$c95","peg$c96","peg$c97","peg$c98","peg$c99","reduce","element","peg$c100","peg$c101","peg$c102","peg$c103","peg$c104","peg$c105","peg$c106","minus","readConstant","peg$c107","peg$c108","parseFloat","text","peg$c109","peg$c110","peg$c111","peg$c112","peg$classExpectation","peg$c113","peg$c114","peg$c115","peg$c116","peg$c117","peg$c118","chars","peg$c119","peg$c120","peg$c121","peg$c122","peg$c123","peg$c124","peg$c125","peg$c126","peg$c127","peg$c128","peg$c129","peg$c130","peg$c131","peg$c132","peg$c133","peg$c134","peg$c135","peg$c136","peg$c137","peg$c138","peg$c139","peg$c140","digits","fromCharCode","peg$c141","sequence","peg$c142","peg$c143","peg$c144","peg$c145","peg$c146","firstChar","peg$c147","flatten","acc","peg$c148","peg$c149","peg$c150","peg$c151","peg$c152","peg$c153","peg$c154","peg$c155","peg$c156","peg$c157","peg$c158","peg$c159","peg$c160","peg$c161","peg$c162","peg$c163","peg$c164","peg$c165","peg$c166","peg$c167","peg$c168","peg$currPos","peg$savedPos","peg$posDetailsCache","line","column","peg$maxFailPos","peg$maxFailExpected","peg$silentFails","startRule","parts","inverted","description","peg$computePosDetails","pos","details","peg$computeLocation","startPos","endPos","startPosDetails","endPosDetails","end","peg$fail","s0","s2","s3","peg$parsews","peg$parsetop_level_statement","s1","s5","peg$parsename","peg$parse_","peg$parsevalue","peg$parseconst_statement","s6","s7","s8","peg$parsedeclaration_type","peg$parsedeclaration_verb","peg$parsedata_block","peg$parsedeclaration","peg$parsenl","peg$parsestatement","peg$parsenamed_arguments_list","peg$parsenamed_data_block","s9","s10","s11","s12","peg$parsedata_value_type","peg$parseproperty_statement","peg$parsedata_statement","s4","peg$parsebegin_block","peg$parseend_block","peg$parseproperty_argument","peg$parseproperty_arguments_list","peg$parsenamed_argument","peg$parsenull","peg$parsefalse","peg$parsetrue","peg$parsebegin_array","peg$parsearray_value_separator","peg$parseend_array","peg$parsevalue_array","peg$parsevalue_expression","peg$parsequotation_mark","peg$parsechar","peg$parsestring","peg$parsenumber_term","peg$parsenumber_expression","peg$parsenumber_factor","peg$parseminus","peg$parsezero","peg$parsedigit1_9","peg$parseDIGIT","peg$parseint","peg$parsedecimal_point","peg$parsefrac","peg$parsee","peg$parseplus","peg$parseexp","peg$parsenumber","peg$parseunescaped","peg$parseescape","peg$parseHEXDIG","peg$parsename_char","propertyCall","annotations","buildMessage","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","escapedParts","classEscape","any","hex","ch","descriptions","describeExpected","describeFound","parse","resIndex","DATA","DATA_BLOCK","DECLARATION","PROPERTY_CALL","findPropertyCall","withName","find","hasPropertyCall","firstPropertyCallArg","setByFirstPropertyCallArg","targetKey","readFlag","flag","setFlagByPropertyCall","to","findNamedArgument","setByNamedArgument","findData","attachDataValue","attachDataValues","parseVoDefaultValues","defVal","curVal","opt","assignOptions","read","substitute","declaration","transform","parsedTree","parseVoNewDefaults","aliasAnnotation","generate","createPrimitive","vodKey","vodOptions","vodDeclaration","ctxReadOption","spriteGroupOptions","vod","readVoPoolOptions","textureMap","dataBlock","VERTEX_OBJECT","PRIMITIVE","SPRITE_GROUP","FACTORIES","VertexObject","Primitive","getFactory","transformDeclaration","item","createInstanceFromDeclaration","pickDeclaration","Context","config","configure","EVENT_CATCH_EM_ALL","LISTENER_IS_FUNC","LISTENER_IS_NAMED_FUNC","LISTENER_IS_OBJ","PRIO_MAX","Number","POSITIVE_INFINITY","PRIO_A","PRIO_B","PRIO_C","PRIO_DEFAULT","PRIO_LOW","PRIO_MIN","NEGATIVE_INFINITY","NAMESPACE","eventize","LOG_NAMESPACE","emit","eventName","detectListenerType","lastId","createUniqId","EventListener","[object Object]","priority","listenerObject","isCatchEmAll","listenerType","callAfterApply","isRemoved","sortByPrioAndId","cloneArray","removeListenerItem","removeListener","listeners","findIndex","removeAllListeners","li","EventStore","namedListeners","catchEmAllListeners","eventListener","remove","iLen","jLen","cur","EventKeeper","events","eventNames","en","defineHiddenPropertyRO","hasConsole","registerEventListener","keeper","subscribeTo","typeOfFirstArg","register","prio","off","injectEventizeApi","on","retain","inject","extend","eventizer","component","componentName","hasComponent","entity","components","getComponentName","Entity","ecs","destroy","destroyed","deleteComponent","destroyEntity","setComponent","connectedEntity","every","destroyComponent","disconnectedEntity","ComponentRegistry","factories","registerComponent","componentFactory","getComponentFactory","createComponent","updateComponent","createOrUpdateComponent","ECS","entities","createEntity","getEntity","destroyAllEntities","ComponentFactory","registry","componentClass"],"mappings":"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"}